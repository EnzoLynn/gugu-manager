Ext.define("chl.Action.Customer_number_allGridAction",{extend:"WS.action.Base",category:"Customer_number_allGridAction"}),Ext.create("chl.Action.Customer_number_allGridAction",{itemId:"searchCustomer_number_all",iconCls:"search",tooltip:"查询",text:"查询",handler:function(){var target=this.getTargetView();ActionManager.searchCustomer_number_all(target)},updateStatus:function(selection){}}),Ext.create("chl.Action.Customer_number_allGridAction",{itemId:"refreshCustomer_number_all",iconCls:"refresh",tooltip:"刷新",text:"刷新",handler:function(){var target=this.getTargetView();ActionManager.refreshCustomer_number_all(target)},updateStatus:function(selection){}}),Ext.create("chl.Action.Customer_number_allGridAction",{itemId:"removeCustomer_number_all_t",iconCls:"remove",tooltip:"删除所有匹配查询结果的项目",text:"删除(匹配)",handler:function(){var target=this.getTargetView();ActionManager.delCustomer_number_all(target,{filter:!0,msg:"您确定要所有删除匹配查询结果的项目吗？"})},updateStatus:function(selection){}}),Ext.create("chl.Action.Customer_number_allGridAction",{itemId:"removeCustomer_number_all",iconCls:"remove",tooltip:"删除",text:"删除",handler:function(){var target=this.getTargetView();ActionManager.delCustomer_number_all(target)},updateStatus:function(selection){this.setDisabled(0==selection.length)}}),ActionManager.delCustomer_number_all=function(target,opts){var sm=target.getSelectionModel(),records=sm.getSelection();if(opts||records[0]){var ids=[];Ext.Array.each(records,function(rec){ids.push(rec.data.number_id)});var store=target.getStore(),defConfig={title:"提示",msg:"您确定要删除选定的项目吗？",buttons:Ext.MessageBox.YESNO,closable:!1,fn:function(btn){if("yes"==btn){var param={sessiontoken:GlobalFun.getSeesionToken(),number_ids:ids.join()};if(opts&&opts.filter){var extraParams=store.getProxy().extraParams;param={sessiontoken:GlobalFun.getSeesionToken(),filter:extraParams.filter}}WsCall.pcall(GlobalConfig.Controllers.Customer_numberGrid.destroy,"Customer_numberGrid",param,function(response,opts){new Ext.util.DelayedTask(function(){store.load()}).delay(500)},function(response,opts){GlobalFun.errorProcess(response.code)||Ext.Msg.alert("失败",response.msg)},!0)}},icon:Ext.MessageBox.QUESTION},mesConfig=Ext.Object.merge(defConfig,opts);GlobalConfig.newMessageBox.show(mesConfig)}},ActionManager.refreshCustomer_number_all=function(target){target.loadGrid()},ActionManager.searchCustomer_number_all=function(traget){WindowManager.searchCustomer_number_allWin&&""!=WindowManager.searchCustomer_number_allWin?WindowManager.searchCustomer_number_allWin.show():WindowManager.searchCustomer_number_allWin=Ext.create("Ext.window.Window",{modal:!0,resizable:!1,closeAction:"hide",title:"查询",defaultFocus:"customer_nameItemId",iconCls:"search",record:!1,formVals:"",height:140,width:500,layout:"vbox",listeners:{show:function(win){var form=win.down("#formId").getForm();""!=win.formVals&&form.setValues(win.formVals);var searchfield=traget.down("#CustomerGridSearchfieldId");if(searchfield&&searchfield.paramName){var item=win.down("textfield[name="+searchfield.paramName+"]");if(item){var store=traget.getStore(),filter=Ext.JSON.decode(store.getProxy().extraParams.filter);item.setValue(filter[searchfield.paramName])}}}},items:[{xtype:"form",itemId:"formId",autoScroll:!0,height:190,width:500,border:!1,bodyPadding:15,defaultType:"textfield",layout:{type:"table",columns:1},defaults:{labelAlign:"right",labelPad:15,width:340,labelWidth:125,maxLength:36,enableKeyEvents:!0,listeners:{keydown:function(field,e,opts){var me=this;if(e.getKey()==e.ENTER){var win=me.up("window");win.down("#submit").fireHandler(e)}}}},items:[{name:"customer_name",fieldLabel:"客户名",itemId:"customer_nameItemId"},{name:"tracking_number",fieldLabel:"面单号",itemId:"tracking_numberItemId"}]}],buttons:[{text:"重置",handler:function(){var me=this,w=me.up("window"),f=w.down("#formId");f.getForm().reset()}},{text:"确定",itemId:"submit",handler:function(){var me=this,win=me.up("window"),searchFlag=!1,store=traget.getStore(),form=(store.getProxy().extraParams,win.down("#formId").getForm());if(form.isValid()){win.formVals=form.getValues();var customer_name=win.down("#customer_nameItemId").getValue();""!=customer_name?(GlobalFun.GridSearchInitFun("customer_name",!1,store,customer_name),searchFlag=!0):GlobalFun.GridSearchInitFun("customer_name",!0,store,!1);var Searchfield=traget.down("#CustomerGridSearchfieldId");Searchfield&&(Searchfield.setValue(customer_name),Searchfield.setSearchStatus(""!=customer_name?!0:!1));var tracking_number=win.down("#tracking_numberItemId").getValue();""!=tracking_number?(GlobalFun.GridSearchInitFun("tracking_number",!1,store,tracking_number),searchFlag=!0):GlobalFun.GridSearchInitFun("tracking_number",!0,store,!1),searchFlag?(win.close(),traget.loadGrid()):(win.close(),traget.loadGrid())}}},{text:"取消",handler:function(){var me=this;me.up("window").close()}}]}).show()};
//# sourceMappingURL=Customer_number_allGridAction.js.map