Ext.define("chl.Action.RuleGridAction",{extend:"WS.action.Base",category:"RuleGridAction"}),Ext.create("chl.Action.RuleGridAction",{itemId:"addRule",iconCls:"add",tooltip:"添加",text:"添加",handler:function(){var me=this,target=me.getTargetView();ActionManager.addRule(target)},updaRuleatus:function(selection){this.setDisabled(!GlobalFun.IsAllowFun("墓碑落葬"))}}),Ext.create("chl.Action.RuleGridAction",{itemId:"editRule",iconCls:"edit",tooltip:"编辑",text:"编辑",handler:function(){var me=this,target=me.getTargetView(),record=target.getSelectionModel().getSelection()[0];ActionManager.editRule(target,record)},updaRuleatus:function(selection){this.setDisabled(1!=selection.length||!GlobalFun.IsAllowFun("墓碑落葬"))}}),Ext.create("chl.Action.RuleGridAction",{itemId:"refreshRule",iconCls:"refresh",tooltip:"刷新",text:"刷新",handler:function(){var target=this.getTargetView();ActionManager.refreshRule(target)},updaRuleatus:function(selection){}}),ActionManager.refreshRule=function(traget){traget.loadGrid()},ActionManager.addRule=function(traget){var record=traget.getStore().getAt(0);WindowManager.AddUpdateRuleWin=Ext.create("chl.Grid.AddUpdateRuleWin",{grid:traget,iconCls:"add",action:"create",record:record,title:"新增逝者"}),WindowManager.AddUpdateRuleWin.show(null,function(){WindowManager.AddUpdateRuleWin.down("#SupperManageItemId").setDisabled(GlobalFun.IsAllowFun("无限期管理年限")?!1:!0),WindowManager.AddUpdateRuleWin.down("#formId").loadRecord(record)})},ActionManager.editRule=function(traget,record){WindowManager.AddUpdateRuleWin=Ext.create("chl.Grid.AddUpdateRuleWin",{grid:traget,iconCls:"edit",record:record,action:"update",title:"编辑逝者"}),WindowManager.AddUpdateRuleWin.show(null,function(){WindowManager.AddUpdateRuleWin.down("#SupperManageItemId").setDisabled(GlobalFun.IsAllowFun("无限期管理年限")?!1:!0),WindowManager.AddUpdateRuleWin.down("#formId").loadRecord(record)})};
//# sourceMappingURL=RuleGridAction.js.map