Ext.define("Ext.ux.form.field.DateTime",{extend:"Ext.form.FieldContainer",mixins:{field:"Ext.form.field.Field"},alias:"widget.datetimefield",layout:"hbox",width:200,height:22,combineErrors:!0,mySqlType:"time",tmpcId:"",doSearch:!1,dateCfg:{},timeHCfg:{},timeMCfg:{},timeICfg:{},initComponent:function(){var me=this;me.buildField(),me.callParent(),this.dateField=this.down("datefield"),this.timeHField=this.down("#sendTimeHouer"+this.tmpcId),this.timeMField=this.down("#sendTimeMin"+this.tmpcId),this.timeIField=this.down("#sendTimeSec"+this.tmpcId),me.initField()},buildField:function(){var me=this;if(me.items=[],("date"==me.mySqlType||"datetime"==me.mySqlType)&&me.items.push(Ext.apply({xtype:"datefield",itemId:"sendDate"+me.tmpcId,name:"sendDate"+me.tmpcId,format:"Y-m-d",width:90,submitValue:!1,blankText:"日期不能为空",allowBlank:!1},me.dateCfg)),("time"==me.mySqlType||"datetime"==me.mySqlType)&&me.items.push(Ext.apply({itemId:"sendTimeHouer"+me.tmpcId,name:"sendTimeHouer"+me.tmpcId,xtype:"numberfield",maxText:"时最大为23",minText:"时最小为0",submitValue:!1,allowDecimals:!1,width:40,minValue:0,maxValue:23,blankText:"不能为空",allowBlank:!1},me.timeHCfg),Ext.apply({itemId:"sendTimeMin"+me.tmpcId,name:"sendTimeMin"+me.tmpcId,xtype:"numberfield",maxText:"分最大为59",minText:"分最小为0",submitValue:!1,allowDecimals:!1,width:40,minValue:0,maxValue:59,blankText:"不能为空",allowBlank:!1},me.timeMCfg),Ext.apply({itemId:"sendTimeSec"+me.tmpcId,name:"sendTimeSec"+me.tmpcId,xtype:"numberfield",maxText:"秒最大为59",minText:"秒最小为0",submitValue:!1,allowDecimals:!1,width:40,minValue:0,maxValue:59,blankText:"不能为空",allowBlank:!1},me.timeICfg)),me.doSearch){var serTmp=Ext.clone(me.items);"date"==me.mySqlType?me.items.push({margin:"0 0 0 5",xtype:"displayfield",width:20,value:"--"}):me.items.push({margin:"0 0 0 5",xtype:"displayfield",width:20,value:"--"}),Ext.Array.each(serTmp,function(item,index,alls){("numberfield"==item.xtype||"datefield"==item.xtype)&&(item.name="end_"+item.name,item.itemId="end_"+item.itemId),"hidden"==item.xtype&&(item.name="end_"+item.name,item.myXtype="end_"+item.myXtype,item.itemId="end_"+item.itemId,item.submitValue=!1),me.items.push(item)})}},getValue:function(){var me=this,strTime="";if("date"==me.mySqlType){var strTime=Ext.util.Format.date(me.down("#sendDate"+me.tmpcId).getValue(),"Y-m-d");if(me.doSearch){var endTime=Ext.util.Format.date(me.down("#end_sendDate"+me.tmpcId).getValue(),"Y-m-d");strTime+=","+endTime}return strTime}if("datetime"==me.mySqlType){var strTime=Ext.util.Format.date(me.down("#sendDate"+me.tmpcId).getValue(),"Y-m-d"),tmpH=me.down("#sendTimeHouer"+me.tmpcId).getValue();tmpH=10>tmpH?"0"+tmpH:tmpH;var tmpM=me.down("#sendTimeMin"+me.tmpcId).getValue();tmpM=10>tmpM?"0"+tmpM:tmpM;var tmpS=me.down("#sendTimeSec"+me.tmpcId).getValue();if(tmpS=10>tmpS?"0"+tmpS:tmpS,strTime+=" "+tmpH+":"+tmpM+":"+tmpS,me.doSearch){var endTime=Ext.util.Format.date(me.down("#end_sendDate"+me.tmpcId).getValue(),"Y-m-d"),tmpH1=me.down("#end_sendTimeHouer"+me.tmpcId).getValue(),tmpM1=me.down("#end_sendTimeMin"+me.tmpcId).getValue(),tmpS1=me.down("#end_sendTimeSec"+me.tmpcId).getValue();tmpH1=10>tmpH1?"0"+tmpH1:tmpH1,tmpM1=10>tmpM1?"0"+tmpM1:tmpM1,tmpS1=10>tmpS1?"0"+tmpS1:tmpS1,endTime+=" "+tmpH1+":"+tmpM1+":"+tmpS1,strTime+=","+endTime}return strTime}if("time"==me.mySqlType){var tmpH=me.down("#sendTimeHouer"+me.tmpcId).getValue();tmpH=10>tmpH?"0"+tmpH:tmpH;var tmpM=me.down("#sendTimeMin"+me.tmpcId).getValue();tmpM=10>tmpM?"0"+tmpM:tmpM;var tmpS=me.down("#sendTimeSec"+me.tmpcId).getValue();tmpS=10>tmpS?"0"+tmpS:tmpS;var strTime=tmpH+":"+tmpM+":"+tmpS;if(me.doSearch){var tmpH1=me.down("#end_sendTimeHouer"+me.tmpcId).getValue(),tmpM1=me.down("#end_sendTimeMin"+me.tmpcId).getValue(),tmpS1=me.down("#end_sendTimeSec"+me.tmpcId).getValue();tmpH1=10>tmpH1?"0"+tmpH1:tmpH1,tmpM1=10>tmpM1?"0"+tmpM1:tmpM1,tmpS1=10>tmpS1?"0"+tmpS1:tmpS1;var endTime=tmpH1+":"+tmpM1+":"+tmpS1;strTime+=","+endTime}return strTime}return null},setValue:function(value,useval){var me=this;if(("date"==me.mySqlType||"datetime"==me.mySqlType)&&me.dateField.setValue(me.dateCfg.value?me.dateCfg.value:Ext.util.Format.date(new Date,"Y-m-d")),("time"==me.mySqlType||"datetime"==me.mySqlType)&&(me.timeHField.setValue(me.timeHCfg.value?me.timeHCfg.value:0),me.timeMField.setValue(me.timeMCfg.value?me.timeMCfg.value:0),me.timeIField.setValue(me.timeICfg.value?me.timeICfg.value:0),useval)){var date,timeH=value.split(":")[0],timeM=value.split(":")[1],timeI=value.split(":")[2];"datetime"==me.mySqlType&&(date=value.split("T")[0]),date&&(date=timeH.split("T")[0],timeH=timeH.split("T")[1],me.dateField.setValue(date)),me.timeHField.setValue(timeH),me.timeMField.setValue(timeM),me.timeIField.setValue(timeI)}},isFileUpload:function(){return"file"===this.inputType},getSubmitData:function(){var me=this,value=me.getValue(),name=me.name,data={};if(!me.disabled&&me.submitValue&&!me.isFileUpload()){if(value&&"datetime"==me.mySqlType){var re=/\s/g;value=value.replace(re,"T")}return data[""+name]=value,value&&name?data:null}},setFieldStyle:function(style){var me=this,inputEl=me.timeHField?me.timeHField.inputEl:null,inputEl1=me.timeMField?me.timeMField.inputEl:null,inputEl2=me.timeIField?me.timeIField.inputEl:null,inputEl3=me.dateField?me.dateField.inputEl:null;inputEl&&inputEl.applyStyles(style),inputEl1&&inputEl1.applyStyles(style),inputEl2&&inputEl2.applyStyles(style),inputEl3&&inputEl3.applyStyles(style),me.fieldStyle=style,me.timeHField.fieldStyle=style,me.timeMField.fieldStyle=style,me.timeMField.fieldStyle=style},setReadOnly:function(readOnly){var me=this,inputEl=me.timeHField?me.timeHField.inputEl:null,inputEl1=me.timeMField?me.timeMField.inputEl:null,inputEl2=me.timeIField?me.timeIField.inputEl:null,inputEl3=me.dateField?me.dateField.inputEl:null;readOnly=!!readOnly,me[readOnly?"addCls":"removeCls"](me.readOnlyCls),me.readOnly=readOnly,inputEl?(inputEl.dom.readOnly=readOnly,me.timeHField.setReadOnly(readOnly)):me.rendering&&(me.timeHField.setReadOnlyOnBoxReady=!0),inputEl1?(inputEl1.dom.readOnly=readOnly,me.timeMField.setReadOnly(readOnly)):me.rendering&&(me.timeMField.setReadOnlyOnBoxReady=!0),inputEl2?(inputEl2.dom.readOnly=readOnly,me.timeIField.setReadOnly(readOnly)):me.rendering&&(me.timeIField.setReadOnlyOnBoxReady=!0),inputEl3?(inputEl3.dom.readOnly=readOnly,me.dateField.setReadOnly(readOnly)):me.rendering&&(me.dateField.setReadOnlyOnBoxReady=!0),me.updateLayout(),me.fireEvent("writeablechange",me,readOnly)}});
//# sourceMappingURL=DateTimeField.js.map