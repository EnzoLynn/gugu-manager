var lang_type,underIE8=!1;if(function(){if(lang_type=Ext.util.Cookies.get("ws_language")){if("0"==lang_type)return void document.write('<script type="text/javascript" src="/js/ext4/locale/ext-lang-zh_CN.js"></script>');if("1"==lang_type)return void document.write('<script type="text/javascript" src="/js/ext4/locale/ext-lang-en.js"></script>');lang_type="0",document.write('<script type="text/javascript" src="/js/ext4/locale/ext-lang-zh_CN.js"></script>')}else lang_type="0",document.write('<script type="text/javascript" src="/js/ext4/locale/ext-lang-zh_CN.js"></script>')}(),Ext.isIE&&Ext.ieVersion<8)if(window.attachEvent&&!window.opera){alert("Your IE version is unsupported, please use IE8/9.");var loadingDiv=document.getElementById("loadingDiv");loadingDiv&&document.body.removeChild(loadingDiv),document.execCommand("stop")}else{alert("Your IE version is unsupported, please use IE8/9.");var loadingDiv=document.getElementById("loadingDiv");loadingDiv&&document.body.removeChild(loadingDiv),window.stop()}
//# sourceMappingURL=locale.js.map
var login_sessiontoken=Ext.util.Cookies.get("login_sessiontoken"),login_username=Ext.util.Cookies.get("login_username"),login_password=Ext.util.Cookies.get("login_password"),login_checksavepass=Ext.util.Cookies.get("login_checksavepass");Ext.namespace("GlobalFun","GlobalFun"),Ext.namespace("StoreManager","StoreManager.GridStore"),Ext.namespace("StoreManager","StoreManager.ComboStore"),Ext.namespace("ModelManager","ModelManager.GridModel"),Ext.namespace("ModelInfoManager","ModelInfoManager.GridModelInfo"),Ext.namespace("GridManager","GridManager"),Ext.namespace("WindowManager","WindowManager"),Ext.namespace("ActionManager","ActionManager"),Ext.namespace("GlobalConfig","GlobalConfig"),Ext.namespace("DropDragControl","DropDragControl"),GlobalConfig.ViewPort="",GlobalConfig.GridPageSize=50,Ext.namespace("TreeManager","TreeManager"),GlobalConfig.DetailAutoCollapse=!1,GlobalConfig.CurrUserInfo="",GlobalConfig.Css={RemarkDisplay:"white-space:normal; word-break:break-all;",RemarkReadOnlyDisplay:"white-space:normal; word-break:break-all;readonly:true;"},GlobalConfig.HeartbeatRunner=new Ext.util.TaskRunner,GlobalConfig.newMessageBox=Ext.create("Ext.window.MessageBox",{}),GlobalConfig.Controllers={TestGrid:{create:"/data/TestGrid.json",read:"/data/TestGrid.json",update:"/data/TestGrid.json",destroy:"/data/TestGrid.json"},BuryManGrid:{read:"/LoadSysLogGrid",addBuryMan:"/BuryTombstone",updateBuryMan:"/UpdateBuryMan"},RenewManageGrid:{read:"/GetTombstoneRenewManangeLog"},JobManage:{OrderTombstone:"/OrderTombstone",BuryTombstone:"/BuryTombstone",ClearTombstone:"/ClearTombstone",GetOrderJobInfoTombstone:"/GetOrderJobInfoTombstone",GetTombstoneJobInfoLog:"/GetTombstoneJobInfoLog",EditApplicanter:"/EditApplicanter",RenewManageLimit:"/RenewManageLimit",GetTombstoneRenewManangeLog:"/GetTombstoneRenewManangeLog"},CemeteryAreaGrid:{create:"/LoadCemeteryAreaGrid",read:"/LoadCemeteryAreaGrid",update:"/LoadCemeteryAreaGrid",destroy:"/DelCemeteryArea",addCemeteryArea:"/AddCemeteryArea",updateCemeteryArea:"/UpdateCemeteryArea",delCemeteryArea:"/DelCemeteryArea"},Heartbeat:"/data/Heartbeat.json",RoleGrid:{create:"/LoadRoleGrid",read:"/LoadRoleGrid",update:"/LoadRoleGrid",destroy:"/DelRole",addRole:"/AddRole",updateRole:"/UpdateRole",delRole:"/DelRole",LoadFunctions:"/LoadFunctions"},SysLogGrid:{create:"/LoadSysLogGrid",read:"/LoadSysLogGrid",addUser:"/AddSysLog"},User:{GetCurrUserInfo:"/data/login.json",CheckUserPassword:"/CheckUserPassword",UserLoginOut:"/data/UserLoginOut.json"},UserGrid:{create:"/LoadUserGrid",read:"/LoadUserGrid",update:"/LoadUserGrid",destroy:"/DelUser",addUser:"/AddUser",updateUser:"/UpdateUser",delUser:"/DelUser"},CustomerGrid:{create:"/LoadCustomerGrid",read:"/LoadCustomerGrid",update:"/LoadCustomerGrid",destroy:"/DelCustomer",addCustomer:"/AddCustomer",updateCustomer:"/UpdateCustomer",delCustomer:"/DelCustomer",outPutExcelCustomer:"/OutPutExcelCustomer",uploadCustomerExcel:"/UploadCustomerExcel"},TombstoneGrid:{create:"/LoadTombstoneGrid",read:"/LoadTombstoneGrid",update:"/LoadTombstoneGrid",destroy:"/DelTombstone",addTombstone:"/AddTombstone",addTombstoneRowList:"/AddTombstoneRowList",updateTombstone:"/UpdateTombstone",delTombstone:"/DelTombstone",outPutExcelTombstone:"/OutPutExcelTombstone",SortTombstonePng:"/SortTombstonePng",UnBuryPeopleTombstone:"/UnBuryPeopleTombstone",BuryPeopleTombstone:"/BuryPeopleTombstone"},MainItemListTree:"/data/LoadMainItemListTree.json",ExReportListTree:"/LoadExReportListTree",BaseEnumListTree:"/LoadBaseEnumListTree",ComboStore:{LoadRoleStore:"LoadRoleStore",DepartmentStore:"LoadDepartmentStore",PaymentStatusStore:"LoadPaymentStatusStore",TombstoneTypeStore:"LoadTombstoneTypeStore",AreaStore:"/LoadAreaStore",RowStore:"/LoadRowStore",ColumnStore:"/LoadColumnStore",SecurityLevelStore:"/LoadSecurityLevelStore",ServiceLevelStore:"/LoadServiceLevelStore",CustomerTypeStore:"/LoadCustomerTypeStore",NationalityStore:"/LoadNationalityStore",CustomerStatusStore:"/LoadCustomerStatusStore"}},GlobalConfig.RegexController={regexNumber:/^\d*$/,regexNumberF:/^([-]\d*|\d*)$/,regexTelePhoneNumber:/^\d{11}$/,regexFaxNumber:/(^sip\:[0-9a-zA-Z#-_]+@[0-9a-zA-Z.-_]+$)|(^\d+-(\d|\#|\*)*$)|(^\(\d+\)(\d|\#|\*)*$)|(^\+[\d][123457890](\d*) (\d|\#|\*)+$)|(^\+[123456790][\d](\d*) (\d|\#|\*)+$)|(^\+[1] (\d|\#|\*)+$)|(^\+[7] (\d|\#|\*)+$)|(^\+[\d][6](\d+) (\d|\#|\*)+$)|(^\+(\d+)\(\d+\)(\d|\#|\*)+$)|(^(0+[1-9]\d{2,})$)|(^\d+$)/,regexFolderName:/^[^\\\/?: *"<>|]+$/,regexEmail:/^(\w|\.)+\@\w+\.\w+$/,regexTombstoneCode:/^(\d{3}|\d{5}|\d{7})$/,regexAreaCode:/^\d{3}$/,regexMoney2Fixed:/^[1-9]\d{0,8}((\.)?\d{1,2})?$/},GlobalConfig.ErrorCode={RootFolderID:0,RecycleFolderID:1073741822,PublicRootFolderID:2147483632,PublicRecycleFolderID:2147483646,DontCareFolderID:1073741823,ResOK:0,ResFullPrint:24,ResPartialOK:251658241,ResSessionTokenError:251658242,ResSessionTimeOut:251658244,ResOperationDeny:251658248,ResDBError:251658249,ResInternalError:251658256,ResParamError:251658257,ResSystemError:251658260,ResInputParamsError:251658264,ResConnectServerFailed:251658265,ResOperationNoSense:251658272,ResHasNotImplement:251658273,ConServerError:1879048187,CasLogoutCode:1879048190,ResNoUserName:251658512,ResPasswordError:251658513,LoginFail:251658514,ResUserInvalid:251658515,ResDomainLoginFailed:251658516,ResInvalidFolderID:251658288,ResFolderTypeNotMatch:251658290,ResDupFolderName:251658291,ResFolderNotEmpty:251658292,ResTooManyFolders:251658296,ResInvalidDocID:251661873,ResInvalidDocInfo:251661874,SeesionTimeOut:251661875};
//# sourceMappingURL=GlobalConfig.js.map
GlobalFun.fixedBugs=function(){if(Ext.firefoxVersion>=18){var noArgs=[];Ext.override(Ext.Base,{callParent:function(args){var method,superMethod=(method=this.callParent.caller)&&(method.$previous||(method=method.$owner?method:method.caller)&&method.$owner.superclass[method.$name]);try{if(!superMethod){method=this.callParent.caller;var parentClass,methodName;if(!method.$owner){if(!method.caller)throw new Error("Attempting to call a protected method from the public scope, which is not allowed");method=method.caller}if(parentClass=method.$owner.superclass,methodName=method.$name,!(methodName in parentClass))throw new Error("this.callParent() was called but there's no such method ("+methodName+") found in the parent class ("+(Ext.getClassName(parentClass)||"Object")+")")}}catch(e){}return superMethod.apply(this,args||noArgs)}})}Ext.isIE&&Ext.override(Ext.dd.DragDropManager,{getLocation:function(oDD){if(!this.isTypeOfDD(oDD))return null;if(oDD.getRegion)return oDD.getRegion();var pos,x1,x2,y1,y2,t,r,b,l,el=oDD.el;try{pos=Ext.Element.getXY(el)}catch(e){}return pos?(x1=pos[0],x2=x1+77,y1=pos[1],y2=y1+60,t=y1-oDD.padding[0],r=x2+oDD.padding[1],b=y2+oDD.padding[2],l=x1-oDD.padding[3],new Ext.util.Region(t,r,b,l)):null}}),Ext.ouveride,Ext.override(Ext.view.AbstractView,{onRender:function(){var me=this;me.callParent(arguments),me.loadMask&&Ext.isObject(me.store)&&me.setMaskBind(me.store)}}),GlobalConfig.newMessageBox.buttonText.yes="是",GlobalConfig.newMessageBox.buttonText.no="否",GlobalConfig.newMessageBox.buttonText.ok="确定",GlobalConfig.newMessageBox.buttonText.cancel="取消",Ext.override(Ext.window.MessageBox,{alert:function(cfg,msg,fn,scope){return Ext.isString(cfg)&&(cfg={title:cfg,msg:msg,buttons:this.OK,fn:fn,scope:scope,minWidth:this.minWidth<330?330:this.minWidth}),this.show(cfg)}}),Ext.apply(Ext.form.field.VTypes,{daterange:function(val,field){var date=field.parseDate(val);if(!date)return!1;if(!field.startDateField||field.dateRangeMax&&date.getTime()==field.dateRangeMax.getTime()){if(field.endDateField&&(!field.dateRangeMin||date.getTime()!=field.dateRangeMin.getTime())){var end=field.up("panel").down("#"+field.endDateField);end.setMinValue(date),end.validate(),field.dateRangeMin=date}}else{var start=field.up("panel").down("#"+field.startDateField);start.setMaxValue(date),start.validate(),field.dateRangeMax=date}return!0},daterangeText:"起始时间不能大于截止时间"})},GlobalFun.ReDirectUrl=function(url){var protocol=window.location.protocol,host=window.location.host;window.location.href=protocol+"//"+host+"/"+url},GlobalFun.getSeesionToken=function(){return Ext.util.Cookies.get("login_sessiontoken")},GlobalFun.setSeesionToken=function(sessiontoken,day){var myday=30;day&&(myday=day),Ext.util.Cookies.set("login_sessiontoken",sessiontoken,new Date((new Date).getTime()+864e5*myday))},GlobalFun.UpdateRecord=function(value,metaData,record,rowIndex,colIndex,store,view){return value},GlobalFun.UpdateRecordForShortDate=function(value,metaData,record,rowIndex,colIndex,store,view){var date=new Date(value.replace(/-/g,"/"));return Ext.util.Format.date(date,"Y-m-d")},GlobalFun.UpdateRecordForEntity=function(value,metaData,record,rowIndex,colIndex,store,view,disName){return value&&null!=value?disName?GlobalFun.UpdateRecord(value[disName],metaData,record):GlobalFun.UpdateRecord(value.Name,metaData,record):GlobalFun.UpdateRecord("",metaData,record)},GlobalFun.UTCtoLocal=function(dateString){var date=Ext.Date.parse(dateString+"+0000","Y-m-d H:i:sO"),m=Ext.util.Format.date(date,"Y-m-d H:i:s");return m},GlobalFun.LocalToUTCTime=function(i,endTime){var now=new Date,nowStr=Ext.util.Format.date(now,"Y-m-d"),offset=60*now.getTimezoneOffset()*1e3,resDate=new Date;if(endTime){var nowDay=Ext.Date.parse(nowStr+" 23:59:59","Y-m-d H:i:s");resDate.setTime(nowDay.getTime()+offset)}else{var nowDay=Ext.Date.parse(nowStr+" 00:00:00","Y-m-d H:i:s");resDate.setTime(nowDay.getTime()+offset-24*i*3600*1e3)}return Ext.util.Format.date(resDate,"Y-m-d H:i:s")},GridManager.BaseGridCfg=function(itemId,stateId,columns){var config={itemId:itemId,columnLines:!0,multiSelect:!0,frame:!1,stateful:stateId?!0:!1,border:!1};return stateId&&(config.stateId=stateId),columns&&(config.columns=columns),config},GlobalFun.errorProcess=function(code,swfokfun){return code==GlobalConfig.ErrorCode.LoginFail?(Ext.Msg.alert("登录失败","登录失败！无效用户名或密码",function(){swfokfun&&swfokfun()}),!0):code==GlobalConfig.ErrorCode.SeesionTimeOut?(Ext.getBody().unmask(),Ext.Msg.alert("登录信息失效","登录信息失效！请重新登录",function(){Ext.getBody().mask("请稍候..."),GlobalFun.ReDirectUrl("UserLogin")}),!0):!1},GlobalFun.isDropTarget=function(record,treeComponent){var treeSel=treeComponent.getSelectionModel().getSelection()[0];return treeSel.data.id==record.data.id?!1:-1!=treeSel.data.id.toString().indexOf("trwr")?!1:!0},GlobalFun.treeInternational=function(treeId){return"gr"==treeId?"个人":"tr"==treeId?"他人":""},GlobalFun.owerInternational=function(srcStr){return srcStr=srcStr.replace("@shoujianxiang@","收件箱").replace("@gxsjx@","共享收件箱").replace("@gr@","个人").replace("@gxwjj@","共享文件夹").replace("@gx@","共享")},GlobalFun.comboSelectFirstOrDefaultVal=function(com,defaultVal){var store=com.getStore();defaultVal?(new Ext.util.DelayedTask).delay(50,function(){com.setValue(parseInt(defaultVal))}):com.setValue(store.getRange()[0].data.Id)},GridManager.GridFilterMenuCheckItemInit=function(param){var menuCheckItem={group:param.group,text:param.text,myVal:param.myVal};return param.checked&&(menuCheckItem.checked=!0),param.firstClear?menuCheckItem.handler=function(btn,eve,suppressLoad){var panel=param.target,menu=param.componet;return menu.setText(param.text),menu.setTooltip(param.text),panel.getStore().filterMap.removeAtKey(param.filterKey),suppressLoad?void this.setChecked(suppressLoad):void panel.loadGrid()}:menuCheckItem.handler=function(btn,eve,suppressLoad){var panel=param.target,menu=param.componet;return menu.setText(param.text),menu.setTooltip(param.text),panel.getStore().filterMap.containsKey(param.filterKey)?panel.getStore().filterMap.replace(param.filterKey,param.myVal):panel.getStore().filterMap.add(param.filterKey,param.myVal),suppressLoad?void this.setChecked(suppressLoad):void panel.loadGrid()},menuCheckItem},GridManager.CreateGridFilterMenu=function(componet,store,param){componet.menu.add(GridManager.GridFilterMenuCheckItemInit({group:param.group,checked:!0,text:param.text,myVal:0,target:param.target,componet:param.componet,firstClear:!0,filterKey:param.filterKey})),store.each(function(record,index,total){componet.menu.add(GridManager.GridFilterMenuCheckItemInit({group:param.group,text:record.data.Name,myVal:record.data.Id,target:param.target,componet:param.componet,filterKey:param.filterKey}))})},GridManager.CreateGridSelectCancelMenu=function(componet,grid){componet.menu.add([{text:"全选/取消",handler:function(btn,eve,suppressLoad){var sm=grid.getSelectionModel();sm.hasSelection()?sm.deselectAll(!0):sm.selectAll(!0)}},{text:"反选",handler:function(btn,eve,suppressLoad){for(var sm=grid.getSelectionModel(),i=0;i<grid.getStore().getCount();i++)sm.isSelected(i)?sm.deselect(i,!0):sm.select(i,!0)}}])};var stopClick=!1;DropDragControl.initializePatientDragZone=function(v,window){v.dragZone=Ext.create("Ext.dd.DragZone",v.getEl(),{ddGroup:window.groupName,isTarget:!1,getDragData:function(e){var sourceEl=e.getTarget();if(sourceEl){var selCount;selCount=window.pngClass.getPngSels().getCount();var oNewNode=document.createElement("div");return oNewNode.innerHTML="<span><img src='../../Content/images/pub/docDrag.png'/>x"+selCount+"</span>",oNewNode.id=Ext.id(),v.dragData={sourceEl:sourceEl,repairXY:Ext.fly(sourceEl).getXY(),ddel:oNewNode,patientData:""}}},getRepairXY:function(){return this.dragData.repairXY},endDrag:function(){stopClick=!0,new Ext.util.DelayedTask(function(){stopClick=!1}).delay(50)},onInvalidDrop:function(target,e,id){this.beforeInvalidDrop(target,e,id),this.cachedTarget&&(this.cachedTarget.isNotifyTarget&&this.cachedTarget.notifyOut(this,e,this.dragData),this.cacheTarget=null),this.proxy.repair(this.getRepairXY(e,this.dragData),this.afterRepair,this),this.afterInvalidDrop&&this.afterInvalidDrop(e,id)}})},DropDragControl.uninitPatientDragZone=function(v){v.dragZone&&v.dragZone.destroy()},DropDragControl.uninitHospitalDropZone=function(v){v.dropZone&&v.dropZone.destroy()},DropDragControl.initializeHospitalDropZone=function(v,window){v.dropZone=Ext.create("Ext.dd.DropZone",v.el,{ddGroup:window.groupName,getTargetFromEvent:function(e){return e.getTarget(".hospital-target")},onNodeOver:function(target,dd,e,data){return Ext.dd.DropZone.prototype.dropAllowed},onNodeDrop:function(target,dd,e,data){var curImg,pngClass=window.pngClass;pngClass.getPngAllMini().each(function(item,index,allItems){return item.getEl()&&item.getEl().id==target.id?void(curImg=item):void 0});var sortNum=curImg.sortNum,insertImgs=(curImg.tombstoneId,[]),moveFrontImg=[],moveBehindImgs=[],insertCount=parseInt(sortNum),imageList=window.down("MiniPngDDSortPanel").query("image");e.getPoint()[0]-curImg.getEl().getXY()[0]<=target.offsetWidth/2?(pngClass.getPngSels().each(function(item,index,allItems){insertImgs.push(item.tombstoneId)}),Ext.Array.each(imageList,function(item,index,allItems){item.sortNum<insertCount&&(Ext.Array.contains(insertImgs,item.tombstoneId)||moveFrontImg.push(item.tombstoneId))}),Ext.Array.each(imageList,function(item,index,allItems){item.sortNum>=insertCount&&(Ext.Array.contains(insertImgs,item.tombstoneId)||moveBehindImgs.push(item.tombstoneId))})):(pngClass.getPngSels().each(function(item,index,allItems){insertImgs.push(item.tombstoneId)}),Ext.Array.each(imageList,function(item,index,allItems){item.sortNum<=insertCount&&(Ext.Array.contains(insertImgs,item.tombstoneId)||moveFrontImg.push(item.tombstoneId))}),Ext.Array.each(imageList,function(item,index,allItems){item.sortNum>insertCount&&(Ext.Array.contains(insertImgs,item.tombstoneId)||moveBehindImgs.push(item.tombstoneId))}));var tombstoneIdList=moveFrontImg.concat(insertImgs,moveBehindImgs),param={};return param.tombstoneIdList=tombstoneIdList.join(),param.sessiontoken=Ext.util.Cookies.get("sessiontoken"),WsCall.call(GlobalConfig.Controllers.TombstoneGrid.SortTombstonePng,"SortTombstonePng",param,function(response,opts){var area=window.down("#AreaIdItemId"),row=window.down("#RowIdItemId");if(area.isValid()&&row.isValid()){pngClass.setAreaId(area.getValue()),pngClass.setRowId(row.getValue());var miniPngDDSortPanel=window.down("MiniPngDDSortPanel");miniPngDDSortPanel.removeAll(),pngClass.initPngPanel(miniPngDDSortPanel)}},function(response,opts){GlobalFun.errorProcess(response.code)||Ext.Msg.alert("失败",response.msg)},!0,"请稍候...",window.el),!0}})},GlobalFun.SetGridTitle=function(cardPanel,store,title){store.filterMap.getCount()>0||store.getProxy().extraParams.DateFilter?cardPanel.setTitle("查找结果 { "+title+" }"):cardPanel.setTitle(""+title)},GlobalFun.TreeSelChangeGrid=function(activeNum,gridPanel,title,isDfGrid){var cardPanel=GlobalConfig.ViewPort.down("#centerGridDisplayContainer");return cardPanel.getLayout().setActiveItem(activeNum),isDfGrid?void cardPanel.setTitle(""+title):(gridPanel.FirstLoad?GlobalFun.SetGridTitle(cardPanel,gridPanel.getStore(),title):(gridPanel.loadGrid(),gridPanel.FirstLoad=!0),void gridPanel.fireEvent("selectionchange",gridPanel.getView(),gridPanel.getSelectionModel().getSelection()))},GlobalFun.ValidDateStartEnd=function(dateStarField,dateEndField){var sVal=dateStarField.getValue(),eVal=dateEndField.getValue();sVal&&!eVal?(dateEndField.allowBlank=!1,dateEndField.blankText="日期区间必须完整"):eVal&&!sVal?(dateStarField.allowBlank=!1,dateStarField.blankText="日期区间必须完整"):(dateEndField.allowBlank=!0,dateStarField.allowBlank=!0)},GlobalFun.onCheckChange=function(cmp,checked){var fieldset=cmp.up("fieldset");if(!fieldset.fistCheck){var cblist=fieldset.query("checkbox");Ext.Array.each(cblist,function(item){item.setValue(checked)})}},GlobalFun.createCheckboxCmp=function(){var me=this,suffix="-checkbox";return me.checkboxCmp=Ext.widget({xtype:"checkbox",hideEmptyLabel:!0,name:me.checkboxName||me.id+suffix,cls:me.baseCls+"-header"+suffix,itemId:me.myItemId,id:me.id+"-legendChk",listeners:{change:me.onCheckChange,scope:me}}),me.checkboxCmp},GlobalFun.Heartbeat=function(){new Ext.util.DelayedTask(function(){GlobalConfig.HeartbeatRunner.stopAll(),GlobalConfig.HeartbeatRunner.start({run:function(){var param={sessiontoken:GlobalFun.getSeesionToken()};WsCall.call(GlobalConfig.Controllers.Heartbeat,"Heartbeat",param,function(response,opts){},function(response,opts){},!1)},interval:6e5})}).delay(50)},GlobalFun.IsAllowFun=function(funName){var flag=!1;return flag=!0},GlobalFun.GridSearchInitFun=function(keyName,isDel,store,value){isDel?store.filterMap.removeAtKey(keyName):store.filterMap.containsKey(keyName)?store.filterMap.replace(keyName,value):store.filterMap.add(keyName,value)},GlobalFun.GetTomestoneImageSrc=function(state,tombstoneId,typeId){var imgaeName="alone";return 2==typeId?imgaeName="double":3==typeId&&(imgaeName="specil"),imgaeName+=1==state?"-empty":2==state?"-order":3==state?"-sale":4==state?"-zbury1":5==state?2==typeId?"-zbury3":"-zbury":"-empty","../../Content/images/tombstone/gif/"+imgaeName+".gif?currpage="+tombstoneId+"&randomTime="+(new Date).getTime()},GlobalFun.RefreshDetailCollapseState=function(){if(GlobalConfig.DetailAutoCollapse){var detailPanel=GlobalConfig.ViewPort.down("#centerGridDetailContainer");detailPanel.expand(),GlobalConfig.DetailAutoCollapse=!1}},GlobalFun.DetailCollapse=function(){var detailPanel=GlobalConfig.ViewPort.down("#centerGridDetailContainer");detailPanel.collapsed||(detailPanel.collapse(),GlobalConfig.DetailAutoCollapse=!0)};
//# sourceMappingURL=GlobalFun.js.map
Ext.define("chl.grid.BaseGrid",{alternateClassName:["BaseGrid"],alias:"widget.BaseGrid",extend:"Ext.grid.Panel",columnLines:!0,multiSelect:!0,features:[{ftype:"grouping",groupHeaderTpl:"{columnName}: {name} ({rows.length})项",disabled:!0,groupByText:"按当前列分组",showGroupsText:"显示分组"}],viewConfig:{loadingText:"<b>正在加载数据...</b>"},initComponent:function(){var me=this;me.on({itemclick:function(grid,record,hitem,index,e,opts){if(!e.ctrlKey&&!e.shiftKey){var sm=grid.getSelectionModel();sm.deselectAll(!0),sm.select(record,!0,!1)}},beforeitemmousedown:function(view,record,item,index,e,options){if(2==e.button){var sm=view.getSelectionModel();if(sm.hasSelection()){var sels=sm.getSelection();Ext.Array.contains(sels,record)||(sm.deselectAll(!0),sm.select(record,!0,!1))}else sm.select(record,!0,!1);return!1}return!0}}),me.callParent(arguments)}});
//# sourceMappingURL=BaseGrid.js.map
Ext.define("chl.tree.BaseTree",{alias:"widget.BaseTree",extend:"Ext.tree.Panel",clearOnLoad:!1,alternateClassName:["BaseTree"],ddGroup:"FileDDGp",animate:!1,rootVisible:!1,frame:!1,frameHeader:!1,border:!1,initComponent:function(){var me=this;me.on({load:function(store,records,models,suc,opts){!models||models.length<=0||Ext.Array.each(models,function(item,index,alls){var interStr=GlobalFun.treeInternational(item.data.id);""!=interStr?item.data.text=interStr:item.data.text=GlobalFun.owerInternational(item.data.text)})},render:function(){}}),me.callParent(arguments)}});
//# sourceMappingURL=BaseTree.js.map
Ext.define("chl.toolbar.Pagingtoolbar",{alias:"widget.Pagingtoolbar",extend:"Ext.toolbar.Paging",dock:"bottom",displayInfo:!0,emptyMsg:"没有记录",beforePageText:"页数",afterPageText:"共 {0}",refreshText:"刷新当前页",firstText:"首页",lastText:"末页",nextText:"下页",prevText:"前页",layout:{overflowHandler:"Menu"},initComponent:function(){var me=this;me.callParent(arguments),me.on("render",function(){me.down("#refresh").hide()})}});
//# sourceMappingURL=Pagingtoolbar.js.map
Ext.define("WS.action.Base",{extend:"Ext.Action",alternateClassName:["ActionBase"],config:{targetView:null,category:""},getTargetView:function(){var me=this;return me.tgtView?"function"==typeof me.tgtView?me.tgtView():me.tgtView:null},setTargetView:function(tgtView){var me=this;me.tgtView=tgtView},statics:{actions:[],setTargetView:function(category,view){Ext.Array.each(ActionBase.actions,function(act,index){return act.category==category&&act.setTargetView(view),!0})},setWidth:function(category,width){Ext.Array.each(ActionBase.actions,function(act,index){return act.category==category&&act.setWidth(width),!0})},updateActions:function(category){var prms=arguments;Ext.Array.each(ActionBase.actions,function(act,index){return act.category==category&&act.updateStatus&&act.updateStatus(prms[1],prms[2],prms[3],prms[4],prms[5],prms[6]),!0})},getAction:function(itemId){var res;return Ext.Array.each(ActionBase.actions,function(act,index){return act.itemId==itemId?(res=act,!1):!0}),res}},setChecked:function(v){this.callEach("setChecked",[v])},setWidth:function(v){this.callEach("setWidth",[v])},constructor:function(config){config.scope=this,this.callParent([config]),config.updateStatus&&(this.updateStatus=config.updateStatus),WS.action.Base.actions.push(this)}});
//# sourceMappingURL=Base.js.map
Ext.define("WS.lib.WsCall",{alternateClassName:["WsCall"]});var constErrRes={success:!1,code:-1,msg:"response failed"};WsCall.addStatics({call:function(url,fname,param,successCall,failureCall,showLoadMask,loadMsg,maskEl,maskDelay,async){param.req="call",param.callname=fname;var isAsync=0==async?async:!0,doslm="undefined"==typeof showLoadMask||null===showLoadMask||1==showLoadMask;if(doslm){var callMask,taskWait=new Ext.util.DelayedTask(function(){loadMsg?(callMask=maskEl?maskEl:Ext.getBody(),callMask.mask(loadMsg)):(callMask=maskEl?maskEl:Ext.getBody(),callMask.mask("请稍候..."))});taskWait.delay(maskDelay?maskDelay:100)}Ext.Ajax.request({url:url,method:"GET",timeout:3e4,async:isAsync,success:function(response,opts){if(taskWait&&taskWait.cancel(),"undefined"!=typeof callMask&&null!==callMask&&callMask.unmask(),response.responseText.length>0&&"null"!=response.responseText){var res=Ext.JSON.decode(response.responseText);1==res.success?successCall(res,response,opts):failureCall(res,response,opts)}else constErrRes.msg="response failed (call:"+fname+");"+response.responseText,failureCall(constErrRes,response,opts)},failure:function(response,opts){taskWait&&taskWait.cancel(),"undefined"!=typeof callMask&&null!==callMask&&callMask.unmask(),constErrRes.msg="response failed(ajax) (call:"+fname+")",failureCall(constErrRes,response,opts)},headers:{AJaxCall:"true"},params:param})},downloadFile:function(url,rcName,param){var me=this,sParam=Ext.Object.toQueryString(param);sParam.length>0&&(sParam="&"+sParam);var url=url+"?req=rc&rcname="+rcName+sParam;if("undefined"==typeof me.iframe){var iframe=document.createElement("iframe");me.iframe=iframe,document.body.appendChild(me.iframe)}me.iframe.src=url,me.iframe.style.display="none"},callchain:function(callname){var host=window.location.host,name=userInfoData.accountName,iframe=document.getElementById("callchain");iframe&&document.body.removeChild(iframe),iframe=document.createElement("script"),iframe.id="callchain",iframe.attachEvent?iframe.onreadystatechange=function(){"loaded"==this.readyState}:(iframe.onload=function(){},iframe.onerror=function(){});var ranid=Ext.id()+(new Date).getTime();iframe.src="http://"+localPt.ip+":"+localPt.port+"/ifram.html?call="+callname+"&hosturl="+host+"&sessiontoken="+sessionToken+"&username="+name+"&ranid="+ranid+"@",document.body.appendChild(iframe)},scoutlogin:function(callname,fileid,callback){var href=window.location.href,name=userInfoData.accountName,iframe=document.getElementById("scoutlogin");iframe&&document.body.removeChild(iframe),iframe=document.createElement("script"),iframe.id="scoutlogin",iframe.attachEvent?iframe.onreadystatechange=function(){"loaded"==this.readyState&&callback&&(new Ext.util.DelayedTask).delay(50,function(){callback()})}:(iframe.onload=function(){callback&&(new Ext.util.DelayedTask).delay(500,function(){callback()})},iframe.onerror=function(){callback&&(new Ext.util.DelayedTask).delay(500,function(){callback()})});var fid="";fileid&&(fid=fileid);var ranid=Ext.id()+(new Date).getTime();iframe.src="http://"+scoutLogin.ip+":"+scoutLogin.port+"/ifram1.html?call="+callname+"&fileid="+fid+"&hrefurl="+href+"&sessiontoken="+sessionToken+"&username="+name+"&ranid="+ranid+"@",document.body.appendChild(iframe)},callOtherDomain:function(absPath,fileId,winType){var iframe=(encodeURI(absPath),document.getElementById("otherDomain"));iframe&&document.body.removeChild(iframe);var fid=fileId,param={};param.sessiontoken=sessionToken,WsCall.call("getjsessionid",param,function(response,opts){function afterifload(){var param={};param.sessiontoken=sessionToken,WsCall.call("getiframemsg",param,function(response,opts){Ext.getBody().unmask();var data=response.data;iframeFileUp(data,winType)},function(response,opts){var fpa=winType.down("#filePath");fpa&&fpa.reset(),Ext.getBody().unmask(),1862271269!=response.code&&(errorProcess(response.code)||Ext.Msg.alert("失败",response.msg))},!1)}var jsid=response.data;Ext.getBody().mask("正在使用本地打印机,请稍候..."),iframe=document.createElement("script"),iframe.id="otherDomain",iframe.attachEvent?iframe.onreadystatechange=function(){"loaded"==this.readyState&&afterifload()}:(iframe.onload=function(){afterifload()},iframe.onerror=function(){afterifload()});var host=window.location.host,ranid=Ext.id()+(new Date).getTime(),isdoc=!1;"docwin"==winType.pngGroup&&(isdoc=!0),iframe.src="http://"+localPt.ip+":"+localPt.port+"/ifram.html?call=file&localurl="+host+"&isdoc="+isdoc+"&pttype="+userConfig.prType+"&sessiontoken="+sessionToken+"&jsid="+jsid+"&fileid="+fid+"&ranid="+ranid+"@",document.body.appendChild(iframe)},function(response,opts){errorProcess(response.code)||Ext.Msg.alert("失败",response.msg)},!0,"",Ext.getBody(),10)}}),Ext.define("html5uploadclass",{config:{xhr:null,fisrtLoad:!0,file:null,formName:"",files:null,msgidArr:[],index:1,length:0,url:"",html5UploadInint:function(files,url,formName,eventFuns){var me=this;1==me.index&&(me.length=files.length),me.files=files,me.file=files[me.index-1],me.formName=formName,me.xhr=new XMLHttpRequest,eventFuns&&(me.xhr.upload.addEventListener("progress",eventFuns.uploadProgress,!1),me.xhr.addEventListener("load",eventFuns.uploadComplete,!1),me.xhr.addEventListener("error",eventFuns.uploadFailed,!1),me.xhr.addEventListener("abort",eventFuns.uploadCanceled,!1)),me.url=url},uploadStart:function(){var me=this,fd=new FormData;fd.append(me.formName,me.file),me.xhr.open("POST",me.url),me.xhr.send(fd)}},constructor:function(cfg){this.initConfig(cfg),this.xhr=null,this.fisrtLoad=!0,this.file=null,this.files=null,this.msgidArr=[],this.index=1,this.length=0,this.url=""}});
//# sourceMappingURL=WsCall_base.js.map
Ext.define("WS.lib.SearchField",{extend:"Ext.form.field.Trigger",alias:"widget.searchfield",trigger1Cls:Ext.baseCSSPrefix+"form-clear-trigger",trigger2Cls:Ext.baseCSSPrefix+"form-search-trigger",hasSearch:!1,paramName:"FullName",paramObject:!1,paramNameArr:[],initComponent:function(){var me=this;me.callParent(arguments),me.on("specialkey",function(f,e){e.getKey()==e.ENTER&&this.onTrigger2Click()},me)},boxready:function(){var me=this;me.callParent(),me.triggerEl.item(0).up("td").setWidth(0),me.triggerEl.item(0).setDisplayed("none")},onTrigger1Click:function(){var me=this,store=me.store,proxy=store.getProxy();me.hasSearch&&(me.setValue(""),proxy.extraParams.filter=Ext.JSON.decode(proxy.extraParams.filter),me.paramObject?Ext.Array.each(me.paramNameArr,function(key){delete proxy.extraParams.filter[key],store.filterMap.removeAtKey(key)}):(delete proxy.extraParams.filter[me.paramName],store.filterMap.removeAtKey(me.paramName)),proxy.extraParams.filter=Ext.JSON.encode(proxy.extraParams.filter),proxy.extraParams.start=0,proxy.extraParams.refresh=1,store.load(),proxy.extraParams.refresh=null,me.hasSearch=!1,me.triggerEl.item(0).up("td").setWidth(0),me.triggerEl.item(0).setDisplayed("none"),me.doComponentLayout())},onTrigger2Click:function(){var me=this,store=me.store,proxy=store.getProxy(),value=me.getValue();return value.length<1?void me.onTrigger1Click():(me.isValid()&&(proxy.extraParams.filter=Ext.JSON.decode(proxy.extraParams.filter),me.paramObject?Ext.Array.each(me.paramNameArr,function(key){var tempObj={};tempObj[me.paramName]=value,proxy.extraParams.filter[key]=tempObj,store.filterMap.containsKey(key)?store.filterMap.replace(key,tempObj):store.filterMap.add(key,tempObj)}):(proxy.extraParams.filter[me.paramName]=value,store.filterMap.containsKey(me.paramName)?store.filterMap.replace(me.paramName,value):store.filterMap.add(me.paramName,value)),proxy.extraParams.filter=Ext.JSON.encode(proxy.extraParams.filter),proxy.extraParams.start=0,proxy.extraParams.refresh=1,store.load(),proxy.extraParams.refresh=null),me.hasSearch=!0,me.triggerEl.item(0).up("td").setWidth(17),me.triggerEl.item(0).setDisplayed("block"),void me.doComponentLayout())}});
//# sourceMappingURL=SearchField.js.map
Ext.define("Ext.ux.form.field.DateTime",{extend:"Ext.form.FieldContainer",mixins:{field:"Ext.form.field.Field"},alias:"widget.datetimefield",layout:"hbox",width:200,height:22,combineErrors:!0,mySqlType:"time",tmpcId:"",doSearch:!1,dateCfg:{},timeHCfg:{},timeMCfg:{},timeICfg:{},initComponent:function(){var me=this;me.buildField(),me.callParent(),this.dateField=this.down("datefield"),this.timeHField=this.down("#sendTimeHouer"+this.tmpcId),this.timeMField=this.down("#sendTimeMin"+this.tmpcId),this.timeIField=this.down("#sendTimeSec"+this.tmpcId),me.initField()},buildField:function(){var me=this;if(me.items=[],("date"==me.mySqlType||"datetime"==me.mySqlType)&&me.items.push(Ext.apply({xtype:"datefield",itemId:"sendDate"+me.tmpcId,name:"sendDate"+me.tmpcId,format:"Y-m-d",width:90,submitValue:!1,blankText:"日期不能为空",allowBlank:!1},me.dateCfg)),("time"==me.mySqlType||"datetime"==me.mySqlType)&&me.items.push(Ext.apply({itemId:"sendTimeHouer"+me.tmpcId,name:"sendTimeHouer"+me.tmpcId,xtype:"numberfield",maxText:"时最大为23",minText:"时最小为0",submitValue:!1,allowDecimals:!1,width:40,minValue:0,maxValue:23,blankText:"不能为空",allowBlank:!1},me.timeHCfg),Ext.apply({itemId:"sendTimeMin"+me.tmpcId,name:"sendTimeMin"+me.tmpcId,xtype:"numberfield",maxText:"分最大为59",minText:"分最小为0",submitValue:!1,allowDecimals:!1,width:40,minValue:0,maxValue:59,blankText:"不能为空",allowBlank:!1},me.timeMCfg),Ext.apply({itemId:"sendTimeSec"+me.tmpcId,name:"sendTimeSec"+me.tmpcId,xtype:"numberfield",maxText:"秒最大为59",minText:"秒最小为0",submitValue:!1,allowDecimals:!1,width:40,minValue:0,maxValue:59,blankText:"不能为空",allowBlank:!1},me.timeICfg)),me.doSearch){var serTmp=Ext.clone(me.items);"date"==me.mySqlType?me.items.push({margin:"0 0 0 5",xtype:"displayfield",width:20,value:"--"}):me.items.push({margin:"0 0 0 5",xtype:"displayfield",width:20,value:"--"}),Ext.Array.each(serTmp,function(item,index,alls){("numberfield"==item.xtype||"datefield"==item.xtype)&&(item.name="end_"+item.name,item.itemId="end_"+item.itemId),"hidden"==item.xtype&&(item.name="end_"+item.name,item.myXtype="end_"+item.myXtype,item.itemId="end_"+item.itemId,item.submitValue=!1),me.items.push(item)})}},getValue:function(){var me=this,strTime="";if("date"==me.mySqlType){var strTime=Ext.util.Format.date(me.down("#sendDate"+me.tmpcId).getValue(),"Y-m-d");if(me.doSearch){var endTime=Ext.util.Format.date(me.down("#end_sendDate"+me.tmpcId).getValue(),"Y-m-d");strTime+=","+endTime}return strTime}if("datetime"==me.mySqlType){var strTime=Ext.util.Format.date(me.down("#sendDate"+me.tmpcId).getValue(),"Y-m-d"),tmpH=me.down("#sendTimeHouer"+me.tmpcId).getValue();tmpH=10>tmpH?"0"+tmpH:tmpH;var tmpM=me.down("#sendTimeMin"+me.tmpcId).getValue();tmpM=10>tmpM?"0"+tmpM:tmpM;var tmpS=me.down("#sendTimeSec"+me.tmpcId).getValue();if(tmpS=10>tmpS?"0"+tmpS:tmpS,strTime+=" "+tmpH+":"+tmpM+":"+tmpS,me.doSearch){var endTime=Ext.util.Format.date(me.down("#end_sendDate"+me.tmpcId).getValue(),"Y-m-d"),tmpH1=me.down("#end_sendTimeHouer"+me.tmpcId).getValue(),tmpM1=me.down("#end_sendTimeMin"+me.tmpcId).getValue(),tmpS1=me.down("#end_sendTimeSec"+me.tmpcId).getValue();tmpH1=10>tmpH1?"0"+tmpH1:tmpH1,tmpM1=10>tmpM1?"0"+tmpM1:tmpM1,tmpS1=10>tmpS1?"0"+tmpS1:tmpS1,endTime+=" "+tmpH1+":"+tmpM1+":"+tmpS1,strTime+=","+endTime}return strTime}if("time"==me.mySqlType){var tmpH=me.down("#sendTimeHouer"+me.tmpcId).getValue();tmpH=10>tmpH?"0"+tmpH:tmpH;var tmpM=me.down("#sendTimeMin"+me.tmpcId).getValue();tmpM=10>tmpM?"0"+tmpM:tmpM;var tmpS=me.down("#sendTimeSec"+me.tmpcId).getValue();tmpS=10>tmpS?"0"+tmpS:tmpS;var strTime=tmpH+":"+tmpM+":"+tmpS;if(me.doSearch){var tmpH1=me.down("#end_sendTimeHouer"+me.tmpcId).getValue(),tmpM1=me.down("#end_sendTimeMin"+me.tmpcId).getValue(),tmpS1=me.down("#end_sendTimeSec"+me.tmpcId).getValue();tmpH1=10>tmpH1?"0"+tmpH1:tmpH1,tmpM1=10>tmpM1?"0"+tmpM1:tmpM1,tmpS1=10>tmpS1?"0"+tmpS1:tmpS1;var endTime=tmpH1+":"+tmpM1+":"+tmpS1;strTime+=","+endTime}return strTime}return null},setValue:function(value,useval){var me=this;if(("date"==me.mySqlType||"datetime"==me.mySqlType)&&me.dateField.setValue(me.dateCfg.value?me.dateCfg.value:Ext.util.Format.date(new Date,"Y-m-d")),("time"==me.mySqlType||"datetime"==me.mySqlType)&&(me.timeHField.setValue(me.timeHCfg.value?me.timeHCfg.value:0),me.timeMField.setValue(me.timeMCfg.value?me.timeMCfg.value:0),me.timeIField.setValue(me.timeICfg.value?me.timeICfg.value:0),useval)){var date,timeH=value.split(":")[0],timeM=value.split(":")[1],timeI=value.split(":")[2];"datetime"==me.mySqlType&&(date=value.split("T")[0]),date&&(date=timeH.split("T")[0],timeH=timeH.split("T")[1],me.dateField.setValue(date)),me.timeHField.setValue(timeH),me.timeMField.setValue(timeM),me.timeIField.setValue(timeI)}},isFileUpload:function(){return"file"===this.inputType},getSubmitData:function(){var me=this,value=me.getValue(),name=me.name,data={};if(!me.disabled&&me.submitValue&&!me.isFileUpload()){if(value&&"datetime"==me.mySqlType){var re=/\s/g;value=value.replace(re,"T")}return data[""+name]=value,value&&name?data:null}},setFieldStyle:function(style){var me=this,inputEl=me.timeHField?me.timeHField.inputEl:null,inputEl1=me.timeMField?me.timeMField.inputEl:null,inputEl2=me.timeIField?me.timeIField.inputEl:null,inputEl3=me.dateField?me.dateField.inputEl:null;inputEl&&inputEl.applyStyles(style),inputEl1&&inputEl1.applyStyles(style),inputEl2&&inputEl2.applyStyles(style),inputEl3&&inputEl3.applyStyles(style),me.fieldStyle=style,me.timeHField.fieldStyle=style,me.timeMField.fieldStyle=style,me.timeMField.fieldStyle=style},setReadOnly:function(readOnly){var me=this,inputEl=me.timeHField?me.timeHField.inputEl:null,inputEl1=me.timeMField?me.timeMField.inputEl:null,inputEl2=me.timeIField?me.timeIField.inputEl:null,inputEl3=me.dateField?me.dateField.inputEl:null;readOnly=!!readOnly,me[readOnly?"addCls":"removeCls"](me.readOnlyCls),me.readOnly=readOnly,inputEl?(inputEl.dom.readOnly=readOnly,me.timeHField.setReadOnly(readOnly)):me.rendering&&(me.timeHField.setReadOnlyOnBoxReady=!0),inputEl1?(inputEl1.dom.readOnly=readOnly,me.timeMField.setReadOnly(readOnly)):me.rendering&&(me.timeMField.setReadOnlyOnBoxReady=!0),inputEl2?(inputEl2.dom.readOnly=readOnly,me.timeIField.setReadOnly(readOnly)):me.rendering&&(me.timeIField.setReadOnlyOnBoxReady=!0),inputEl3?(inputEl3.dom.readOnly=readOnly,me.dateField.setReadOnly(readOnly)):me.rendering&&(me.dateField.setReadOnlyOnBoxReady=!0),me.updateLayout(),me.fireEvent("writeablechange",me,readOnly)}});
//# sourceMappingURL=DateTimeField.js.map
Ext.define("Ext.ux.CheckColumn",{extend:"Ext.grid.column.Column",alias:"widget.checkcolumn",constructor:function(){this.addEvents(),this.callParent(arguments)},processEvent:function(type,view,cell,recordIndex,cellIndex,e){if("mousedown"==type||"keydown"==type&&(e.getKey()==e.ENTER||e.getKey()==e.SPACE)){var record=view.panel.store.getAt(recordIndex),dataIndex=this.dataIndex,checked=!record.get(dataIndex);return record.set(dataIndex,checked),record.commit(),this.fireEvent("checkchange",this,recordIndex,checked),!1}return this.callParent(arguments)},renderer:function(value){var cssPrefix=Ext.baseCSSPrefix,cls=[cssPrefix+"grid-checkheader"];return value&&cls.push(cssPrefix+"grid-checkheader-checked"),'<div class="'+cls.join(" ")+'">&#160;</div>'}});
//# sourceMappingURL=checkcol.js.map
function getContentByNType(ntype,data,bodyFields){var reStr="";if(0==ntype){reStr="你有一封新传真<br/>";for(var i=0;i<bodyFields.length;i++)"param2"!=bodyFields[i]?"param3"==bodyFields[i]&&(reStr+="传真位置:"+owerInternational(data[bodyFields[i]])):reStr+="发件人:"+data[bodyFields[i]]+"<br/>";return reStr}if(1==ntype)return reStr;if(2==ntype){reStr="你有一条新短信<br/>";for(var i=0;i<bodyFields.length;i++)"param2"!=bodyFields[i]?"param3"==bodyFields[i]&&(reStr+="短信位置:"+owerInternational(data[bodyFields[i]])):reStr+="发件人:"+data[bodyFields[i]]+"<br/>";return reStr}if(3==ntype){reStr="传真发送成功<br/>";for(var i=0;i<bodyFields.length;i++)"param2"!=bodyFields[i]?"param3"==bodyFields[i]&&(reStr+="主题:"+data[bodyFields[i]]):reStr+="收件人:"+data[bodyFields[i]]+"<br/>";return reStr}if(4==ntype){reStr="传真发送失败<br/>";for(var i=0;i<bodyFields.length;i++)"param2"!=bodyFields[i]?"param3"==bodyFields[i]&&(reStr+="主题:"+data[bodyFields[i]]):reStr+="收件人:"+data[bodyFields[i]]+"<br/>";return reStr}if(5==ntype){reStr="短信发送成功<br/>";for(var i=0;i<bodyFields.length;i++)if("param2"!=bodyFields[i])"param3"==bodyFields[i]&&(reStr+="主题:"+data[bodyFields[i]]);else{var myparam2=data[bodyFields[i]];-1==myparam2.indexOf("#")?reStr+="短信条数:"+myparam2+"<br/>":(myparam2=myparam2.substring(1,myparam2.length),reStr+="收件人:"+myparam2+"<br/>")}return reStr}if(6==ntype){reStr="短信发送失败<br/>";for(var i=0;i<bodyFields.length;i++)if("param2"!=bodyFields[i])"param3"==bodyFields[i]&&(reStr+="主题:"+data[bodyFields[i]]);else{var myparam2=data[bodyFields[i]];-1==myparam2.indexOf("#")?reStr+="短信条数:"+myparam2+"<br/>":(myparam2=myparam2.substring(1,myparam2.length),reStr+="收件人:"+myparam2+"<br/>")}return reStr}if(7==ntype){reStr="有新文档等待你的审批<br/>";for(var i=0;i<bodyFields.length;i++)"param2"!=bodyFields[i]||(reStr+="提交人:"+data[bodyFields[i]]+"<br/>");return reStr}if(8==ntype){reStr="通过审批<br/>";for(var i=0;i<bodyFields.length;i++)"param2"!=bodyFields[i]?"param3"==bodyFields[i]&&(reStr+="结束时间:"+data[bodyFields[i]]):reStr+="任务ID:"+data[bodyFields[i]]+"<br/>";return reStr}if(9==ntype){reStr="未通过审批<br/>";for(var i=0;i<bodyFields.length;i++)"param2"!=bodyFields[i]?"param3"==bodyFields[i]&&(reStr+="结束时间:"+data[bodyFields[i]]):reStr+="任务ID:"+data[bodyFields[i]]+"<br/>";return reStr}if(10==ntype){for(var i=0;i<bodyFields.length;i++)"param2"!=bodyFields[i]||(reStr+=""+data[bodyFields[i]]+"<br/>");return reStr}if(11==ntype){for(var i=0;i<bodyFields.length;i++)if("param3"!=bodyFields[i]);else{var msgSt="";if(0!=data[bodyFields[i]]){var wrStr="";(1&data[bodyFields[i]])>0&&(wrStr+="接收传真,"),(64&data[bodyFields[i]])>0&&(wrStr+="工作流审批,"),(32&data[bodyFields[i]])>0&&(wrStr+="管理员,"),wrStr=wrStr.substring(0,wrStr.length-1),msgSt="赋予您的职责是:"+wrStr}else msgSt="已经收回委任给你的职责";reStr+=""+msgSt+"<br/>"}return reStr}}Ext.define("Ext.ux.PreviewPlugin",{extend:"Ext.AbstractPlugin",alias:"plugin.preview",requires:["Ext.grid.feature.RowBody","Ext.grid.feature.RowWrap"],hideBodyCls:"x-grid-row-body-hidden",bodyField:"",bodyFields:[],previewExpanded:!0,constructor:function(config){this.callParent(arguments);var bodyField=this.bodyField,bodyFields=this.bodyFields,hideBodyCls=this.hideBodyCls,section=this.getCmp(),features=[{ftype:"rowbody",getAdditionalData:function(data,idx,record,orig,view){var o=Ext.grid.feature.RowBody.prototype.getAdditionalData.apply(this,arguments),type=data[bodyField],rowBodyStr=getContentByNType(type,data,bodyFields);return Ext.apply(o,{rowBody:rowBodyStr,rowBodyCls:section.previewExpanded?"":hideBodyCls}),o}},{ftype:"rowwrap"}];section.previewExpanded=this.previewExpanded,section.features||(section.features=[]),section.features=features.concat(section.features)},toggleExpanded:function(expanded){var view=this.getCmp();this.previewExpanded=view.previewExpanded=expanded,view.refresh()}});
//# sourceMappingURL=GridPreviewPlugin.js.map
var mykeycodeConvert={32:" ",48:"0","48s":")",49:"1","49s":"!",50:"2","50s":"@",51:"3","51s":"#",52:"4","52s":"$",53:"5","53s":"%",54:"6","54s":"^",55:"7","55s":"&",56:"8","56s":"*",57:"9","57s":"(",65:"a","65s":"A",66:"b","66s":"B",67:"c","67s":"C",68:"d","68s":"D",69:"e","69s":"E",70:"f","70s":"F",71:"g","71s":"G",72:"h","72s":"H",73:"i","73s":"I",74:"j","74s":"J",75:"k","75s":"K",76:"l","76s":"L",77:"m","77s":"M",78:"n","78s":"N",79:"o","79s":"O",80:"p","80s":"P",81:"q","81s":"Q",82:"r","82s":"R",83:"s","83s":"S",84:"t","84s":"T",85:"u","85s":"U",86:"v","86s":"V",87:"w","87s":"W",88:"x","88s":"X",89:"y","89s":"Y",90:"z","90s":"Z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",186:";","186s":":",187:"=","187s":"+",188:",","188s":"<",189:"-","189s":"_",190:".","190s":">",191:"/","191s":"?",192:"`","192s":"~",219:"[","219s":"{",220:"\\","220s":"|",221:"]","221s":"}",222:"'","222s":'"'};Ext.define("Ext.ux.form.field.MyPasswordField",{extend:"Ext.form.field.Text",alias:"widget.MyPasswordField",keyCodeArr:[],replaceChar:"●",onKeyDown:function(e){var me=this,keycode=e.getKey();if(e.ctrlKey)keycode!=e.BACKSPACE&&(me.keyCodeArr=[]);else if(32==keycode||keycode>=65&&90>=keycode||keycode>=48&&57>=keycode||keycode>=96&&107>=keycode||keycode>=109&&111>=keycode||keycode>=186&&192>=keycode||keycode>=219&&222>=keycode||keycode==e.BACKSPACE){var selectedText;window.getSelection?selectedText=window.getSelection():document.selection&&(selectedText=document.selection.createRange().text);var length=selectedText.toString().length;if(keycode!=e.BACKSPACE)length&&length>0&&(me.keyCodeArr=[]),keycode>=65&&90>=keycode||keycode>=48&&57>=keycode||keycode>=186&&192>=keycode||keycode>=219&&222>=keycode?e.shiftKey?me.keyCodeArr.push(mykeycodeConvert[keycode+"s"]):me.keyCodeArr.push(mykeycodeConvert[keycode]):(32==keycode||keycode>=96&&107>=keycode||keycode>=109&&111>=keycode)&&me.keyCodeArr.push(mykeycodeConvert[keycode]);else if(length&&length>0)for(var i=0;length>i;i++)me.keyCodeArr.pop();else me.keyCodeArr.pop();for(var strVal="",i=0;i<me.keyCodeArr.length;i++)strVal+=me.replaceChar;me.setValue(strVal,!0),e.stopEvent()}this.fireEvent("keydown",this,e)},onKeyUp:function(e){this.fireEvent("keyup",this,e)},onKeyPress:function(e){this.fireEvent("keypress",this,e)},initComponent:function(){var me=this;me.keyCodeArr=[],me.callParent()},getValue:function(){for(var me=this,val=me.rawToValue(me.processRawValue(me.getRawValue())),strVal="",i=0;i<me.keyCodeArr.length;i++)strVal+=me.replaceChar;return me.value=strVal,val},rawToValue:function(rawValue){return rawValue},processRawValue:function(value){return value},getRawValue:function(){var me=this,v=me.keyCodeArr.join("");return me.rawValue=v,v},setRawValue:function(value){var me=this;return value=Ext.value(me.transformRawValue(value),""),me.rawValue=value,me.inputEl&&(me.inputEl.dom.value=value),value},transformRawValue:function(value){return value},valueToRaw:function(value){return""+Ext.value(value,"")},setValue:function(value,nopush){var me=this,myval=me.valueToRaw(value);if(!nopush){me.keyCodeArr=[];for(var i=0;i<myval.length;i++)me.keyCodeArr.push(myval.charAt(i))}for(var strVal="",i=0;i<me.keyCodeArr.length;i++)strVal+=me.replaceChar;return me.setRawValue(strVal),me.mixins.field.setValue.call(me,strVal)},onBoxReady:function(){var me=this;me.inputEl.dom.style.imeMode="disabled",me.inputEl.on("dblclick",function(){me.selectText()}),me.callParent()}});
//# sourceMappingURL=MyPasswordfield.js.map
myStates={infaxgridState:{},infaxgridFilter:{},outfaxgridState:{},outfaxgridFilter:{},succoutfaxgridState:{},succoutfaxgridFilter:{},draftgridState:{},addressgridState:{},docgridState:{},docgridFilter:{},taskgridState:{},taskgridFilter:{},wfrulegridState:{},smsinfaxgridState:{},smsinfaxgridFilter:{},smsoutfaxgridState:{},smsoutfaxgridFilter:{},westPanelState:{},centerPanelState:{},centerCenterPanelState:{},centerSouthPanelState:{},southPanelState:{},printerSrc:{},printerType:{},faxtoolBtn:{},currtree:{},searchState:{},smscbState:{}};var setSerStates=new Ext.util.DelayedTask,stateSorArr=["infaxgridState","infaxgridFilter","outfaxgridState","outfaxgridFilter","succoutfaxgridState","succoutfaxgridFilter","draftgridState","addressgridState","docgridState","docgridFilter","taskgridState","taskgridFilter","wfrulegridState","smsinfaxgridState","smsinfaxgridFilter","smsoutfaxgridState","smsoutfaxgridFilter","westPanelState","centerPanelState","centerCenterPanelState","centerSouthPanelState","southPanelState","printerSrc","printerType","faxtoolBtn","currtree","searchState","smscbState"];Ext.define("WS.lib.MyStateProvider",{extend:"Ext.state.Provider",constructor:function(config){var me=this;config=config||{},Ext.isDefined(config.sessiontoken)&&(me.sessiontoken=config.sessiontoken),me.callParent(arguments),me.state=me.readMyStates()},set:function(name,value){var me=this;return"undefined"==typeof value||null===value?void me.clear(name):(me.setServerState(name,value),void me.callParent(arguments))},clear:function(name){this.clearServerState(name),this.callParent(arguments)},readMyStates:function(){var states=myStates,param={};return param.sessiontoken=GlobalFun.getSeesionToken(),param.key=Ext.JSON.encode(stateSorArr),WsCall.call("readmystates",param,function(response,opts){var datas=Ext.JSON.decode(response.data);Ext.Array.each(datas,function(val,index,alls){var tmpKey=stateSorArr[index];val.stateSaved=!0,myStates[tmpKey]=val})},function(response,opts){},!1,null,null,null,!1),states},setServerState:function(name,value){value.stateSaved=!1;for(key in stateSorArr){var ssArr=stateSorArr[key];if(ssArr==name){var curState=myStates[ssArr],tmpAr=[];curState&&value.columns&&curState.columns&&(Ext.Array.each(value.columns,function(item){var hasP=!1;Ext.Array.each(curState.columns,function(it){it.id==item.id&&(item.HasV=!0,hasP=!0,it=Ext.Object.merge(it,item))}),hasP&&tmpAr.push(item)}),Ext.Array.each(value.columns,function(it){it.HasV||tmpAr.push(it)}),curState.columns=tmpAr,value.columns=curState.columns),curState=value,setSerStates.cancel(),setSerStates.delay(6e3,function(){for(key1 in stateSorArr){var tmp=myStates[stateSorArr[key1]];if(tmp&&!tmp.stateSaved){var tmpStr=Ext.JSON.encode(tmp);if("{}"!=tmpStr){var param={};param.sessiontoken=GlobalFun.getSeesionToken(),param.key=stateSorArr[key1],param.value=tmpStr,tmp.stateSaved=!0,WsCall.call("setmystates",param,function(response,opts){},function(response,opts){},!1)}}}});break}}},clearServerState:function(name){}});
//# sourceMappingURL=MyStateProvider.js.map
Ext.define("chl.exUnit.GridFilterMenuButton",{alias:"widget.GridFilterMenuButton",extend:"Ext.button.Button",filterParam:!1,menu:{defaults:{xtype:"menucheckitem"},items:[]},initComponent:function(){var me=this;me.callParent(arguments),me.on("boxready",function(componet,width,height,eOpts){if(me.filterParam){var target=componet.up(me.filterParam.GridTypeName);GridManager.CreateGridFilterMenu(componet,me.filterParam.store,{group:me.filterParam.group,text:me.filterParam.text,target:target,componet:componet,filterKey:me.filterParam.filterKey})}})}}),Ext.define("chl.exUnit.GridSelectCancelMenuButton",{alias:"widget.GridSelectCancelMenuButton",extend:"Ext.button.Button",targetName:!1,menu:{defaults:{xtype:"menuitem"},items:[]},initComponent:function(){var me=this;me.callParent(arguments),me.on("boxready",function(componet,width,height,eOpts){var target=componet.up(me.targetName);GridManager.CreateGridSelectCancelMenu(componet,target)})}}),Ext.define("chl.exUnit.MiniPngDDSortPanel",{alias:"widget.MiniPngDDSortPanel",extend:"Ext.container.Container",alternateClassName:["MiniPngDDSortPanel"],itemId:"MiniPngDDSortPanel",frame:!1,layout:{type:"auto",width:100},bodyStyle:{background:"#DFE8F6"},autoScroll:!0,defaults:{xtype:"image",width:100,height:100,margin:"5 5 5 5",style:{"float":"left"}},items:[]}),Ext.define("MiniPngDDSortViewClass",{config:{selectAll:0,pngSels:new Ext.util.MixedCollection,pngAllMini:new Ext.util.MixedCollection,RowId:0,AreaId:0,currPngTotal:1,shiftImg:0},constructor:function(cfg){this.initConfig(cfg),this.pngSels=new Ext.util.MixedCollection,this.pngSelBig=new Ext.util.MixedCollection,this.pngAllMini=new Ext.util.MixedCollection},initPngPanel:function(palPngContainer){var window=palPngContainer.up("window"),pngClass=window.pngClass,pngNStyle={border:"1px solid black","background-color":"#FFFFFF","background-image":"none","background-repeat":"no-repeat"},param={limit:0,page:0,filter:"{ AreaId: "+pngClass.AreaId+",RowId:"+pngClass.RowId+" }",dir:"ASC",sort:"SortNum",sessiontoken:GlobalFun.getSeesionToken()};WsCall.call(GlobalConfig.Controllers.TombstoneGrid.read,"LoadTombstoneGrid",param,function(response,opts){var data=response.dataset;window.el.mask("请稍候..."),Ext.Array.each(data,function(item,index,allItems){var src=GlobalFun.GetTomestoneImageSrc(item.PaymentStatusId,item.Id,item.TypeId),pngContainer=Ext.create("Ext.container.Container",{width:100,height:80,tombstoneId:item.Id,layout:{type:"vbox",align:"center"},items:[{xtype:"image",cls:"hospital-target",sortNum:index,tombstoneId:item.Id,width:77,height:60,style:pngNStyle,src:src,listeners:{boxready:function(img,width,height,opts){DropDragControl.initializeHospitalDropZone(img,window);var imgDom=img.getEl();pngClass.getPngAllMini().add(img.id,img),imgDom.on("click",function(eve){if(!stopClick){if(eve.ctrlKey){pngClass.setShiftImg(img);var borderStyle=imgDom.getStyle("border",!0);return void("1px solid black"==borderStyle||"black 1px solid"==borderStyle?(imgDom.setStyle("border","3px solid blue"),pngClass.getPngSels().contains(img)||(DropDragControl.uninitHospitalDropZone(img),DropDragControl.initializePatientDragZone(img,window),pngClass.getPngSels().add(img.id,img))):(imgDom.setStyle("border","1px solid black"),pngClass.getPngSels().contains(img)&&(DropDragControl.uninitPatientDragZone(img),DropDragControl.initializeHospitalDropZone(img,window),pngClass.getPngSels().remove(img))))}if(eve.shiftKey){var firstImg,imageList=palPngContainer.query("image");return Ext.Array.each(imageList,function(item,index,allItems){0==index&&(firstImg=0!=pngClass.getShiftImg()?pngClass.getShiftImg():item),DropDragControl.uninitPatientDragZone(item),DropDragControl.initializeHospitalDropZone(item,window)}),pngClass.getPngSels().clear(),void Ext.Array.each(imageList,function(item,index,allItems){var imgItem=item.getEl();imgItem.setStyle("border","1px solid black"),item.sortNum>=firstImg.sortNum&&item.sortNum<=img.sortNum&&!item.ownerCt.disabled&&(imgItem.setStyle("border","3px solid blue"),DropDragControl.uninitHospitalDropZone(item),DropDragControl.initializePatientDragZone(item,window),pngClass.getPngSels().add(item.id,item)),item.sortNum<=firstImg.sortNum&&item.sortNum>=img.sortNum&&!item.ownerCt.disabled&&(imgItem.setStyle("border","3px solid blue"),DropDragControl.uninitHospitalDropZone(item),DropDragControl.initializePatientDragZone(item,window),pngClass.getPngSels().add(item.id,item))})}pngClass.setShiftImg(img);var imageList=palPngContainer.query("image");Ext.Array.each(imageList,function(item,index,allItems){DropDragControl.uninitPatientDragZone(item),DropDragControl.initializeHospitalDropZone(item,window)}),pngClass.getPngSels().clear(),Ext.Array.each(imageList,function(item,index,allItems){var imgItem=item.getEl();imgItem.setStyle("border","1px solid black"),item.id==img.id&&(imgItem.setStyle("border","3px solid blue"),DropDragControl.uninitHospitalDropZone(item),DropDragControl.initializePatientDragZone(item,window),pngClass.getPngSels().add(item.id,item))})}}),imgDom.on("dblclick",function(){var imageList=palPngContainer.query("image");Ext.Array.each(imageList,function(item,index,allItems){DropDragControl.uninitPatientDragZone(item),DropDragControl.initializeHospitalDropZone(item,window)}),pngClass.getPngSels().clear(),Ext.Array.each(imageList,function(item,index,allItems){var imgItem=item.getEl();imgItem.setStyle("border","1px solid black")});var borderStyle=imgDom.dom.style.border;("1px solid black"==borderStyle||"black 1px solid"==borderStyle)&&(imgDom.setStyle("border","3px solid blue"),pngClass.getPngSels().contains(img)||(DropDragControl.uninitHospitalDropZone(img),DropDragControl.initializePatientDragZone(img,window),pngClass.getPngSels().add(img.id,img)))}),imgDom.dom.onload=function(){imgDom.dom&&imgDom.dom.height>1&&img.ownerCt.el.unmask()}}}},{xtype:"label",text:item.Alias}]});palPngContainer.add(pngContainer)}),window.el.unmask()},function(response,opts){GlobalFun.errorProcess(response.code)||Ext.Msg.alert("失败",response.msg)},!0,"请稍候...",palPngContainer.el)}}),Ext.define("chl.exUnit.AreaTombstoneImagePanel",{alias:"widget.AreaTombstoneImagePanel",extend:"Ext.panel.Panel",alternateClassName:["AreaTombstoneImagePanel"],itemId:"AreaTombstoneImagePanel",frame:!1,bodyStyle:{background:"#DFE8F6"},border:!1,autoScroll:!0,style:{"overflow-x":"auto","white-space":"nowrap"},dockedItems:[{xtype:"container",itemId:"container",layout:{type:"hbox",align:"middle"},height:34,dock:"top",defaults:{margin:"2px 2px 2px 2px"},items:[{xtype:"textfield",itemId:"tombCode",cls:"big-fieldtext",fieldLabel:"区域或墓碑编码",labelWidth:100,labelAlign:"right",allowBlank:!1,blankText:"不能为空",regex:GlobalConfig.RegexController.regexTombstoneCode,regexText:"请输入3位或5位或7位编码",enableKeyEvents:!0,listeners:{keypress:function(field,e,opts){if(e.getKey()==e.ENTER){var toolbar=field.up("container"),showTomb=toolbar.down("#showTomb");showTomb.fireEvent("click",showTomb)}if(e.getKey()==e.ESC){var toolbar=field.up("container"),reset=toolbar.down("#reset");reset.fireEvent("click",reset)}}}},{xtype:"button",text:"选择",handler:function(com){var w=this.up("container"),field=w.down("#tombCode");WindowManager.SelectCemeteryAreaWin=WindowManager.ShowSelectCemeteryAreaWin(),WindowManager.SelectCemeteryAreaWin.callComponent=field}},{text:"显示",xtype:"button",iconCls:"search",width:100,cls:"big-fieldtext",itemId:"showTomb",listeners:{click:function(com){var toolbar=com.up("container"),tombCode=toolbar.down("#tombCode");if(tombCode.isValid()){GridManager.AreaTombstoneImagePanel.removeAll();var param={limit:0,page:0,filter:"{}",dir:"ASC",sort:"SortNum",sessiontoken:GlobalFun.getSeesionToken()},codeVal=tombCode.getValue();codeVal.length>0&&(param.filter='{ "Area": { "Alias": "'+codeVal+'" }, "Row": { "Alias": "'+codeVal+'" }, "Column": { "Alias": "'+codeVal+'" } }'),WsCall.call(GlobalConfig.Controllers.TombstoneGrid.read,"LoadTombstoneGrid",param,function(response,opts){var data=response.dataset;GridManager.AreaTombstoneImagePanel.el.mask("请稍候...");var pngNStyle={border:"1px solid black","background-color":"#FFFFFF","background-image":"none","background-repeat":"no-repeat",cursor:"pointer"},items1=[],pngContainer=Ext.create("Ext.container.Container",{style:{"white-space":"nowrap",margin:"5px 5px 5px 5px"},items:[]}),rowMaps=new Ext.util.MixedCollection,areaSort="ASC";Ext.Array.each(data,function(item,index,allItems){var key=item.RowId;rowMaps.containsKey(key)?rowMaps.get(key).push(item):rowMaps.add(key,[item]),"DESC"==item.AreaSort&&(areaSort="DESC")}),rowMaps.sortByKey(areaSort),rowMaps.each(function(row,index){items1=[],pngContainer=Ext.create("Ext.container.Container",{style:{"white-space":"nowrap",margin:"5px 5px 5px 5px"},items:[]}),Ext.Array.each(row,function(item,index1){var src=GlobalFun.GetTomestoneImageSrc(item.PaymentStatusId,item.Id,item.TypeId),pngContainer1=Ext.create("Ext.container.Container",{width:100,height:80,tombstoneId:item.Id,layout:{type:"vbox",align:"center"},style:{display:"inline-block"},items:[{xtype:"image",sortNum:item.SortNum,tombstoneId:item.Id,PaymentStatusId:item.PaymentStatusId,tombstoneInfo:item,width:77,height:60,style:pngNStyle,src:src,listeners:{boxready:function(img){var imgDom=img.getEl();imgDom.on("click",function(eve){var tid=img.tombstoneId,tombstoneInfo=img.tombstoneInfo;GlobalFun.JobTombPngClickFun(eve,tid,tombstoneInfo)})}}},{xtype:"label",text:item.Alias}]});items1.push(pngContainer1)}),pngContainer.add(items1),GridManager.AreaTombstoneImagePanel.add(pngContainer)}),GridManager.AreaTombstoneImagePanel.el.unmask()},function(response,opts){GlobalFun.errorProcess(response.code)||Ext.Msg.alert("失败",response.msg)},!0,"请稍候...",GridManager.AreaTombstoneImagePanel.el)}}}},{text:"重置",xtype:"button",width:100,cls:"big-fieldtext",itemId:"reset",listeners:{click:function(field){var toolbar=field.up("container"),tombCode=toolbar.down("#tombCode");tombCode.setValue(""),tombCode.unsetActiveError(),tombCode.inputEl.focus(100)}}}]}],items:[]});
//# sourceMappingURL=exUnit.js.map
Ext.define("chl.Model.MainItemListTreeModel",{extend:"Ext.data.Model",fields:[{name:"id",type:"string",mapping:"Id"},{name:"text",type:"string",mapping:"Text"},{name:"leaf",type:"boolean",mapping:"IsLeaf"},{name:"iconCls",type:"string",mapping:"Iconcls"},{name:"expanded",type:"boolean",mapping:"Expanded"},{name:"linksrc",type:"string",mapping:"LinkSrc"},{name:"parent",mapping:"Parent"},{name:"children",mapping:"Children"},{name:"cls",mapping:"Cls"}]});
//# sourceMappingURL=MainItemListTreeModel.js.map
Ext.create("Ext.data.TreeStore",{model:"chl.Model.MainItemListTreeModel",storeId:"MainItemListTreeStoreId",autoLoad:!1,proxy:{type:"ajax",url:GlobalConfig.Controllers.MainItemListTree,extraParams:{sessiontoken:GlobalFun.getSeesionToken(),req:"treenodes",treename:"MainItemListTree",restype:"json",hadsel:!1},reader:{type:"json",root:"data",successProperty:"success",messageProperty:"msg"},actionMethods:{create:"POST",read:"GET",update:"POST",destroy:"POST"},listeners:{exception:function(proxy,response,operation){var json=Ext.JSON.decode(response.responseText),code=json.code;GlobalFun.errorProcess(code)}}},root:{expanded:!1,text:"系统",iconCls:"fax"}});
//# sourceMappingURL=MainItemListTreeStore.js.map
Ext.define("chl.tree.MainItemListTree",{alias:"widget.MainItemListTree",itemId:"MainItemListTree",title:"系统",iconCls:"faxTitle",extend:"chl.tree.BaseTree",clearOnLoad:!1,alternateClassName:["MainItemListTree"],store:"MainItemListTreeStoreId",ddGroup:"MainItemListTreeDDGp",animate:!1,rootVisible:!0,frame:!1,frameHeader:!1,border:!1,listeners:{itemcontextmenu:function(view,rec,item,index,e,opts){e.stopEvent()},expand:function(tree,opts){tree.getSelectionModel().hasSelection()?tree.fireEvent("selectionchange",tree,tree.getSelectionModel().getSelection(),opts):tree.getSelectionModel().select(0,!0)},boxready:function(com,width,height,opts){(new Ext.util.DelayedTask).delay(2e3,function(){TreeManager.MainItemListTree.getSelectionModel().hasSelection()||TreeManager.MainItemListTree.getSelectionModel().select(0,!0)})}},initComponent:function(){var me=this;me.callParent(arguments)}}),TreeManager.CreateMainItemListTree=function(param){return TreeManager.MainItemListTree=Ext.create("chl.tree.MainItemListTree"),param&&param.needLoad&&TreeManager.MainItemListTree.getStore().load({callback:function(){var rootNode=TreeManager.MainItemListTree.getRootNode();rootNode.expand()}}),TreeManager.MainItemListTree},TreeManager.SetMainItemListTreeSelectionChangeEvent=function(param){TreeManager.MainItemListTree.on("selectionchange",function(view,seles,op){return seles[0]?"root"==seles[0].data.id?void GlobalFun.TreeSelChangeGrid("ManageDfGrid",GridManager.ManageDfGrid,"系统",!0):"001"==seles[0].data.id?void GlobalFun.TreeSelChangeGrid("TestGrid",GridManager.TestGrid,"xx管理列表"):"002"==seles[0].data.id?void GlobalFun.TreeSelChangeGrid("TestGrid",GridManager.TestGrid,"yy管理列表"):void 0:void 0})};
//# sourceMappingURL=MainItemListTree.js.map
Ext.create("Ext.data.ArrayStore",{storeId:"ManageDfGridStoreId",fields:[{name:"gridId",type:"string"},{name:"gridName",type:"string"}],autoLoad:!1,pageSize:10,data:[["001","xx管理"],["002","yy管理"]]}),Ext.define("chl.dfgrid.ManageDfGrid",{alternateClassName:["ManageDfGrid"],alias:"widget.ManageDfGrid",extend:"Ext.grid.Panel",store:"ManageDfGridStoreId",actionBaseName:"ManageDfGrid",itemId:"ManageDfGrid",FirstLoad:!0,hideHeaders:!0,viewConfig:{loadMask:!1},columns:[{groupable:!1,sortable:!1,dataIndex:"gridName",renderer:GlobalFun.UpdateRecord,flex:1}],listeners:{itemclick:function(view,record){var node=TreeManager.MainItemListTree.getStore().getNodeById(record.data.gridId);TreeManager.MainItemListTree.getSelectionModel().select(node,!0)},itemmouseenter:function(view,record,item,index,e,eOpts){item.style.cursor="pointer"},itemmouseleave:function(view,record,item,index,e,eOpts){item.style.cursor="auto"}}});
//# sourceMappingURL=ManageDfGrid.js.map
Ext.define("chl.Action.TestGridAction",{extend:"WS.action.Base",category:"TestGridAction"}),Ext.create("chl.Action.TestGridAction",{itemId:"addTest",iconCls:"add",tooltip:"添加",text:"添加",handler:function(){var me=this,target=me.getTargetView();ActionManager.addTest(target)},updateStatus:function(selection){this.setDisabled(!GlobalFun.IsAllowFun("墓碑落葬"))}}),Ext.create("chl.Action.TestGridAction",{itemId:"editTest",iconCls:"edit",tooltip:"编辑",text:"编辑",handler:function(){var me=this,target=me.getTargetView(),record=target.getSelectionModel().getSelection()[0];ActionManager.editTest(target,record)},updateStatus:function(selection){this.setDisabled(1!=selection.length||!GlobalFun.IsAllowFun("墓碑落葬"))}}),Ext.create("chl.Action.TestGridAction",{itemId:"refreshTest",iconCls:"refresh",tooltip:"刷新",text:"刷新",handler:function(){var target=this.getTargetView();ActionManager.refreshTest(target)},updateStatus:function(selection){}}),ActionManager.refreshTest=function(traget){traget.loadGrid()},ActionManager.addTest=function(traget){var record=traget.getStore().getAt(0);WindowManager.AddUpdateTestWin=Ext.create("chl.Grid.AddUpdateTestWin",{grid:traget,iconCls:"add",action:"create",record:record,title:"新增逝者"}),WindowManager.AddUpdateTestWin.show(null,function(){WindowManager.AddUpdateTestWin.down("#SupperManageItemId").setDisabled(GlobalFun.IsAllowFun("无限期管理年限")?!1:!0),WindowManager.AddUpdateTestWin.down("#formId").loadRecord(record)})},ActionManager.editTest=function(traget,record){WindowManager.AddUpdateTestWin=Ext.create("chl.Grid.AddUpdateTestWin",{grid:traget,iconCls:"edit",record:record,action:"update",title:"编辑逝者"}),WindowManager.AddUpdateTestWin.show(null,function(){WindowManager.AddUpdateTestWin.down("#SupperManageItemId").setDisabled(GlobalFun.IsAllowFun("无限期管理年限")?!1:!0),WindowManager.AddUpdateTestWin.down("#formId").loadRecord(record)})};
//# sourceMappingURL=TestGridAction.js.map
Ext.define("chl.Model.TestGridModel",{extend:"Ext.data.Model",idProperty:"Id",alternateClassName:["TestGridModel"],fields:[{name:"Id",type:"string"},{name:"Date",mapping:"Date",type:"string"},{name:"Applicanter",type:"string"},{name:"IDNumber",type:"string"},{name:"Telephone",type:"string"}]});
//# sourceMappingURL=TestGridModel.js.map
Ext.create("Ext.data.Store",{model:"chl.Model.TestGridModel",storeId:"TestGridStoreId",filterMap:Ext.create("Ext.util.HashMap"),pageSize:GlobalConfig.GridPageSize,autoLoad:!1,remoteSort:!0,sorters:[{property:"Id",direction:"DESC"}],autoSync:!1,proxy:{type:"ajax",api:GlobalConfig.Controllers.TestGrid,filterParam:"filter",sortParam:"sort",directionParam:"dir",limitParam:"limit",startParam:"start",simpleSortMode:!0,extraParams:{req:"data",dataname:"User",restype:"json",sessiontoken:GlobalFun.getSeesionToken(),folderid:-1,refresh:null,template:""},reader:{type:"json",root:"data",seccessProperty:"success",messageProperty:"msg",totalProperty:"total"},writer:{type:"json",writeAllFields:!1,allowSingle:!1},actionMethods:{create:"POST",read:"GET",update:"POST",destroy:"POST"},listeners:{exception:function(proxy,response,operation){var json=Ext.JSON.decode(response.responseText),code=json.code;GlobalFun.errorProcess(code),"read"!=operation.action}}},listeners:{load:function(store,records,suc,operation,opts){store.getTotalCount();suc||store.loadData([])}}});
//# sourceMappingURL=TestGridStore.js.map
Ext.define("chl.gird.TestGrid",{alternateClassName:["TestGrid"],alias:"widget.TestGrid",extend:"chl.grid.BaseGrid",store:"TestGridStoreId",stateful:!1,actionBaseName:"TestGridAction",listeners:{itemclick:function(grid,record,hitem,index,e,opts){},itemdblclick:function(grid,record,hitem,index,e,opts){},itemcontextmenu:function(view,rec,item,index,e,opts){e.stopEvent()},beforeitemmousedown:function(view,record,item,index,e,options){},selectionchange:function(view,seles,op){seles[0]&&ActionBase.updateActions("TestGridAction",seles)}},columns:[],dockedItems:[{xtype:"toolbar",itemId:"toolbarID",dock:"top",layout:{overflowHandler:"Menu"},items:[ActionBase.getAction("refreshTest"),ActionBase.getAction("addTest")]},{xtype:"Pagingtoolbar",itemId:"pagingtoolbarID",store:"TestGridStoreId",dock:"bottom",items:[]}],initComponent:function(){var me=this;me.callParent(arguments),ActionBase.setTargetView(me.actionBaseName,me),ActionBase.updateActions(me.actionBaseName,me.getSelectionModel().getSelection())},loadGrid:function(isSearch){var me=this,store=me.getStore();store.pageSize=GlobalConfig.GridPageSize;var sessiontoken=store.getProxy().extraParams.sessiontoken;!sessiontoken||0==sessiontoken.length;var filter={};store.filterMap.each(function(key,value,length){filter[key]=value}),store.getProxy().extraParams.filter=Ext.JSON.encode(filter),store.getProxy().extraParams.refresh=1,store.loadPage(1),store.getProxy().extraParams.refresh=null,ActionBase.updateActions(me.actionBaseName,me.getSelectionModel().getSelection())}}),GridManager.CreateTestGrid=function(param){var tmpArr=[{text:"时间",dataIndex:"Date",renderer:GlobalFun.UpdateRecordForShortDate,flex:1},{text:"姓名",dataIndex:"Applicanter",renderer:GlobalFun.UpdateRecord,flex:1},{text:"电话",dataIndex:"Telephone",renderer:GlobalFun.UpdateRecord,flex:2}];return GridManager.TestGrid=Ext.create("chl.gird.TestGrid",GridManager.BaseGridCfg("TestGrid","TestGridState",tmpArr)),param&&param.needLoad&&GridManager.TestGrid.loadGrid(),GridManager.TestGrid},GridManager.SetTestGridSelectionChangeEvent=function(param){GridManager.TestGrid.on("selectionchange",function(view,seles,op){!seles[0]})},Ext.define("chl.Grid.AddUpdateTestWin",{extend:"Ext.window.Window",title:"添加",defaultFocus:"TestItemId",iconCls:"",record:!1,height:500,width:500,layout:"vbox",modal:!0,resizable:!1,items:[{xtype:"form",itemId:"formId",autoScroll:!0,height:450,width:490,border:!1,bodyPadding:5,defaultType:"textfield",layout:{xtype:"table",columns:2},defaults:{labelAlign:"right",labelPad:15,width:340,labelWidth:125,maxLength:100,maxLengthText:"最大长度为100"},items:[{name:"Test",fieldLabel:"姓名",itemId:"TestItemId",validateOnBlur:!1,allowBlank:!1,blankText:"不能为空"},{fieldLabel:"时间",colspan:2,xtype:"datetimefield",width:340,name:"BuryDate",itemId:"BuryDateItemId",mySqlType:"date",value:new Date},{xtype:"textareafield",fieldLabel:"备注",name:"Remark2",itemId:"Remark2ItemId"},{fieldLabel:"申请人",xtype:"hidden",name:"Applicanter",itemId:"ApplicanterItemId",allowBlank:!1,blankText:"申请人不能为空"},{fieldLabel:"电话",xtype:"hidden",name:"Telephone",itemId:"TelephoneItemId",allowBlank:!1,blankText:"电话不能为空"},{fieldLabel:"身份证号",xtype:"hidden",name:"IDNumber",itemId:"IDNumberItemId"}],buttons:[{text:"重置",handler:function(){var me=this,w=me.up("window"),f=w.down("#formId");if(f.getForm().reset(),"update"==w.action){var sm=w.grid.getSelectionModel();sm.hasSelection()&&f.getForm().loadRecord(sm.getSelection()[0])}}},{text:"确定",itemId:"submit",handler:function(){var me=this,w=me.up("window"),form=w.down("#formId").getForm();if(form.isValid()){var url="create"==w.action?GlobalConfig.Controllers.TestGrid.addTest:GlobalConfig.Controllers.TestGrid.updateTest;form.submit({url:url,params:{req:"dataset",dataname:"AddUpdateTest",restype:"json",Id:w.record?w.record.data.ControllTid:0,logId:w.record?w.record.data.Id:0,action:w.action,sessiontoken:GlobalFun.getSeesionToken()},success:function(form,action){w.grid.loadGrid(),w.close()},failure:function(form,action){GlobalFun.errorProcess(action.result.code)||Ext.Msg.alert("失败",action.result.msg)}})}}},{text:"取消",handler:function(){var me=this;me.up("window").close()}}]}]});
//# sourceMappingURL=TestGrid.js.map
Ext.onReady(function(){Ext.getBody().mask("正在加载..."),GlobalFun.fixedBugs(),Ext.state.Manager.setProvider(Ext.create("Ext.state.CookieProvider",{expires:new Date((new Date).getTime()+2592e6)})),Ext.tip.QuickTipManager.init();var LoadCurrUserInfo=function(callBack){var param={sessiontoken:GlobalFun.getSeesionToken()};WsCall.call(GlobalConfig.Controllers.User.GetCurrUserInfo,"GetCurrUserInfo",param,function(response,opts){GlobalConfig.CurrUserInfo=response.data[0],callBack()},function(response,opts){GlobalFun.errorProcess(response.code)||Ext.Msg.alert("获取用户权限失败",response.msg)},!1)},LoadMainView=function(){if(""==GlobalConfig.CurrUserInfo)return void Ext.Msg.alert("登录失败","登录失败！无效的登录信息",function(){GlobalFun.ReDirectUrl("UserLogin")});GridManager.ManageDfGrid=Ext.create("chl.dfgrid.ManageDfGrid");var roleArr=[["001","xx管理"],["002","yy管理"]];GridManager.ManageDfGrid.getStore().loadData(roleArr),GridManager.CreateTestGrid({needLoad:!1}),GridManager.SetTestGridSelectionChangeEvent(),TreeManager.CreateMainItemListTree({needLoad:!0}),TreeManager.SetMainItemListTreeSelectionChangeEvent(),GlobalConfig.ViewPort=Ext.create("Ext.container.Viewport",{layout:{type:"border"},defaults:{split:!0,collapsible:!0},items:[{region:"north",title:"公告栏",stateful:!1,collapsed:!0,height:100,items:[{xtype:"container",html:"暂无公告"}]},{region:"west",stateId:"westStateId",stateful:!0,iconCls:"viewportMainWestTitle",preventHeader:!0,title:"管理菜单",layout:{type:"accordion",animate:!1,activeOnTop:!1,collapseFirst:!1,titleCollapse:!0},width:200,listeners:{boxready:function(com,width,height,opts){com.add(TreeManager.MainItemListTree)}},items:[]},{region:"center",stateId:"centerStateId",stateful:!0,collapsible:!1,layout:{type:"border"},defaults:{split:!0,collapsible:!0,border:!1},items:[{region:"center",stateId:"centercenterStateId",stateful:!0,itemId:"centerGridDisplayContainer",title:"信息",layout:"card",height:400,listeners:{boxready:function(com,width,height,opts){com.add(GridManager.ManageDfGrid,GridManager.TestGrid)}},items:[]},{region:"south",stateId:"centersouthStateId",itemId:"centerGridDetailContainer",stateful:!0,preventHeader:!0,height:200,collapsed:!1,bodyBoder:!1,xtype:"tabpanel",frame:!1,border:!1,defaults:{border:!1},items:[{title:"详细信息",layout:"auto",itemId:"southTab1",autoScroll:!0,items:[{xtype:"container",width:800,html:"test"}]},{title:"介绍",autoScroll:!0,itemId:"southTab2",padding:"5px 5px 5px 20px",items:[{xtype:"container",width:800,html:"test"}]}]}]},{region:"south",stateId:"southStateId",stateful:!1,height:30,xtype:"toolbar",split:!1,collapsible:!1,items:["->","-",{xtype:"button",width:80,iconCls:"logout",text:"退出登录",tooltip:"退出登录当前用户",handler:function(){GlobalConfig.newMessageBox.confirm("退出登录","确定要退出登录当前用户吗?",function(btn){if("yes"==btn){var param={};WsCall.call(GlobalConfig.Controllers.User.UserLoginOut,"UserLoginOut",param,function(response,opts){Ext.util.Cookies.clear("login_sessiontoken"),Ext.getBody().mask("请稍候..."),(new Ext.util.DelayedTask).delay(20,function(){GlobalFun.ReDirectUrl("")})},function(response,opts){GlobalFun.errorProcess(response.code)||Ext.Msg.alert("注销失败",response.msg)},!1)}})}}]}]})},ComboSucCount=0,ComboSucTotal=1,combInitCallBack=function(records,operation,success){success&&(ComboSucCount++,ComboSucCount==ComboSucTotal&&LoadCurrUserInfo(function(){LoadMainView(),GlobalFun.Heartbeat(),(new Ext.util.DelayedTask).delay(500,function(){Ext.getBody().unmask()})}))},LoadBaseEnumStore=function(){combInitCallBack(null,null,!0)};LoadBaseEnumStore()});
//# sourceMappingURL=index.js.map