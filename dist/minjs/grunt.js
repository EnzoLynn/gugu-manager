var lang_type,underIE8=!1;if(function(){if(lang_type=Ext.util.Cookies.get("ws_language")){if("0"==lang_type)return void document.write('<script type="text/javascript" src="/dist/ext4/locale/ext-lang-zh_CN.js"></script>');if("1"==lang_type)return void document.write('<script type="text/javascript" src="/dist/ext4/locale/ext-lang-en.js"></script>');lang_type="0",document.write('<script type="text/javascript" src="/dist/ext4/locale/ext-lang-zh_CN.js"></script>')}else lang_type="0",document.write('<script type="text/javascript" src="/dist/ext4/locale/ext-lang-zh_CN.js"></script>')}(),Ext.isIE&&Ext.ieVersion<8)if(window.attachEvent&&!window.opera){alert("Your IE version is unsupported, please use IE8/9.");var loadingDiv=document.getElementById("loadingDiv");loadingDiv&&document.body.removeChild(loadingDiv),document.execCommand("stop")}else{alert("Your IE version is unsupported, please use IE8/9.");var loadingDiv=document.getElementById("loadingDiv");loadingDiv&&document.body.removeChild(loadingDiv),window.stop()}
//# sourceMappingURL=locale.js.map
var login_sessiontoken=Ext.util.Cookies.get("login_sessiontoken"),login_username=Ext.util.Cookies.get("login_username"),login_password=Ext.util.Cookies.get("login_password"),login_checksavepass=Ext.util.Cookies.get("login_checksavepass");Ext.namespace("GlobalFun","GlobalFun"),Ext.namespace("StoreManager","StoreManager.GridStore"),Ext.namespace("StoreManager","StoreManager.ComboStore"),Ext.namespace("ModelManager","ModelManager.GridModel"),Ext.namespace("ModelInfoManager","ModelInfoManager.GridModelInfo"),Ext.namespace("GridManager","GridManager"),Ext.namespace("WindowManager","WindowManager"),Ext.namespace("ActionManager","ActionManager"),Ext.namespace("GlobalConfig","GlobalConfig"),Ext.namespace("DropDragControl","DropDragControl"),Ext.namespace("Template","Template"),GlobalConfig.ViewPort="",GlobalConfig.GridPageSize=50,GlobalConfig.MaxLimit=99999,Ext.namespace("TreeManager","TreeManager"),GlobalConfig.DetailAutoCollapse=!1,GlobalConfig.CurrUserInfo="",GlobalConfig.Css={RemarkDisplay:"white-space:normal; word-break:break-all;",RemarkReadOnlyDisplay:"white-space:normal; word-break:break-all;readonly:true;"},GlobalConfig.HeartbeatRunner=new Ext.util.TaskRunner,GlobalConfig.newMessageBox=Ext.create("Ext.window.MessageBox",{});var globalFix="/data";GlobalConfig.Controllers={TestGrid:{create:"/data/TestGrid.json",read:"/data/TestGrid.json",update:"/data/TestGrid.json",destroy:"/data/TestGrid.json"},Heartbeat:"login/heartbeat",User:{GetCurrUserInfo:"/login/ajaxLogin",CheckUserPassword:"/CheckUserPassword111",UserLoginOut:"/login/logout"},UserGrid:{},CustomerGrid:{create:globalFix+"/CustomerGrid.json",read:"customer/getList",update:globalFix+"/CustomerGrid.json",destroy:globalFix+"/CustomerGrid.json",loadRuleCount:globalFix+"/loadRuleCount.json",addCustomer:"/customer/add",updateCustomer:"customer/update",addCustomerRent:"/customerRent/add",addCustomerRule:"customerExpressRule/addRule",delCustomerRule:"customerExpressRule/deleteRule",delCustomer:globalFix+"/DelCustomer.json",GetCustomerRuleByRentId:"customerExpressRule/countProvinceRule",getCustomerRule:"customerExpressRule/show",uploadCustomerExcel:globalFix+"/UploadCustomerExcel.json"},Customer_numberGrid:{create:"customerNumber/add",read:"customerNumber/getList",update:"customerNumber/update",destroy:"customerNumber/delete"},CustomerRentGrid:{create:"/customerRent/add",read:"/customerRent/getList",update:globalFix+"/CustomerRentGrid.json",destroy:globalFix+"/CustomerRentGrid.json"},ExpressPanel:{GetCustomer_numberCount:"expressRule/countProvinceRule",GetExpressRule:"expressRule/show",delExpressRule:"expressRule/deleteRule",addExpressRule:"expressRule/addRule"},Tracking_numberGrid:{create:globalFix+"/traking_numberGrid.json",read:"trackingNumber/getList",update:globalFix+"/traking_numberGrid.json",destroy:globalFix+"/traking_numberGrid.json",uploadExcel:"/uploadTrackingNumber/upload",outPutExcel:"/trackingNumber/downloadExcel",translateExpress:"/trackingNumber/countPrice",translateCost:"/trackingNumber/countPrice"},MainItemListTree:"/data/LoadMainItemListTree.json",Express_pointGrid:{create:"expressPoint/add",read:"/expressPoint/getList",update:"/expressPoint/update",destroy:"/expressPoint/delete"}},GlobalConfig.RegexController={regexNumber:/^\d*$/,regexNumberF:/^([-]\d*|\d*)$/,regexAlphabetNumber:/^(\d|[A-Za-z])*$/,regexTelePhoneNumber:/^\d{11}$/,regexFaxNumber:/(^sip\:[0-9a-zA-Z#-_]+@[0-9a-zA-Z.-_]+$)|(^\d+-(\d|\#|\*)*$)|(^\(\d+\)(\d|\#|\*)*$)|(^\+[\d][123457890](\d*) (\d|\#|\*)+$)|(^\+[123456790][\d](\d*) (\d|\#|\*)+$)|(^\+[1] (\d|\#|\*)+$)|(^\+[7] (\d|\#|\*)+$)|(^\+[\d][6](\d+) (\d|\#|\*)+$)|(^\+(\d+)\(\d+\)(\d|\#|\*)+$)|(^(0+[1-9]\d{2,})$)|(^\d+$)/,regexFolderName:/^[^\\\/?: *"<>|]+$/,regexEmail:/^(\w|\.)+\@\w+\.\w+$/,regexTombstoneCode:/^(\d{3}|\d{5}|\d{7})$/,regexAreaCode:/^\d{3}$/,regexMoney2Fixed:/^[0-9]\d{0,7}((\.)?\d{1,2})?$/,regexMoney3Fixed:/^[0-9]\d{0,8}((\.)?\d{1,3})?$/},GlobalConfig.ErrorCode={RootFolderID:0,RecycleFolderID:1073741822,PublicRootFolderID:2147483632,PublicRecycleFolderID:2147483646,DontCareFolderID:1073741823,ResOK:0,ResFullPrint:24,ResPartialOK:251658241,ResSessionTokenError:251658242,ResSessionTimeOut:251658244,ResOperationDeny:251658248,ResDBError:251658249,ResInternalError:251658256,ResParamError:251658257,ResSystemError:251658260,ResInputParamsError:251658264,ResConnectServerFailed:251658265,ResOperationNoSense:251658272,ResHasNotImplement:251658273,ConServerError:1879048187,CasLogoutCode:1879048190,ResNoUserName:251658512,ResPasswordError:251658513,LoginFail:251658514,ResUserInvalid:251658515,ResDomainLoginFailed:251658516,ResInvalidFolderID:251658288,ResFolderTypeNotMatch:251658290,ResDupFolderName:251658291,ResFolderNotEmpty:251658292,ResTooManyFolders:251658296,ResInvalidDocID:251661873,ResInvalidDocInfo:251661874,SeesionTimeOut:99},GlobalConfig.Province={110000:"北京市",120000:"天津市",130000:"河北省",140000:"山西省",150000:"内蒙古自治区",210000:"辽宁省",220000:"吉林省",230000:"黑龙江省",310000:"上海市",320000:"江苏省",330000:"浙江省",340000:"安徽省",350000:"福建省",360000:"江西省",370000:"山东省",410000:"河南省",420000:"湖北省",430000:"湖南省",440000:"广东省",450000:"广西壮族自治区",460000:"海南省",500000:"重庆市",510000:"四川省",520000:"贵州省",530000:"云南省",540000:"西藏自治区",610000:"陕西省",620000:"甘肃省",630000:"青海省",640000:"宁夏回族自治区",650000:"新疆维吾尔自治区",710000:"台湾省",810000:"香港特别行政区",820000:"澳门特别行政区"},GlobalConfig.globalStatus={};var cookie=Ext.util.Cookies.get("GlobalConfig.globalStatus");if(cookie){var obj=Ext.JSON.decode(cookie);obj&&(GlobalConfig.globalStatus=obj)}
//# sourceMappingURL=GlobalConfig.js.map
GlobalFun.fixedBugs=function(){if(Ext.firefoxVersion>=18){var noArgs=[];Ext.override(Ext.Base,{callParent:function(args){var method,superMethod=(method=this.callParent.caller)&&(method.$previous||(method=method.$owner?method:method.caller)&&method.$owner.superclass[method.$name]);try{if(!superMethod){method=this.callParent.caller;var parentClass,methodName;if(!method.$owner){if(!method.caller)throw new Error("Attempting to call a protected method from the public scope, which is not allowed");method=method.caller}if(parentClass=method.$owner.superclass,methodName=method.$name,!(methodName in parentClass))throw new Error("this.callParent() was called but there's no such method ("+methodName+") found in the parent class ("+(Ext.getClassName(parentClass)||"Object")+")")}}catch(e){}return superMethod.apply(this,args||noArgs)}})}Ext.isIE&&Ext.override(Ext.dd.DragDropManager,{getLocation:function(oDD){if(!this.isTypeOfDD(oDD))return null;if(oDD.getRegion)return oDD.getRegion();var pos,x1,x2,y1,y2,t,r,b,l,el=oDD.el;try{pos=Ext.Element.getXY(el)}catch(e){}return pos?(x1=pos[0],x2=x1+77,y1=pos[1],y2=y1+60,t=y1-oDD.padding[0],r=x2+oDD.padding[1],b=y2+oDD.padding[2],l=x1-oDD.padding[3],new Ext.util.Region(t,r,b,l)):null}}),Ext.ouveride,Ext.override(Ext.view.AbstractView,{onRender:function(){var me=this;me.callParent(arguments),me.loadMask&&Ext.isObject(me.store)&&me.setMaskBind(me.store)}}),GlobalConfig.newMessageBox.buttonText.yes="是",GlobalConfig.newMessageBox.buttonText.no="否",GlobalConfig.newMessageBox.buttonText.ok="确定",GlobalConfig.newMessageBox.buttonText.cancel="取消",Ext.override(Ext.window.MessageBox,{alert:function(cfg,msg,fn,scope){return Ext.isString(cfg)&&(cfg={title:cfg,msg:msg,buttons:this.OK,fn:fn,scope:scope,minWidth:this.minWidth<330?330:this.minWidth}),this.show(cfg)}}),Ext.apply(Ext.form.field.VTypes,{daterange:function(val,field){var date=field.parseDate(val);if(!date)return!1;if(!field.startDateField||field.dateRangeMax&&date.getTime()==field.dateRangeMax.getTime()){if(field.endDateField&&(!field.dateRangeMin||date.getTime()!=field.dateRangeMin.getTime())){var end=field.up("panel").down("#"+field.endDateField);end.setMinValue(date),end.validate(),field.dateRangeMin=date}}else{var start=field.up("panel").down("#"+field.startDateField);start.setMaxValue(date),start.validate(),field.dateRangeMax=date}return!0},daterangeText:"日期格式错误"})},GlobalFun.ReDirectUrl=function(url){var protocol=window.location.protocol,host=window.location.host;window.location.href=protocol+"//"+host+"/"+url},GlobalFun.getSeesionToken=function(){return Ext.util.Cookies.get("login_sessiontoken")},GlobalFun.setSeesionToken=function(sessiontoken,day){var myday=30;day&&(myday=day),Ext.util.Cookies.set("login_sessiontoken",sessiontoken,new Date((new Date).getTime()+864e5*myday))},GlobalFun.UpdateRecord=function(value,metaData,record,rowIndex,colIndex,store,view){return value},GlobalFun.UpdateRecordForShortDate=function(value,metaData,record,rowIndex,colIndex,store,view){var date=new Date(value.replace(/-/g,"/"));return Ext.util.Format.date(date,"Y-m-d")},GlobalFun.UpdateRecordForEntity=function(value,metaData,record,rowIndex,colIndex,store,view,disName){return value&&null!=value?disName?GlobalFun.UpdateRecord(value[disName],metaData,record):GlobalFun.UpdateRecord(value.Name,metaData,record):GlobalFun.UpdateRecord("",metaData,record)},GlobalFun.UTCtoLocal=function(dateString){var date=Ext.Date.parse(dateString+"+0000","Y-m-d H:i:sO"),m=Ext.util.Format.date(date,"Y-m-d H:i:s");return m},GlobalFun.LocalToUTCTime=function(i,endTime){var now=new Date,nowStr=Ext.util.Format.date(now,"Y-m-d"),offset=60*now.getTimezoneOffset()*1e3,resDate=new Date;if(endTime){var nowDay=Ext.Date.parse(nowStr+" 23:59:59","Y-m-d H:i:s");resDate.setTime(nowDay.getTime()+offset)}else{var nowDay=Ext.Date.parse(nowStr+" 00:00:00","Y-m-d H:i:s");resDate.setTime(nowDay.getTime()+offset-24*i*3600*1e3)}return Ext.util.Format.date(resDate,"Y-m-d H:i:s")},GlobalFun.GetNextDate=function(day){var today=new Date,newDate=new Date;return newDate.setTime(today.getTime()+24*day*3600*1e3),Ext.util.Format.date(newDate,"Y-m-d")},GridManager.BaseGridCfg=function(itemId,stateId,columns){var config={itemId:itemId,columnLines:!0,multiSelect:!0,frame:!1,stateful:stateId?!0:!1,border:!1};return stateId&&(config.stateId=stateId),columns&&(config.columns=columns),config},GlobalFun.errorProcess=function(code,swfokfun){return code==GlobalConfig.ErrorCode.LoginFail?(Ext.Msg.alert("登录失败","登录失败！无效用户名或密码",function(){swfokfun&&swfokfun()}),!0):code==GlobalConfig.ErrorCode.SeesionTimeOut?(Ext.getBody().unmask(),Ext.Msg.alert("登录信息失效","登录信息失效！请重新登录",function(){Ext.getBody().mask("请稍候..."),GlobalFun.ReDirectUrl("login.html")}),!0):!1},GlobalFun.isDropTarget=function(record,treeComponent){var treeSel=treeComponent.getSelectionModel().getSelection()[0];return treeSel.data.id==record.data.id?!1:-1!=treeSel.data.id.toString().indexOf("trwr")?!1:!0},GlobalFun.treeInternational=function(treeId){return"gr"==treeId?"个人":"tr"==treeId?"他人":""},GlobalFun.owerInternational=function(srcStr){return srcStr=srcStr.replace("@shoujianxiang@","收件箱").replace("@gxsjx@","共享收件箱").replace("@gr@","个人").replace("@gxwjj@","共享文件夹").replace("@gx@","共享")},GlobalFun.comboSelectFirstOrDefaultVal=function(com,defaultVal){var store=com.getStore();defaultVal?(new Ext.util.DelayedTask).delay(50,function(){com.setValue(parseInt(defaultVal))}):com.setValue(store.getRange()[0].data.Id)},GridManager.GridFilterMenuCheckItemInit=function(param){var menuCheckItem={group:param.group,text:param.text,myVal:param.myVal};return param.checked&&(menuCheckItem.checked=!0),param.firstClear?menuCheckItem.handler=function(btn,eve,suppressLoad){var panel=param.target,menu=param.componet;return menu.setText(param.text),menu.setTooltip(param.text),panel.getStore().filterMap.removeAtKey(param.filterKey),suppressLoad?void this.setChecked(suppressLoad):void panel.loadGrid()}:menuCheckItem.handler=function(btn,eve,suppressLoad){var panel=param.target,menu=param.componet;return menu.setText(param.text),menu.setTooltip(param.text),panel.getStore().filterMap.containsKey(param.filterKey)?panel.getStore().filterMap.replace(param.filterKey,param.myVal):panel.getStore().filterMap.add(param.filterKey,param.myVal),suppressLoad?void this.setChecked(suppressLoad):void panel.loadGrid()},menuCheckItem},GridManager.CreateGridFilterMenu=function(componet,store,param){componet.menu.add(GridManager.GridFilterMenuCheckItemInit({group:param.group,checked:!0,text:param.text,myVal:0,target:param.target,componet:param.componet,firstClear:!0,filterKey:param.filterKey})),store.each(function(record,index,total){componet.menu.add(GridManager.GridFilterMenuCheckItemInit({group:param.group,text:record.data.Name,myVal:record.data.Id,target:param.target,componet:param.componet,filterKey:param.filterKey}))})},GridManager.CreateGridFilterDateMenu=function(componet,param){componet.menu.add(GridManager.GridFilterMenuCheckItemInit({group:param.group,checked:!0,text:param.text,myVal:0,target:param.target,componet:param.componet,firstClear:!0,filterKey:param.filterKey}));var now=new Date,week=GlobalFun.GetNextDate(-7),mouth=GlobalFun.GetNextDate(-30),year=GlobalFun.GetNextDate(-365),obj=[{text:"一周",value:week+","+Ext.util.Format.date(now,"Y-m-d")},{text:"一月",value:mouth+","+Ext.util.Format.date(now,"Y-m-d")},{text:"一年",value:year+","+Ext.util.Format.date(now,"Y-m-d")}];Ext.Array.each(obj,function(item,index){componet.menu.add(GridManager.GridFilterMenuCheckItemInit({group:param.group,text:item.text,myVal:item.value,target:param.target,componet:param.componet,filterKey:param.filterKey}))}),componet.menu.add({group:param.group,text:"自定义时间段",handler:function(btn,eve,suppressLoad){var panel=param.target,menu=param.componet,win=Ext.create("Ext.window.Window",{modal:!0,width:500,height:120,resizable:!1,items:[{xtype:"form",itemId:"formId",autoScroll:!0,height:110,width:500,border:!1,bodyPadding:15,defaultType:"textfield",layout:{type:"table",columns:1},defaults:{labelAlign:"right",labelPad:15,width:340,labelWidth:125,maxLength:100,enableKeyEvents:!0,listeners:{keydown:function(field,e,opts){var me=this;if(e.getKey()==e.ENTER){var win=me.up("window");win.down("#submit").fireHandler(e)}}}},items:[{xtype:"fieldcontainer",colspan:2,width:490,fieldLabel:"使用时间",defaultType:"datetimefield",layout:{type:"hbox"},defaults:{labelAlign:"right",width:100},items:[{xtype:"datefield",format:"Y-m-d",itemId:"dateStar",vtype:"daterange",endDateField:"dateEnd"},{xtype:"label",margin:"0 0 0 5",width:20,text:"至"},{xtype:"datefield",format:"Y-m-d",itemId:"dateEnd",vtype:"daterange",startDateField:"dateStar"}]}]}],buttons:[{text:"确定",handler:function(){var form=win.down("#formId").getForm();if(form.isValid()){var searchFlag=!1,dateStarField=win.down("#dateStar"),dateEndField=win.down("#dateEnd"),dateStar=dateStarField.getValue(),dateEnd=dateEndField.getValue();(dateStar||dateEnd)&&(dateStar=Ext.util.Format.date(dateStar,"Y-m-d"),dateEnd=Ext.util.Format.date(dateEnd,"Y-m-d"),panel.getStore().filterMap.containsKey(param.filterKey)?panel.getStore().filterMap.replace(param.filterKey,dateStar+","+dateEnd):panel.getStore().filterMap.add(param.filterKey,dateStar+","+dateEnd),searchFlag=!0),searchFlag?(win.close(),panel.loadGrid()):win.close()}}},{text:"关闭",handler:function(){win.close()}}]});win.show(),menu.setText("自定义时间段"),menu.setTooltip("自定义时间段")}})},GridManager.CreateGridSelectCancelMenu=function(componet,grid){componet.menu.add([{text:"全选/取消",handler:function(btn,eve,suppressLoad){var sm=grid.getSelectionModel();sm.hasSelection()?sm.deselectAll(!0):sm.selectAll(!0)}},{text:"反选",handler:function(btn,eve,suppressLoad){for(var sm=grid.getSelectionModel(),i=0;i<grid.getStore().getCount();i++)sm.isSelected(i)?sm.deselect(i,!0):sm.select(i,!0)}}])};var stopClick=!1;DropDragControl.initializePatientDragZone=function(v,window){v.dragZone=Ext.create("Ext.dd.DragZone",v.getEl(),{ddGroup:window.groupName,isTarget:!1,getDragData:function(e){var sourceEl=e.getTarget();if(sourceEl){var selCount;selCount=window.pngClass.getPngSels().getCount();var oNewNode=document.createElement("div");return oNewNode.innerHTML="<span><img src='../../Content/images/pub/docDrag.png'/>x"+selCount+"</span>",oNewNode.id=Ext.id(),v.dragData={sourceEl:sourceEl,repairXY:Ext.fly(sourceEl).getXY(),ddel:oNewNode,patientData:""}}},getRepairXY:function(){return this.dragData.repairXY},endDrag:function(){stopClick=!0,new Ext.util.DelayedTask(function(){stopClick=!1}).delay(50)},onInvalidDrop:function(target,e,id){this.beforeInvalidDrop(target,e,id),this.cachedTarget&&(this.cachedTarget.isNotifyTarget&&this.cachedTarget.notifyOut(this,e,this.dragData),this.cacheTarget=null),this.proxy.repair(this.getRepairXY(e,this.dragData),this.afterRepair,this),this.afterInvalidDrop&&this.afterInvalidDrop(e,id)}})},DropDragControl.uninitPatientDragZone=function(v){v.dragZone&&v.dragZone.destroy()},DropDragControl.uninitHospitalDropZone=function(v){v.dropZone&&v.dropZone.destroy()},DropDragControl.initializeHospitalDropZone=function(v,window){v.dropZone=Ext.create("Ext.dd.DropZone",v.el,{ddGroup:window.groupName,getTargetFromEvent:function(e){return e.getTarget(".hospital-target")},onNodeOver:function(target,dd,e,data){return Ext.dd.DropZone.prototype.dropAllowed},onNodeDrop:function(target,dd,e,data){var curImg,pngClass=window.pngClass;pngClass.getPngAllMini().each(function(item,index,allItems){return item.getEl()&&item.getEl().id==target.id?void(curImg=item):void 0});var sortNum=curImg.sortNum,insertImgs=(curImg.tombstoneId,[]),moveFrontImg=[],moveBehindImgs=[],insertCount=parseInt(sortNum),imageList=window.down("MiniPngDDSortPanel").query("image");e.getPoint()[0]-curImg.getEl().getXY()[0]<=target.offsetWidth/2?(pngClass.getPngSels().each(function(item,index,allItems){insertImgs.push(item.tombstoneId)}),Ext.Array.each(imageList,function(item,index,allItems){item.sortNum<insertCount&&(Ext.Array.contains(insertImgs,item.tombstoneId)||moveFrontImg.push(item.tombstoneId))}),Ext.Array.each(imageList,function(item,index,allItems){item.sortNum>=insertCount&&(Ext.Array.contains(insertImgs,item.tombstoneId)||moveBehindImgs.push(item.tombstoneId))})):(pngClass.getPngSels().each(function(item,index,allItems){insertImgs.push(item.tombstoneId)}),Ext.Array.each(imageList,function(item,index,allItems){item.sortNum<=insertCount&&(Ext.Array.contains(insertImgs,item.tombstoneId)||moveFrontImg.push(item.tombstoneId))}),Ext.Array.each(imageList,function(item,index,allItems){item.sortNum>insertCount&&(Ext.Array.contains(insertImgs,item.tombstoneId)||moveBehindImgs.push(item.tombstoneId))}));var tombstoneIdList=moveFrontImg.concat(insertImgs,moveBehindImgs),param={};return param.tombstoneIdList=tombstoneIdList.join(),param.sessiontoken=Ext.util.Cookies.get("sessiontoken"),WsCall.call(GlobalConfig.Controllers.TombstoneGrid.SortTombstonePng,"SortTombstonePng",param,function(response,opts){var area=window.down("#AreaIdItemId"),row=window.down("#RowIdItemId");if(area.isValid()&&row.isValid()){pngClass.setAreaId(area.getValue()),pngClass.setRowId(row.getValue());var miniPngDDSortPanel=window.down("MiniPngDDSortPanel");miniPngDDSortPanel.removeAll(),pngClass.initPngPanel(miniPngDDSortPanel)}},function(response,opts){GlobalFun.errorProcess(response.code)||Ext.Msg.alert("失败",response.msg)},!0,"请稍候...",window.el),!0}})},GlobalFun.SetGridTitle=function(cardPanel,store,title){store.filterMap.getCount()>0||store.getProxy().extraParams.DateFilter?cardPanel.setTitle("查找结果 { "+title+" }"):cardPanel.setTitle(""+title)},GlobalFun.TreeSelChangeGrid=function(activeNum,gridPanel,title,isDfGrid){var cardPanel=GlobalConfig.ViewPort.down("#centerGridDisplayContainer");return cardPanel.getLayout().setActiveItem(activeNum),isDfGrid?void cardPanel.setTitle(""+title):(gridPanel.FirstLoad?GlobalFun.SetGridTitle(cardPanel,gridPanel.getStore(),title):(gridPanel.loadGrid(),gridPanel.FirstLoad=!0,GlobalFun.SetGridTitle(cardPanel,gridPanel.getStore(),title)),void gridPanel.fireEvent("selectionchange",gridPanel.getView(),gridPanel.getSelectionModel().getSelection()))},GlobalFun.ValidDateStartEnd=function(dateStarField,dateEndField){var sVal=dateStarField.getValue(),eVal=dateEndField.getValue();sVal&&!eVal?(dateEndField.allowBlank=!1,dateEndField.blankText="日期区间必须完整"):eVal&&!sVal?(dateStarField.allowBlank=!1,dateStarField.blankText="日期区间必须完整"):(dateEndField.allowBlank=!0,dateStarField.allowBlank=!0)},GlobalFun.onCheckChange=function(cmp,checked){var fieldset=cmp.up("fieldset");if(!fieldset.fistCheck){var cblist=fieldset.query("checkbox");Ext.Array.each(cblist,function(item){item.setValue(checked)})}},GlobalFun.createCheckboxCmp=function(){var me=this,suffix="-checkbox";return me.checkboxCmp=Ext.widget({xtype:"checkbox",hideEmptyLabel:!0,name:me.checkboxName||me.id+suffix,cls:me.baseCls+"-header"+suffix,itemId:me.myItemId,id:me.id+"-legendChk",listeners:{change:me.onCheckChange,scope:me}}),me.checkboxCmp},GlobalFun.Heartbeat=function(){new Ext.util.DelayedTask(function(){GlobalConfig.HeartbeatRunner.stopAll(),GlobalConfig.HeartbeatRunner.start({run:function(){var param={sessiontoken:GlobalFun.getSeesionToken()};WsCall.call(GlobalConfig.Controllers.Heartbeat,"Heartbeat",param,function(response,opts){},function(response,opts){},!1)},interval:6e5})}).delay(50)},GlobalFun.IsAllowFun=function(funName){var flag=!1;return flag=!0},GlobalFun.GridSearchInitFun=function(keyName,isDel,store,value){isDel?store.filterMap.removeAtKey(keyName):store.filterMap.containsKey(keyName)?store.filterMap.replace(keyName,value):store.filterMap.add(keyName,value)},GlobalFun.GetTomestoneImageSrc=function(state,tombstoneId,typeId){var imgaeName="alone";return 2==typeId?imgaeName="double":3==typeId&&(imgaeName="specil"),imgaeName+=1==state?"-empty":2==state?"-order":3==state?"-sale":4==state?"-zbury1":5==state?2==typeId?"-zbury3":"-zbury":"-empty","../../Content/images/tombstone/gif/"+imgaeName+".gif?currpage="+tombstoneId+"&randomTime="+(new Date).getTime()},GlobalFun.RefreshDetailCollapseState=function(){if(GlobalConfig.DetailAutoCollapse){var detailPanel=GlobalConfig.ViewPort.down("#centerGridDetailContainer");detailPanel.expand(),GlobalConfig.DetailAutoCollapse=!1}},GlobalFun.DetailCollapse=function(){var detailPanel=GlobalConfig.ViewPort.down("#centerGridDetailContainer");detailPanel.collapsed||(detailPanel.collapse(),GlobalConfig.DetailAutoCollapse=!0)},GlobalFun.JsonToArray=function(json){var arr=[];for(key in json){var obj={Id:key,Name:json[key]};arr.push(obj)}return arr},GlobalFun.isEmptyObject=function(obj){for(var n in obj)return!1;return!0};
//# sourceMappingURL=GlobalFun.js.map
Ext.define("chl.grid.BaseGrid",{alternateClassName:["BaseGrid"],alias:"widget.BaseGrid",extend:"Ext.grid.Panel",columnLines:!0,multiSelect:!0,features:[{ftype:"grouping",groupHeaderTpl:"{columnName}: {name} ({rows.length})项",disabled:!0,groupByText:"按当前列分组",showGroupsText:"显示分组"}],viewConfig:{loadingText:"<b>正在加载数据...</b>"},initComponent:function(){var me=this;me.on({itemclick:function(grid,record,hitem,index,e,opts){if(!e.ctrlKey&&!e.shiftKey){var sm=grid.getSelectionModel();sm.deselectAll(!0),sm.select(record,!0,!1)}},beforeitemmousedown:function(view,record,item,index,e,options){if(2==e.button){var sm=view.getSelectionModel();if(sm.hasSelection()){var sels=sm.getSelection();Ext.Array.contains(sels,record)||(sm.deselectAll(!0),sm.select(record,!0,!1))}else sm.select(record,!0,!1);return!1}return!0},itemmouseenter:function(me,record,item){item.style.cursor="pointer"},itemmouseleave:function(me,record,item){item.style.cursor="auto"}}),me.callParent(arguments)}});
//# sourceMappingURL=BaseGrid.js.map
Ext.define("chl.tree.BaseTree",{alias:"widget.BaseTree",extend:"Ext.tree.Panel",clearOnLoad:!1,alternateClassName:["BaseTree"],ddGroup:"FileDDGp",animate:!1,rootVisible:!1,frame:!1,frameHeader:!1,border:!1,initComponent:function(){var me=this;me.on({load:function(store,records,models,suc,opts){!models||models.length<=0||Ext.Array.each(models,function(item,index,alls){var interStr=GlobalFun.treeInternational(item.data.id);""!=interStr?item.data.text=interStr:item.data.text=GlobalFun.owerInternational(item.data.text)})},render:function(){}}),me.callParent(arguments)}});
//# sourceMappingURL=BaseTree.js.map
Ext.define("chl.toolbar.Pagingtoolbar",{alias:"widget.Pagingtoolbar",extend:"Ext.toolbar.Paging",dock:"bottom",displayInfo:!0,emptyMsg:"没有记录",beforePageText:"页数",afterPageText:"共 {0}",refreshText:"刷新当前页",firstText:"首页",lastText:"末页",nextText:"下页",prevText:"前页",layout:{overflowHandler:"Menu"},initComponent:function(){var me=this;me.callParent(arguments),me.on("render",function(){me.down("#refresh").hide()})}});
//# sourceMappingURL=Pagingtoolbar.js.map
Ext.define("WS.action.Base",{extend:"Ext.Action",alternateClassName:["ActionBase"],config:{targetView:null,category:""},getTargetView:function(){var me=this;return me.tgtView?"function"==typeof me.tgtView?me.tgtView():me.tgtView:null},setTargetView:function(tgtView){var me=this;me.tgtView=tgtView},statics:{actions:[],setTargetView:function(category,view){Ext.Array.each(ActionBase.actions,function(act,index){return act.category==category&&act.setTargetView(view),!0})},setWidth:function(category,width){Ext.Array.each(ActionBase.actions,function(act,index){return act.category==category&&act.setWidth(width),!0})},updateActions:function(category){var prms=arguments;Ext.Array.each(ActionBase.actions,function(act,index){return act.category==category&&act.updateStatus&&act.updateStatus(prms[1],prms[2],prms[3],prms[4],prms[5],prms[6]),!0})},getAction:function(itemId){var res;return Ext.Array.each(ActionBase.actions,function(act,index){return act.itemId==itemId?(res=act,!1):!0}),res}},setChecked:function(v){this.callEach("setChecked",[v])},setWidth:function(v){this.callEach("setWidth",[v])},constructor:function(config){config.scope=this,this.callParent([config]),config.updateStatus&&(this.updateStatus=config.updateStatus),WS.action.Base.actions.push(this)}});
//# sourceMappingURL=Base.js.map
Ext.define("WS.lib.WsCall",{alternateClassName:["WsCall"]});var constErrRes={success:!1,code:-1,msg:"response failed"};WsCall.addStatics({call:function(url,fname,param,successCall,failureCall,showLoadMask,loadMsg,maskEl,maskDelay,async){param.req="call",param.callname=fname;var isAsync=0==async?async:!0,doslm="undefined"==typeof showLoadMask||null===showLoadMask||1==showLoadMask;if(doslm){var callMask,taskWait=new Ext.util.DelayedTask(function(){loadMsg?(callMask=maskEl?maskEl:Ext.getBody(),callMask.mask(loadMsg)):(callMask=maskEl?maskEl:Ext.getBody(),callMask.mask("请稍候..."))});taskWait.delay(maskDelay?maskDelay:100)}Ext.Ajax.request({url:url,method:"GET",timeout:3e4,async:isAsync,success:function(response,opts){if(taskWait&&taskWait.cancel(),"undefined"!=typeof callMask&&null!==callMask&&callMask.unmask(),response.responseText.length>0&&"null"!=response.responseText){var res=Ext.JSON.decode(response.responseText);1==res.success?successCall(res,response,opts):failureCall(res,response,opts)}else constErrRes.msg="response failed (call:"+fname+");"+response.responseText,failureCall(constErrRes,response,opts)},failure:function(response,opts){taskWait&&taskWait.cancel(),"undefined"!=typeof callMask&&null!==callMask&&callMask.unmask(),constErrRes.msg="response failed(ajax) (call:"+fname+")",failureCall(constErrRes,response,opts)},headers:{AJaxCall:"true"},params:param})},pcall:function(url,fname,param,successCall,failureCall,showLoadMask,loadMsg,maskEl,maskDelay,async){param.req="call",param.callname=fname;var isAsync=0==async?async:!0,doslm="undefined"==typeof showLoadMask||null===showLoadMask||1==showLoadMask;if(doslm){var callMask,taskWait=new Ext.util.DelayedTask(function(){loadMsg?(callMask=maskEl?maskEl:Ext.getBody(),callMask.mask(loadMsg)):(callMask=maskEl?maskEl:Ext.getBody(),callMask.mask("请稍候..."))});taskWait.delay(maskDelay?maskDelay:100)}Ext.Ajax.request({url:url,method:"POST",timeout:3e4,async:isAsync,success:function(response,opts){if(taskWait&&taskWait.cancel(),"undefined"!=typeof callMask&&null!==callMask&&callMask.unmask(),response.responseText.length>0&&"null"!=response.responseText){var res=Ext.JSON.decode(response.responseText);1==res.success?successCall(res,response,opts):failureCall(res,response,opts)}else constErrRes.msg="response failed (call:"+fname+");"+response.responseText,failureCall(constErrRes,response,opts)},failure:function(response,opts){taskWait&&taskWait.cancel(),"undefined"!=typeof callMask&&null!==callMask&&callMask.unmask(),constErrRes.msg="response failed(ajax:post) (call:"+fname+")",failureCall(constErrRes,response,opts)},headers:{AJaxCall:"true"},params:param})},jsonp:function(url,fname,param,successCall,failureCall,showLoadMask,loadMsg,maskEl,maskDelay,async){param.req="call",param.callname=fname;var isAsync=0==async?async:!0,doslm="undefined"==typeof showLoadMask||null===showLoadMask||1==showLoadMask;if(doslm){var callMask,taskWait=new Ext.util.DelayedTask(function(){loadMsg?(callMask=maskEl?maskEl:Ext.getBody(),callMask.mask(loadMsg)):(callMask=maskEl?maskEl:Ext.getBody(),callMask.mask("请稍候..."))});taskWait.delay(maskDelay?maskDelay:100)}Ext.data.JsonP.request({url:url,method:"POST",timeout:3e4,async:isAsync,success:function(response,opts){if(taskWait&&taskWait.cancel(),"undefined"!=typeof callMask&&null!==callMask&&callMask.unmask(),response.responseText.length>0&&"null"!=response.responseText){var res=Ext.JSON.decode(response.responseText);1==res.success?successCall(res,response,opts):failureCall(res,response,opts)}else constErrRes.msg="response failed (call:"+fname+");"+response.responseText,failureCall(constErrRes,response,opts)},failure:function(response,opts){taskWait&&taskWait.cancel(),"undefined"!=typeof callMask&&null!==callMask&&callMask.unmask(),constErrRes.msg="response failed(ajax) (call:"+fname+")",failureCall(constErrRes,response,opts)},headers:{"http://localhost:8222":"true"},params:param})},downloadFile:function(url,rcName,param){var me=this,sParam=Ext.Object.toQueryString(param);sParam.length>0&&(sParam="&"+sParam);var url=url+"?req=rc&rcname="+rcName+sParam;if("undefined"==typeof me.iframe){var iframe=document.createElement("iframe");me.iframe=iframe,document.body.appendChild(me.iframe)}me.iframe.src=url,me.iframe.style.display="none"},callchain:function(callname){var host=window.location.host,name=userInfoData.accountName,iframe=document.getElementById("callchain");iframe&&document.body.removeChild(iframe),iframe=document.createElement("script"),iframe.id="callchain",iframe.attachEvent?iframe.onreadystatechange=function(){"loaded"==this.readyState}:(iframe.onload=function(){},iframe.onerror=function(){});var ranid=Ext.id()+(new Date).getTime();iframe.src="http://"+localPt.ip+":"+localPt.port+"/ifram.html?call="+callname+"&hosturl="+host+"&sessiontoken="+sessionToken+"&username="+name+"&ranid="+ranid+"@",document.body.appendChild(iframe)},scoutlogin:function(callname,fileid,callback){var href=window.location.href,name=userInfoData.accountName,iframe=document.getElementById("scoutlogin");iframe&&document.body.removeChild(iframe),iframe=document.createElement("script"),iframe.id="scoutlogin",iframe.attachEvent?iframe.onreadystatechange=function(){"loaded"==this.readyState&&callback&&(new Ext.util.DelayedTask).delay(50,function(){callback()})}:(iframe.onload=function(){callback&&(new Ext.util.DelayedTask).delay(500,function(){callback()})},iframe.onerror=function(){callback&&(new Ext.util.DelayedTask).delay(500,function(){callback()})});var fid="";fileid&&(fid=fileid);var ranid=Ext.id()+(new Date).getTime();iframe.src="http://"+scoutLogin.ip+":"+scoutLogin.port+"/ifram1.html?call="+callname+"&fileid="+fid+"&hrefurl="+href+"&sessiontoken="+sessionToken+"&username="+name+"&ranid="+ranid+"@",document.body.appendChild(iframe)},callOtherDomain:function(absPath,fileId,winType){var iframe=(encodeURI(absPath),document.getElementById("otherDomain"));iframe&&document.body.removeChild(iframe);var fid=fileId,param={};param.sessiontoken=sessionToken,WsCall.call("getjsessionid",param,function(response,opts){function afterifload(){var param={};param.sessiontoken=sessionToken,WsCall.call("getiframemsg",param,function(response,opts){Ext.getBody().unmask();var data=response.data;iframeFileUp(data,winType)},function(response,opts){var fpa=winType.down("#filePath");fpa&&fpa.reset(),Ext.getBody().unmask(),1862271269!=response.code&&(errorProcess(response.code)||Ext.Msg.alert("失败",response.msg))},!1)}var jsid=response.data;Ext.getBody().mask("正在使用本地打印机,请稍候..."),iframe=document.createElement("script"),iframe.id="otherDomain",iframe.attachEvent?iframe.onreadystatechange=function(){"loaded"==this.readyState&&afterifload()}:(iframe.onload=function(){afterifload()},iframe.onerror=function(){afterifload()});var host=window.location.host,ranid=Ext.id()+(new Date).getTime(),isdoc=!1;"docwin"==winType.pngGroup&&(isdoc=!0),iframe.src="http://"+localPt.ip+":"+localPt.port+"/ifram.html?call=file&localurl="+host+"&isdoc="+isdoc+"&pttype="+userConfig.prType+"&sessiontoken="+sessionToken+"&jsid="+jsid+"&fileid="+fid+"&ranid="+ranid+"@",document.body.appendChild(iframe)},function(response,opts){errorProcess(response.code)||Ext.Msg.alert("失败",response.msg)},!0,"",Ext.getBody(),10)}}),Ext.define("html5uploadclass",{config:{xhr:null,fisrtLoad:!0,file:null,formName:"",files:null,msgidArr:[],index:1,length:0,url:"",html5UploadInint:function(files,url,formName,eventFuns){var me=this;1==me.index&&(me.length=files.length),me.files=files,me.file=files[me.index-1],me.formName=formName,me.xhr=new XMLHttpRequest,eventFuns&&(me.xhr.upload.addEventListener("progress",eventFuns.uploadProgress,!1),me.xhr.addEventListener("load",eventFuns.uploadComplete,!1),me.xhr.addEventListener("error",eventFuns.uploadFailed,!1),me.xhr.addEventListener("abort",eventFuns.uploadCanceled,!1)),me.url=url},uploadStart:function(){var me=this,fd=new FormData;fd.append(me.formName,me.file),me.xhr.open("POST",me.url),me.xhr.send(fd)}},constructor:function(cfg){this.initConfig(cfg),this.xhr=null,this.fisrtLoad=!0,this.file=null,this.files=null,this.msgidArr=[],this.index=1,this.length=0,this.url=""}});
//# sourceMappingURL=WsCall_base.js.map
Ext.define("WS.lib.SearchField",{extend:"Ext.form.field.Trigger",alias:"widget.searchfield",trigger1Cls:Ext.baseCSSPrefix+"form-clear-trigger",trigger2Cls:Ext.baseCSSPrefix+"form-search-trigger",hasSearch:!1,paramName:"FullName",paramObject:!1,paramNameArr:[],initComponent:function(){var me=this;me.callParent(arguments),me.on("specialkey",function(f,e){e.getKey()==e.ENTER&&this.onTrigger2Click()},me)},boxready:function(){var me=this;me.callParent(),me.triggerEl.item(0).up("td").setWidth(0),me.triggerEl.item(0).setDisplayed("none")},setSearchStatus:function(search){var me=this;search?(me.hasSearch=!0,me.triggerEl.item(0).up("td").setWidth(17),me.triggerEl.item(0).setDisplayed("block"),me.doComponentLayout()):(me.hasSearch=!1,me.triggerEl.item(0).up("td").setWidth(0),me.triggerEl.item(0).setDisplayed("none"),me.doComponentLayout())},onTrigger1Click:function(){var me=this,store=me.store,proxy=store.getProxy();me.hasSearch&&(me.setValue(""),proxy.extraParams.filter=Ext.JSON.decode(proxy.extraParams.filter),me.paramObject?Ext.Array.each(me.paramNameArr,function(key){delete proxy.extraParams.filter[key],store.filterMap.removeAtKey(key)}):(delete proxy.extraParams.filter[me.paramName],store.filterMap.removeAtKey(me.paramName)),proxy.extraParams.filter=Ext.JSON.encode(proxy.extraParams.filter),proxy.extraParams.start=0,proxy.extraParams.refresh=1,store.load(),proxy.extraParams.refresh=null,me.hasSearch=!1,me.triggerEl.item(0).up("td").setWidth(0),me.triggerEl.item(0).setDisplayed("none"),me.doComponentLayout())},onTrigger2Click:function(){var me=this,store=me.store,proxy=store.getProxy(),value=me.getValue();return value.length<1?void me.onTrigger1Click():(me.isValid()&&(proxy.extraParams.filter=Ext.JSON.decode(proxy.extraParams.filter),me.paramObject?Ext.Array.each(me.paramNameArr,function(key){var tempObj={};tempObj[me.paramName]=value,proxy.extraParams.filter[key]=tempObj,store.filterMap.containsKey(key)?store.filterMap.replace(key,tempObj):store.filterMap.add(key,tempObj)}):(proxy.extraParams.filter[me.paramName]=value,store.filterMap.containsKey(me.paramName)?store.filterMap.replace(me.paramName,value):store.filterMap.add(me.paramName,value)),proxy.extraParams.filter=Ext.JSON.encode(proxy.extraParams.filter),proxy.extraParams.start=0,proxy.extraParams.refresh=1,store.load(),proxy.extraParams.refresh=null),me.hasSearch=!0,me.triggerEl.item(0).up("td").setWidth(17),me.triggerEl.item(0).setDisplayed("block"),void me.doComponentLayout())}});
//# sourceMappingURL=SearchField.js.map
Ext.define("Ext.ux.form.field.DateTime",{extend:"Ext.form.FieldContainer",mixins:{field:"Ext.form.field.Field"},alias:"widget.datetimefield",layout:"hbox",width:200,height:22,combineErrors:!0,mySqlType:"time",tmpcId:"",doSearch:!1,dateCfg:{},timeHCfg:{},timeMCfg:{},timeICfg:{},initComponent:function(){var me=this;me.buildField(),me.callParent(),this.dateField=this.down("datefield"),this.timeHField=this.down("#sendTimeHouer"+this.tmpcId),this.timeMField=this.down("#sendTimeMin"+this.tmpcId),this.timeIField=this.down("#sendTimeSec"+this.tmpcId),me.initField()},buildField:function(){var me=this;if(me.items=[],("date"==me.mySqlType||"datetime"==me.mySqlType)&&me.items.push(Ext.apply({xtype:"datefield",itemId:"sendDate"+me.tmpcId,name:"sendDate"+me.tmpcId,format:"Y-m-d",width:90,submitValue:!1,blankText:"日期不能为空",allowBlank:!1},me.dateCfg)),("time"==me.mySqlType||"datetime"==me.mySqlType)&&me.items.push(Ext.apply({itemId:"sendTimeHouer"+me.tmpcId,name:"sendTimeHouer"+me.tmpcId,xtype:"numberfield",maxText:"时最大为23",minText:"时最小为0",submitValue:!1,allowDecimals:!1,width:40,minValue:0,maxValue:23,blankText:"不能为空",allowBlank:!1},me.timeHCfg),Ext.apply({itemId:"sendTimeMin"+me.tmpcId,name:"sendTimeMin"+me.tmpcId,xtype:"numberfield",maxText:"分最大为59",minText:"分最小为0",submitValue:!1,allowDecimals:!1,width:40,minValue:0,maxValue:59,blankText:"不能为空",allowBlank:!1},me.timeMCfg),Ext.apply({itemId:"sendTimeSec"+me.tmpcId,name:"sendTimeSec"+me.tmpcId,xtype:"numberfield",maxText:"秒最大为59",minText:"秒最小为0",submitValue:!1,allowDecimals:!1,width:40,minValue:0,maxValue:59,blankText:"不能为空",allowBlank:!1},me.timeICfg)),me.doSearch){var serTmp=Ext.clone(me.items);"date"==me.mySqlType?me.items.push({margin:"0 0 0 5",xtype:"displayfield",width:20,value:"--"}):me.items.push({margin:"0 0 0 5",xtype:"displayfield",width:20,value:"--"}),Ext.Array.each(serTmp,function(item,index,alls){("numberfield"==item.xtype||"datefield"==item.xtype)&&(item.name="end_"+item.name,item.itemId="end_"+item.itemId),"hidden"==item.xtype&&(item.name="end_"+item.name,item.myXtype="end_"+item.myXtype,item.itemId="end_"+item.itemId,item.submitValue=!1),me.items.push(item)})}},getValue:function(){var me=this,strTime="";if("date"==me.mySqlType){var strTime=Ext.util.Format.date(me.down("#sendDate"+me.tmpcId).getValue(),"Y-m-d");if(me.doSearch){var endTime=Ext.util.Format.date(me.down("#end_sendDate"+me.tmpcId).getValue(),"Y-m-d");strTime+=","+endTime}return strTime}if("datetime"==me.mySqlType){var strTime=Ext.util.Format.date(me.down("#sendDate"+me.tmpcId).getValue(),"Y-m-d"),tmpH=me.down("#sendTimeHouer"+me.tmpcId).getValue();tmpH=10>tmpH?"0"+tmpH:tmpH;var tmpM=me.down("#sendTimeMin"+me.tmpcId).getValue();tmpM=10>tmpM?"0"+tmpM:tmpM;var tmpS=me.down("#sendTimeSec"+me.tmpcId).getValue();if(tmpS=10>tmpS?"0"+tmpS:tmpS,strTime+=" "+tmpH+":"+tmpM+":"+tmpS,me.doSearch){var endTime=Ext.util.Format.date(me.down("#end_sendDate"+me.tmpcId).getValue(),"Y-m-d"),tmpH1=me.down("#end_sendTimeHouer"+me.tmpcId).getValue(),tmpM1=me.down("#end_sendTimeMin"+me.tmpcId).getValue(),tmpS1=me.down("#end_sendTimeSec"+me.tmpcId).getValue();tmpH1=10>tmpH1?"0"+tmpH1:tmpH1,tmpM1=10>tmpM1?"0"+tmpM1:tmpM1,tmpS1=10>tmpS1?"0"+tmpS1:tmpS1,endTime+=" "+tmpH1+":"+tmpM1+":"+tmpS1,strTime+=","+endTime}return strTime}if("time"==me.mySqlType){var tmpH=me.down("#sendTimeHouer"+me.tmpcId).getValue();tmpH=10>tmpH?"0"+tmpH:tmpH;var tmpM=me.down("#sendTimeMin"+me.tmpcId).getValue();tmpM=10>tmpM?"0"+tmpM:tmpM;var tmpS=me.down("#sendTimeSec"+me.tmpcId).getValue();tmpS=10>tmpS?"0"+tmpS:tmpS;var strTime=tmpH+":"+tmpM+":"+tmpS;if(me.doSearch){var tmpH1=me.down("#end_sendTimeHouer"+me.tmpcId).getValue(),tmpM1=me.down("#end_sendTimeMin"+me.tmpcId).getValue(),tmpS1=me.down("#end_sendTimeSec"+me.tmpcId).getValue();tmpH1=10>tmpH1?"0"+tmpH1:tmpH1,tmpM1=10>tmpM1?"0"+tmpM1:tmpM1,tmpS1=10>tmpS1?"0"+tmpS1:tmpS1;var endTime=tmpH1+":"+tmpM1+":"+tmpS1;strTime+=","+endTime}return strTime}return null},setValue:function(value,useval){var me=this;if(("date"==me.mySqlType||"datetime"==me.mySqlType)&&me.dateField.setValue(me.dateCfg.value?me.dateCfg.value:Ext.util.Format.date(new Date,"Y-m-d")),("time"==me.mySqlType||"datetime"==me.mySqlType)&&(me.timeHField.setValue(me.timeHCfg.value?me.timeHCfg.value:0),me.timeMField.setValue(me.timeMCfg.value?me.timeMCfg.value:0),me.timeIField.setValue(me.timeICfg.value?me.timeICfg.value:0),useval)){var date,timeH=value.split(":")[0],timeM=value.split(":")[1],timeI=value.split(":")[2];"datetime"==me.mySqlType&&(date=value.split("T")[0]),date&&(date=timeH.split("T")[0],timeH=timeH.split("T")[1],me.dateField.setValue(date)),me.timeHField.setValue(timeH),me.timeMField.setValue(timeM),me.timeIField.setValue(timeI)}},isFileUpload:function(){return"file"===this.inputType},getSubmitData:function(){var me=this,value=me.getValue(),name=me.name,data={};if(!me.disabled&&me.submitValue&&!me.isFileUpload()){if(value&&"datetime"==me.mySqlType){var re=/\s/g;value=value.replace(re,"T")}return data[""+name]=value,value&&name?data:null}},setFieldStyle:function(style){var me=this,inputEl=me.timeHField?me.timeHField.inputEl:null,inputEl1=me.timeMField?me.timeMField.inputEl:null,inputEl2=me.timeIField?me.timeIField.inputEl:null,inputEl3=me.dateField?me.dateField.inputEl:null;inputEl&&inputEl.applyStyles(style),inputEl1&&inputEl1.applyStyles(style),inputEl2&&inputEl2.applyStyles(style),inputEl3&&inputEl3.applyStyles(style),me.fieldStyle=style,me.timeHField.fieldStyle=style,me.timeMField.fieldStyle=style,me.timeMField.fieldStyle=style},setReadOnly:function(readOnly){var me=this,inputEl=me.timeHField?me.timeHField.inputEl:null,inputEl1=me.timeMField?me.timeMField.inputEl:null,inputEl2=me.timeIField?me.timeIField.inputEl:null,inputEl3=me.dateField?me.dateField.inputEl:null;readOnly=!!readOnly,me[readOnly?"addCls":"removeCls"](me.readOnlyCls),me.readOnly=readOnly,inputEl?(inputEl.dom.readOnly=readOnly,me.timeHField.setReadOnly(readOnly)):me.rendering&&(me.timeHField.setReadOnlyOnBoxReady=!0),inputEl1?(inputEl1.dom.readOnly=readOnly,me.timeMField.setReadOnly(readOnly)):me.rendering&&(me.timeMField.setReadOnlyOnBoxReady=!0),inputEl2?(inputEl2.dom.readOnly=readOnly,me.timeIField.setReadOnly(readOnly)):me.rendering&&(me.timeIField.setReadOnlyOnBoxReady=!0),inputEl3?(inputEl3.dom.readOnly=readOnly,me.dateField.setReadOnly(readOnly)):me.rendering&&(me.dateField.setReadOnlyOnBoxReady=!0),me.updateLayout(),me.fireEvent("writeablechange",me,readOnly)}});
//# sourceMappingURL=DateTimeField.js.map
Ext.define("Ext.ux.CheckColumn",{extend:"Ext.grid.column.Column",alias:"widget.checkcolumn",constructor:function(){this.addEvents(),this.callParent(arguments)},processEvent:function(type,view,cell,recordIndex,cellIndex,e){if("mousedown"==type||"keydown"==type&&(e.getKey()==e.ENTER||e.getKey()==e.SPACE)){var record=view.panel.store.getAt(recordIndex),dataIndex=this.dataIndex,checked=!record.get(dataIndex);return record.set(dataIndex,checked),record.commit(),this.fireEvent("checkchange",this,recordIndex,checked),!1}return this.callParent(arguments)},renderer:function(value){var cssPrefix=Ext.baseCSSPrefix,cls=[cssPrefix+"grid-checkheader"];return value&&cls.push(cssPrefix+"grid-checkheader-checked"),'<div class="'+cls.join(" ")+'">&#160;</div>'}});
//# sourceMappingURL=checkcol.js.map
function getContentByNType(ntype,data,bodyFields){var reStr="";if(0==ntype){reStr="你有一封新传真<br/>";for(var i=0;i<bodyFields.length;i++)"param2"!=bodyFields[i]?"param3"==bodyFields[i]&&(reStr+="传真位置:"+owerInternational(data[bodyFields[i]])):reStr+="发件人:"+data[bodyFields[i]]+"<br/>";return reStr}if(1==ntype)return reStr;if(2==ntype){reStr="你有一条新短信<br/>";for(var i=0;i<bodyFields.length;i++)"param2"!=bodyFields[i]?"param3"==bodyFields[i]&&(reStr+="短信位置:"+owerInternational(data[bodyFields[i]])):reStr+="发件人:"+data[bodyFields[i]]+"<br/>";return reStr}if(3==ntype){reStr="传真发送成功<br/>";for(var i=0;i<bodyFields.length;i++)"param2"!=bodyFields[i]?"param3"==bodyFields[i]&&(reStr+="主题:"+data[bodyFields[i]]):reStr+="收件人:"+data[bodyFields[i]]+"<br/>";return reStr}if(4==ntype){reStr="传真发送失败<br/>";for(var i=0;i<bodyFields.length;i++)"param2"!=bodyFields[i]?"param3"==bodyFields[i]&&(reStr+="主题:"+data[bodyFields[i]]):reStr+="收件人:"+data[bodyFields[i]]+"<br/>";return reStr}if(5==ntype){reStr="短信发送成功<br/>";for(var i=0;i<bodyFields.length;i++)if("param2"!=bodyFields[i])"param3"==bodyFields[i]&&(reStr+="主题:"+data[bodyFields[i]]);else{var myparam2=data[bodyFields[i]];-1==myparam2.indexOf("#")?reStr+="短信条数:"+myparam2+"<br/>":(myparam2=myparam2.substring(1,myparam2.length),reStr+="收件人:"+myparam2+"<br/>")}return reStr}if(6==ntype){reStr="短信发送失败<br/>";for(var i=0;i<bodyFields.length;i++)if("param2"!=bodyFields[i])"param3"==bodyFields[i]&&(reStr+="主题:"+data[bodyFields[i]]);else{var myparam2=data[bodyFields[i]];-1==myparam2.indexOf("#")?reStr+="短信条数:"+myparam2+"<br/>":(myparam2=myparam2.substring(1,myparam2.length),reStr+="收件人:"+myparam2+"<br/>")}return reStr}if(7==ntype){reStr="有新文档等待你的审批<br/>";for(var i=0;i<bodyFields.length;i++)"param2"!=bodyFields[i]||(reStr+="提交人:"+data[bodyFields[i]]+"<br/>");return reStr}if(8==ntype){reStr="通过审批<br/>";for(var i=0;i<bodyFields.length;i++)"param2"!=bodyFields[i]?"param3"==bodyFields[i]&&(reStr+="结束时间:"+data[bodyFields[i]]):reStr+="任务ID:"+data[bodyFields[i]]+"<br/>";return reStr}if(9==ntype){reStr="未通过审批<br/>";for(var i=0;i<bodyFields.length;i++)"param2"!=bodyFields[i]?"param3"==bodyFields[i]&&(reStr+="结束时间:"+data[bodyFields[i]]):reStr+="任务ID:"+data[bodyFields[i]]+"<br/>";return reStr}if(10==ntype){for(var i=0;i<bodyFields.length;i++)"param2"!=bodyFields[i]||(reStr+=""+data[bodyFields[i]]+"<br/>");return reStr}if(11==ntype){for(var i=0;i<bodyFields.length;i++)if("param3"!=bodyFields[i]);else{var msgSt="";if(0!=data[bodyFields[i]]){var wrStr="";(1&data[bodyFields[i]])>0&&(wrStr+="接收传真,"),(64&data[bodyFields[i]])>0&&(wrStr+="工作流审批,"),(32&data[bodyFields[i]])>0&&(wrStr+="管理员,"),wrStr=wrStr.substring(0,wrStr.length-1),msgSt="赋予您的职责是:"+wrStr}else msgSt="已经收回委任给你的职责";reStr+=""+msgSt+"<br/>"}return reStr}}Ext.define("Ext.ux.PreviewPlugin",{extend:"Ext.AbstractPlugin",alias:"plugin.preview",requires:["Ext.grid.feature.RowBody","Ext.grid.feature.RowWrap"],hideBodyCls:"x-grid-row-body-hidden",bodyField:"",bodyFields:[],previewExpanded:!0,constructor:function(config){this.callParent(arguments);var bodyField=this.bodyField,bodyFields=this.bodyFields,hideBodyCls=this.hideBodyCls,section=this.getCmp(),features=[{ftype:"rowbody",getAdditionalData:function(data,idx,record,orig,view){var o=Ext.grid.feature.RowBody.prototype.getAdditionalData.apply(this,arguments),type=data[bodyField],rowBodyStr=getContentByNType(type,data,bodyFields);return Ext.apply(o,{rowBody:rowBodyStr,rowBodyCls:section.previewExpanded?"":hideBodyCls}),o}},{ftype:"rowwrap"}];section.previewExpanded=this.previewExpanded,section.features||(section.features=[]),section.features=features.concat(section.features)},toggleExpanded:function(expanded){var view=this.getCmp();this.previewExpanded=view.previewExpanded=expanded,view.refresh()}});
//# sourceMappingURL=GridPreviewPlugin.js.map
var mykeycodeConvert={32:" ",48:"0","48s":")",49:"1","49s":"!",50:"2","50s":"@",51:"3","51s":"#",52:"4","52s":"$",53:"5","53s":"%",54:"6","54s":"^",55:"7","55s":"&",56:"8","56s":"*",57:"9","57s":"(",65:"a","65s":"A",66:"b","66s":"B",67:"c","67s":"C",68:"d","68s":"D",69:"e","69s":"E",70:"f","70s":"F",71:"g","71s":"G",72:"h","72s":"H",73:"i","73s":"I",74:"j","74s":"J",75:"k","75s":"K",76:"l","76s":"L",77:"m","77s":"M",78:"n","78s":"N",79:"o","79s":"O",80:"p","80s":"P",81:"q","81s":"Q",82:"r","82s":"R",83:"s","83s":"S",84:"t","84s":"T",85:"u","85s":"U",86:"v","86s":"V",87:"w","87s":"W",88:"x","88s":"X",89:"y","89s":"Y",90:"z","90s":"Z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",186:";","186s":":",187:"=","187s":"+",188:",","188s":"<",189:"-","189s":"_",190:".","190s":">",191:"/","191s":"?",192:"`","192s":"~",219:"[","219s":"{",220:"\\","220s":"|",221:"]","221s":"}",222:"'","222s":'"'};Ext.define("Ext.ux.form.field.MyPasswordField",{extend:"Ext.form.field.Text",alias:"widget.MyPasswordField",keyCodeArr:[],inputType:"password",replaceChar:"●",onKeyDown:function(e){var me=this,keycode=e.getKey();if(e.ctrlKey)keycode!=e.BACKSPACE&&(me.keyCodeArr=[]);else if(32==keycode||keycode>=65&&90>=keycode||keycode>=48&&57>=keycode||keycode>=96&&107>=keycode||keycode>=109&&111>=keycode||keycode>=186&&192>=keycode||keycode>=219&&222>=keycode||keycode==e.BACKSPACE){var selectedText;window.getSelection?selectedText=window.getSelection():document.selection&&(selectedText=document.selection.createRange().text);var length=selectedText.toString().length;if(keycode!=e.BACKSPACE)length&&length>0&&(me.keyCodeArr=[]),keycode>=65&&90>=keycode||keycode>=48&&57>=keycode||keycode>=186&&192>=keycode||keycode>=219&&222>=keycode?e.shiftKey?me.keyCodeArr.push(mykeycodeConvert[keycode+"s"]):me.keyCodeArr.push(mykeycodeConvert[keycode]):(32==keycode||keycode>=96&&107>=keycode||keycode>=109&&111>=keycode)&&me.keyCodeArr.push(mykeycodeConvert[keycode]);else if(length&&length>0)for(var i=0;length>i;i++)me.keyCodeArr.pop();else me.keyCodeArr.pop();for(var strVal="",i=0;i<me.keyCodeArr.length;i++)strVal+=me.replaceChar;me.setValue(strVal,!0),e.stopEvent()}this.fireEvent("keydown",this,e)},onKeyUp:function(e){this.fireEvent("keyup",this,e)},onKeyPress:function(e){this.fireEvent("keypress",this,e)},initComponent:function(){var me=this;me.keyCodeArr=[],me.callParent()},getValue:function(){for(var me=this,val=me.rawToValue(me.processRawValue(me.getRawValue())),strVal="",i=0;i<me.keyCodeArr.length;i++)strVal+=me.replaceChar;return me.value=strVal,val},rawToValue:function(rawValue){return rawValue},processRawValue:function(value){return value},getRawValue:function(){var me=this,v=me.keyCodeArr.join("");return me.rawValue=v,v},setRawValue:function(value){var me=this;return value=Ext.value(me.transformRawValue(value),""),me.rawValue=value,me.inputEl&&(me.inputEl.dom.value=value),value},transformRawValue:function(value){return value},valueToRaw:function(value){return""+Ext.value(value,"")},setValue:function(value,nopush){var me=this,myval=me.valueToRaw(value);if(!nopush){me.keyCodeArr=[];for(var i=0;i<myval.length;i++)me.keyCodeArr.push(myval.charAt(i))}for(var strVal="",i=0;i<me.keyCodeArr.length;i++)strVal+=me.replaceChar;return me.setRawValue(strVal),me.mixins.field.setValue.call(me,strVal)},onBoxReady:function(){var me=this;me.inputEl.dom.style.imeMode="disabled",me.inputEl.on("dblclick",function(){me.selectText()}),me.callParent()}});
//# sourceMappingURL=MyPasswordfield.js.map
Ext.define("Ext.ux.form.field.Html5FileUpload",{extend:"Ext.form.field.File",alias:"widget.Html5FileUpload",accept:"*/*",supType:["xls","xlsx"],style:"",uploadUrl:"",progressContainerEl:"",progressEl:"",countEl:"",currentFile:0,totalFile:0,fileNameLabelEl:"",multipleDataObj:{},delayTask:new Ext.util.DelayedTask,onRender:function(){var inputEl,me=this;me.callParent(arguments),inputEl=me.inputEl,inputEl.dom.name="",me.createFileInput(),me.buttonOnly&&me.inputCell.setDisplayed(!1),me.browseButtonWrap.dom.style.width=me.browseButtonWrap.dom.lastChild.offsetWidth+me.buttonEl.getMargin("lr")+"px",Ext.isIE&&me.buttonEl.repaint()},sendFile:function(file,scope){var me=this;me.FileUpload(file,scope)},FileUpload:function(file,scope){var xhr=new XMLHttpRequest,fd=new FormData,xhr=new XMLHttpRequest;scope.updatePropress(xhr,scope),xhr.open("POST",scope.uploadUrl,!0),xhr.onreadystatechange=function(){if(4==xhr.readyState&&200==xhr.status){var data=Ext.JSON.decode(xhr.responseText);scope.multipleDataObj[file.name]=data.data,scope.progressEl.dom.value=100,scope.currentFile++,scope.countEl.dom.innerHTML="文件: "+scope.currentFile+"/"+scope.totalFile,scope.currentFile==scope.totalFile&&(scope.currentFile=0,scope.totalFile=0,GlobalFun.isEmptyObject(scope.multipleDataObj)||(scope.delayTask.cancel(),scope.delayTask.delay(100,function(){ActionManager.showUpLoadExcelError(scope.multipleDataObj),scope.multipleDataObj={}})))}},fd.append("fileUpload",file),xhr.send(fd)},sendFiles:function(files){var me=this;me.progressEl.dom.value=0,me.countEl.dom.innerHTML="文件: 1/"+files.length,me.totalFile=Ext.clone(files.length);for(var str="",i=0;i<files.length;i++)str+=files[i].name+";";me.fileNameLabelEl.dom.innerHTML=str;for(var i=0;i<files.length;i++)new me.FileUpload(files[i],me)},updatePropress:function(xhr,scope){this.xhr=xhr,this.xhr.upload.addEventListener("progress",function(e){if(e.lengthComputable){var percentage=Math.round(100*e.loaded/e.total);scope.progressEl.dom.value=percentage}},!1),xhr.upload.addEventListener("load",function(e){},!1)},createFileInput:function(){var me=this;me.fileInputEl=me.buttonEl.createChild({name:me.getName(),id:me.id+"-fileInputEl",cls:Ext.baseCSSPrefix+"form-file-input",tag:"input",type:"file",size:1,accept:me.accept,multiple:"multiple",style:""}),me.fileInputEl.on({scope:me,change:me.onFileChange});var dropzone=me.el.dom;dropzone.ondragover=dropzone.ondragenter=function(event){event.stopPropagation(),event.preventDefault()},dropzone.ondrop=function(event){if(event.stopPropagation(),event.preventDefault(),Ext.isIE)return void Ext.Msg.alert("消息","您的浏览器不支持Html5上传,请更换浏览器或升级版本。");for(var returnFlag=(me.supType,!0),files=event.dataTransfer.files,str="",i=0;i<files.length;i++){str+=files[i].name+";";var fNmae=files[i].name,fType=fNmae.substring(fNmae.lastIndexOf(".")+1,fNmae.length).toLowerCase();Ext.Array.each(me.supType,function(rec){return rec==fType?(returnFlag=!1,!1):void 0})}if(returnFlag)return void Ext.Msg.alert("添加文件","不支持的文件格式！");me.progressEl.dom.value=0,me.countEl.dom.innerHTML="文件: 1/"+files.length,me.totalFile=Ext.clone(files.length),me.fileNameLabelEl.dom.innerHTML=str;for(var i=0;i<files.length;i++)me.sendFile(files[i],me)},me.fileNameLabelEl=me.triggerWrap.up("#"+me.id).createChild({name:me.getName(),style:"width:"+me.getWidth()+"px;padding:5px 5px 5px 5px;",id:me.id+"-fileInputFileNameLabelEl",cls:Ext.baseCSSPrefix+"form-file-input-fileNameLabel",tag:"div"}),me.progressContainerEl=me.triggerWrap.up("#"+me.id).createChild({name:me.getName(),style:"width:"+me.getWidth()+"px;padding:5px 5px 5px 5px;",id:me.id+"-fileInputProgressContainerEl",cls:Ext.baseCSSPrefix+"form-file-input-progressContainer",tag:"div"}),me.progressEl=me.progressContainerEl.createChild({name:me.getName(),style:"width:"+(me.getWidth()-120)+"px;",value:0,max:100,id:me.id+"-fileInputProgressEl",cls:Ext.baseCSSPrefix+"form-file-input-progress",tag:"progress"}),me.countEl=me.progressContainerEl.createChild({name:me.getName(),style:"width:100px;margin-left:5px;",id:me.id+"-fileInputCountEl",cls:Ext.baseCSSPrefix+"form-file-input-count",tag:"label"}),me.countEl.dom.innerHTML="文件: 0/0"}});
//# sourceMappingURL=html5FileUpload.js.map
myStates={infaxgridState:{},infaxgridFilter:{},outfaxgridState:{},outfaxgridFilter:{},succoutfaxgridState:{},succoutfaxgridFilter:{},draftgridState:{},addressgridState:{},docgridState:{},docgridFilter:{},taskgridState:{},taskgridFilter:{},wfrulegridState:{},smsinfaxgridState:{},smsinfaxgridFilter:{},smsoutfaxgridState:{},smsoutfaxgridFilter:{},westPanelState:{},centerPanelState:{},centerCenterPanelState:{},centerSouthPanelState:{},southPanelState:{},printerSrc:{},printerType:{},faxtoolBtn:{},currtree:{},searchState:{},smscbState:{}};var setSerStates=new Ext.util.DelayedTask,stateSorArr=["infaxgridState","infaxgridFilter","outfaxgridState","outfaxgridFilter","succoutfaxgridState","succoutfaxgridFilter","draftgridState","addressgridState","docgridState","docgridFilter","taskgridState","taskgridFilter","wfrulegridState","smsinfaxgridState","smsinfaxgridFilter","smsoutfaxgridState","smsoutfaxgridFilter","westPanelState","centerPanelState","centerCenterPanelState","centerSouthPanelState","southPanelState","printerSrc","printerType","faxtoolBtn","currtree","searchState","smscbState"];Ext.define("WS.lib.MyStateProvider",{extend:"Ext.state.Provider",constructor:function(config){var me=this;config=config||{},Ext.isDefined(config.sessiontoken)&&(me.sessiontoken=config.sessiontoken),me.callParent(arguments),me.state=me.readMyStates()},set:function(name,value){var me=this;return"undefined"==typeof value||null===value?void me.clear(name):(me.setServerState(name,value),void me.callParent(arguments))},clear:function(name){this.clearServerState(name),this.callParent(arguments)},readMyStates:function(){var states=myStates,param={};return param.sessiontoken=GlobalFun.getSeesionToken(),param.key=Ext.JSON.encode(stateSorArr),WsCall.call("readmystates",param,function(response,opts){var datas=Ext.JSON.decode(response.data);Ext.Array.each(datas,function(val,index,alls){var tmpKey=stateSorArr[index];val.stateSaved=!0,myStates[tmpKey]=val})},function(response,opts){},!1,null,null,null,!1),states},setServerState:function(name,value){value.stateSaved=!1;for(key in stateSorArr){var ssArr=stateSorArr[key];if(ssArr==name){var curState=myStates[ssArr],tmpAr=[];curState&&value.columns&&curState.columns&&(Ext.Array.each(value.columns,function(item){var hasP=!1;Ext.Array.each(curState.columns,function(it){it.id==item.id&&(item.HasV=!0,hasP=!0,it=Ext.Object.merge(it,item))}),hasP&&tmpAr.push(item)}),Ext.Array.each(value.columns,function(it){it.HasV||tmpAr.push(it)}),curState.columns=tmpAr,value.columns=curState.columns),curState=value,setSerStates.cancel(),setSerStates.delay(6e3,function(){for(key1 in stateSorArr){var tmp=myStates[stateSorArr[key1]];if(tmp&&!tmp.stateSaved){var tmpStr=Ext.JSON.encode(tmp);if("{}"!=tmpStr){var param={};param.sessiontoken=GlobalFun.getSeesionToken(),param.key=stateSorArr[key1],param.value=tmpStr,tmp.stateSaved=!0,WsCall.call("setmystates",param,function(response,opts){},function(response,opts){},!1)}}}});break}}},clearServerState:function(name){}});
//# sourceMappingURL=MyStateProvider.js.map
function paintMap(R){var attr={fill:"#97d6f5",stroke:"#eee","stroke-width":1,"stroke-linejoin":"round"};china.aomen={name:"澳门",alice:"澳门特别行政区",code:"820000",path:R.path("M413.032,414.183l-0.96,1.752c0,0,0.889,0.883,1.98,1.086s1.995-0.493,1.995-0.493L413.032,414.183z").attr(attr)},china.hk={name:"香港",alice:"香港特别行政区",code:"810000",path:R.path("M417.745,409.005l3.394,0.773l3.453-2.558l1.666,4.582c0,0-5.521,2.673-3.691,1.785c1.828-0.884-4.641-0.355-4.641-0.355l-0.834-3.454L417.745,409.005z").attr(attr)},china.taiwan={name:"台湾",alice:"台湾省",code:"710000",path:R.path("M505.438,371.203l-3.217,19.169l-1.664,6.07v5.123l-1.43,1.427l-3.451-5.119l-3.693-2.858l-3.215-8.571c0,0-0.451-5.62,0.357-7.74c0.809-2.118,5.356-14.05,5.356-14.05l6.313-5.357l4.051,1.904L505.438,371.203z").attr(attr)},china.guangdong={name:"广东",alice:"广东省",code:"440000",path:R.path("M391.37,382.632l2.265-1.666v-3.45l1.188-1.072l2.859,0.235l4.879,2.264l0.834-1.667l-1.188-2.025l0.354-1.427l3.098-2.619l5.478,1.427l3.096-1.905l2.264,2.265l5.478-1.429l1.07,2.021l-1.666,2.264l-2.859,4.288v1.069l1.67,1.192l11.43-4.525l4.048,2.264l1.19-1.191l-1.19-2.499l0.28-1.663l7.459,1.663l1.431,1.072l2.022-0.24l3.094,3.929l3.451,7.502l-2.26,1.667l-2.023,3.689l-1.786,0.596l-1.664,3.455l-5.716,2.854l-2.266-1.188l-1.426,2.382v0.833h-1.787h-3.098l-2.857,2.023l-2.021-1.188l-2.5,1.663l-6.314,2.619l-5.121-4.05l-0.354,3.217l1.788,4.882l-4.646,1.904l-2.498,3.452l-4.887,1.191l-2.617,1.073h-5.119c0,0-0.869,2.545-3.453,3.452c-2.584,0.904-9.168,3.213-9.168,3.213l-4.522,3.098l-2.265,2.263l4.287,6.903l-2.856,2.501l-3.451-0.238l-4.053-7.381l0.954-5.238v-2.501l2.854-4.646l3.695-0.831l-0.355-2.501l3.809-1.785l0.476-4.288l6.668-5.119l-0.355-6.905l5.119-6.547l-0.24-2.5l1.666-2.381L391.37,382.632z").attr(attr)},china.gx={name:"广西",alice:"广西壮族自治区",code:"450000",path:R.path("M305.646,387.87l3.688,0.241l4.051-3.694l1.668,1.072l7.737,3.216l1.429-0.835l0.235-2.619l1.433-1.429l10.955-7.145l1.903,2.266l6.668,2.021l3.691-4.883l1.666,1.192h2.619v-1.431l3.453-1.192v-1.069l1.43-1.428l0.832,0.236l3.453-3.451l2.856,0.832l2.857-3.931l1.432,3.099l0.832-0.238l4.525-4.288l1.188,0.24l2.021-1.073l3.693,1.073v4.048l2.856,0.595l-0.832,3.929l-2.623,4.29l-1.188,3.688h1.188l3.101-2.854l2.616,5.713l2.025-1.43h2.26l1.666,5.717l-1.666,2.383l0.24,2.5l-5.119,6.547l0.355,6.905l-6.668,5.12l-0.476,4.285l-3.809,1.787l0.354,2.5l-3.694,0.831l-2.853,4.646l-7.502,1.071l-3.93-2.856l-4.049-1.669l-4.049,4.05l-4.158,0.241l-4.058,0.234c0,0-10.996-6.139-9.168-5.119c1.828,1.021-1.666-4.526-1.666-4.526l2.261-4.646l-2.617-1.902h-3.455l-0.832-0.952l-3.691,0.952l-3.692-2.62l1.432-4.048l2.855-0.235l1.069-0.834l0.957-3.69l-1.192-2.024l-9.765-1.785l-1.668-2.856h-2.854h-2.619l-1.906-3.099L305.646,387.87z").attr(attr)},china.hainan={name:"海南",alice:"海南省",code:"460000",path:R.path("M385.895,447.523l-5.119,8.93v3.929l-10.238,8.336l-10.598-3.689l-2.025-7.501l0.597-3.454c0,0,8.074-8.075,5.715-5.716c-2.357,2.358,2.025-1.665,2.025-1.665l9.403-1.668l4.289-0.358l1.426-1.666l3.103,0.832L385.895,447.523z").attr(attr)},china.yunnan={name:"云南",alice:"云南省",code:"530000",path:R.path("M313.622,349.296l-0.836-2.858l-2.618-0.954l-4.283,2.622l-2.859-1.432l-0.238-3.688l-1.43-1.79v-1.903l-4.049-0.952l-1.07,1.188l0.599,2.859l-3.217,1.43l-0.834,2.021l0.834,2.5l-7.146,8.336l1.191,9.766l-3.453,2.854l-1.666-1.784l-6.907,4.048l-2.618-1.431c0,0-11.535-22.106-10.002-19.172c1.533,2.938-3.931-2.854-3.931-2.854l-3.213-0.834l-1.432-2.619l1.787-2.859l-2.857-2.263l-3.455,2.859l-3.451,0.598l-2.263-10.363l-0.596-2.499l-3.454,4.286l-1.427,0.831l0.356,6.551l-0.834,1.431h-1.784l-1.43-1.431l-1.667,2.026l1.667,7.381h2.024l1.667,1.19c0,0,0.468,2.396,0.594,4.521c0.125,2.125-0.833,15.719-0.833,15.719l-10.837,9.766l-0.594,3.689l-2.024,1.787l-0.238,1.903l1.669,4.643l-1.431,3.454l0.834,0.478l5.478-1.433l7.738-0.476l-0.834,3.098l1.431,2.857l0.475,4.287l0.955,1.426l4.524,0.243l2.024,1.425l-2.264,2.856l-0.356,3.453l-1.667,4.05l1.068,1.43l2.86,0.238l4.881,1.784l-0.593,1.667l3.212,4.881h4.524l5.716-3.213l1.786,0.952v1.906l0.832,2.856l1.432,1.429l3.092-0.477l1.192,0.834l1.072-1.192v-4.525l-1.906-8.333l1.431-2.5h4.762h1.192l2.62-3.213l6.783,2.261l2.858-2.503l1.431,1.432l2.858-1.786l2.615,2.618h1.073l0.953-1.428l2.261-2.263l1.073,0.833l3.213-0.595l3.099-2.502l2.619-3.811l3.688-0.831l2.023,2.021l1.43-4.048l2.857-0.235l1.069-0.834l0.957-3.691l-1.192-2.023l-9.765-1.785l-1.668-2.857h-2.854h-2.619l-1.906-3.097l0.24-1.665l1.188-6.907l-3.809-3.689l2.859-12.027l-1.908-1.667l-6.309,1.906l-1.431-2.501v-2.856l-1.428-1.43l3.094-4.286l3.453,1.07l1.43-1.429l6.313,0.951l2.856-0.951L313.622,349.296z").attr(attr)},china.fujian={name:"福建",alice:"福建省",code:"350000",path:R.path("M435.945,374.779c0,0,2.881-12.508,1.742-10.365c-1.137,2.144,1.672-2.62,1.672-2.62l0.83-2.854l2.023-4.286l-1.072-1.668l0.24-3.691l4.881-5.475l-0.357-3.691l3.215-5.478l3.095,0.834l6.311-4.524l1.193-2.26l3.69,0.593l2.025,5.118l1.666,3.454h4.047l2.498-3.215l3.693,3.69l6.454-2.276l-4.069,9.776l-2.385-1.192l-1.666,0.835l-0.238,0.954l2.262,2.501l-0.598,8.929l0.598,2.859l-0.598,0.834l-2.617-0.599l-1.668,1.667l1.191,2.384l-3.214,3.095l0.595,1.189l-3.097,1.665l0.478,2.264l-1.072,1.191h-4.285l-2.264,2.025l-0.357,0.832l2.023,1.428l-2.26,3.452l-2.859,3.691l-1.189-0.356l-3.1,3.216l-3.447-7.502l-3.098-3.929l-2.023,0.24l-1.43-1.072L435.945,374.779z").attr(attr)},china.jiangxi={name:"江西",alice:"江西省",code:"360000",path:R.path("M408.279,325.242l3.336,6.549l0.355,3.452l-1.785,3.454l-2.502,2.024l-0.594,6.188l0.832,0.955l1.43-0.596l0.834,0.596v3.927l1.785,4.647l2.026,0.831l0.234,6.789l-1.193,4.642l1.193,2.021l2.266,2.265l5.474-1.429l1.071,2.022l-1.665,2.263l-2.859,4.287v1.07l1.67,1.192l11.43-4.525l4.047,2.263l1.191-1.19l-1.191-2.499l0.281-1.663l1.742-10.365l1.67-2.62l0.832-2.854l2.025-4.286l-1.072-1.668l0.238-3.691l4.881-5.475l-0.355-3.691l3.213-5.478l3.095,0.834l6.311-4.524l1.193-2.263l-4.049-7.501l-2.619-3.69l1.901-1.818l-2.381-2.111H446.5l-2.5-2.855l-4.884,4.762l-1.784-0.835l2.024-3.69l-0.24-1.188l-1.784-0.479l-5.716,3.099l-4.524,1.429l-3.689-0.238c0,0-9.709,9.669-7.979,7.381c1.731-2.287-4.287,1.433-4.287,1.433L408.279,325.242z").attr(attr)},china.hunan={name:"湖南",alice:"湖南省",code:"430000",path:R.path("M408.279,325.242l-2.619-0.594l-1.188-1.667v-4.05l-1.43-2.026l-2.857,2.86l-1.43,2.023h-1.904l-0.594-3.096l-2.621,0.833l-3.451,2.263l-2.264-1.428c0,0-2.666-2.521-4.525-3.097c-1.857-0.576-13.217-0.832-13.217-0.832l-1.43,1.429l2.62,3.093l-3.096,2.026l-4.883-2.026l-5.117,4.287l-1.787,4.05c0,0-0.19,6.479,0.357,9.405c0.551,2.926,2.5,10.002,2.5,10.002l-5.717,6.31l0.596,0.833l5.121-1.428l1.785,2.263l-1.429,7.144l2.857,5.121l2.856,0.832l2.857-3.931l1.43,3.099l0.834-0.238l4.523-4.288l1.191,0.24l2.021-1.073l3.693,1.073v4.048l2.856,0.595l-0.832,3.929l-2.623,4.29l-1.188,3.688h1.188l3.103-2.854l2.617,5.713l2.021-1.43h2.264l2.263-1.666v-3.45l1.188-1.072l2.859,0.235l4.879,2.264l0.834-1.667l-1.188-2.023l0.354-1.429l3.098-2.619l5.478,1.428l3.096-1.906l-1.193-2.021l1.193-4.642l-0.234-6.789l-2.026-0.831l-1.785-4.647v-3.927l-0.834-0.596l-1.43,0.596l-0.832-0.955l0.594-6.188l2.502-2.024l1.785-3.454l-0.355-3.452L408.279,325.242z").attr(attr)},china.guizhou={name:"贵州",alice:"贵州省",code:"520000",path:R.path("M313.622,349.296l-1.666,4.761l-2.856,0.951l-6.313-0.951l-1.43,1.429l-3.453-1.07l-3.094,4.286l1.428,1.43v2.856l1.431,2.501l6.309-1.906l1.908,1.667l-2.859,12.027l3.81,3.689l-1.188,6.907l3.688,0.238l4.051-3.695l1.668,1.073l7.737,3.216l1.429-0.832l0.235-2.622l1.433-1.429l10.955-7.144l1.903,2.265l6.668,2.021l3.689-4.883l1.668,1.192h2.619v-1.432l3.453-1.189v-1.071l1.43-1.428l0.832,0.237l3.453-3.452l-2.857-5.123l1.429-7.142l-1.785-2.263l-5.121,1.428l-0.596-0.834l5.717-6.309l-2.5-10.001l-3.81,2.855l-3.334-3.45l-3.215-4.29l-0.24-2.619l-2.26-0.477l-2.621,0.834l-4.287-2.024l-2.022,4.883l-3.691,0.239l-2.619,4.049l-1.666-0.834l-2.623,0.834l-3.928-2.266l-3.213,3.69v1.668l6.312,3.453l1.426,2.621c0,0-6.094,2.245-4.523,1.667C322.1,348.955,313.622,349.296,313.622,349.296z").attr(attr)},china.zhejiang={name:"浙江",alice:"浙江省",code:"330000",path:R.path("M483.793,336.063l-6.455,2.276l-3.693-3.69l-2.498,3.215h-4.049l-1.666-3.454l-2.023-5.118l-3.692-0.596l-4.047-7.501l-2.619-3.69l1.903-1.818l0.716-0.685c0,0,6.241-8.84,4.286-6.07c-1.954,2.769-0.239-4.882-0.239-4.882l1.43-1.906l3.336-0.594l0.951-1.43l-1.189-2.263l1.666-2.382v-4.524l2.384-1.189l3.928,2.382l4.879,0.835l3.225-3.824l3.998,3.332l-1.744,1.324l-2.021,3.096l-3.217,0.952l-1.074,0.833l3.098,1.666l5.715-2.499l9.406,3.929l0.953,7.979h-3.809l-0.24,2.382l2.024,3.332l-1.784,2.024l2.022,3.214l-3.096,3.69l-1.43-1.787l-4.644,11.788L483.793,336.063z").attr(attr)},china.anhui={name:"安徽",alice:"安徽省",code:"340000",path:R.path("M423.637,253.208l2.024-0.597l6.312,2.621c0,0,1.768,2.299,2.861,2.856c1.092,0.557,5.118,1.43,5.118,1.43l2.021,1.667l2.858-0.479l0.599,1.072l-0.957,6.074l2.858,1.666l1.189,2.263l4.287,0.831l1.666-2.854l2.621,0.356l1.666,2.265l-0.24,2.021l-5.121,0.596v2.264v1.665l-2.021,2.265l1.43,2.618l4.287,2.856l0.237,3.454l8.572,0.832v4.525l-1.666,2.381l1.191,2.263l-0.951,1.43l-3.338,0.594l-1.428,1.906l0.235,4.882l-4.285,6.072l-0.715,0.683l-2.381-2.111H446.5l-2.498-2.855l-4.884,4.761l-1.786-0.834l2.026-3.69l-0.24-1.188l-1.786-0.479l-5.718,3.099l-5.356-10.241l1.666-3.214l-0.595-1.071l-2.858-0.952l-4.76-2.858l1.903-3.928l2.855-1.43l0.598-3.214l-1.07-5.716l-0.596-0.479l-2.856,2.86c0,0-5.978-4.647-4.287-3.453c1.69,1.192-3.217-4.049-3.217-4.049l3.217-2.261l0.834-4.05l2.021-1.431l-0.354-5.359l1.43-1.188l2.619,1.787l1.664,2.26l3.453-2.26l1.192-1.434l-0.598-2.617l-4.049-2.263L423.637,253.208z").attr(attr)},china.shanghai={name:"上海",alice:"上海市",code:"310000",path:R.path("M484.32,292.485l-3.998-3.332c0,0,0.867-0.375,1.898-2.251c1.031-1.875,1.426-4.286,1.426-4.286l4.287,1.788l2.027,2.854l-1.433,2.024L484.32,292.485z").attr(attr)},china.jiangsu={name:"江苏",alice:"江苏省",code:"320000",path:R.path("M483.646,282.616l-1.426,4.286l-1.898,2.251l-3.225,3.824l-4.879-0.835l-3.929-2.383l-2.383,1.19l-8.571-0.832l-0.238-3.454l-4.287-2.856l-1.428-2.618l2.02-2.264v-1.665v-2.267l5.121-0.594l0.24-2.023l-1.666-2.263l-2.621-0.355l-1.666,2.854l-4.287-0.831l-1.188-2.263l-2.857-1.666l0.955-6.074l-0.598-1.072l-2.859,0.479l-2.021-1.667l-5.118-1.429l-2.861-2.857l-6.307-2.621l0.592-2.856l2.5-1.069l4.645,3.927h1.433l4.284-0.476l2.5-2.022l3.453,2.856l1.427-2.62l0.358-1.43l2.857-1.667l0.834-3.45l2.854-0.597l7.148,4.881c0,0,3.365,0.754,5.117,2.025c1.754,1.271,9.766,16.313,9.766,16.313l-0.357,1.666l6.548,3.095l1.784,2.859l3.099,1.429l1.428,2.855l-2.023,0.951l-3.334-1.188h-4.645l-4.287-1.432l-1.666,1.432l3.932,1.188l3.813,1.669L483.646,282.616z").attr(attr)},china.hubei={name:"湖北",alice:"湖北省",code:"420000",path:R.path("M356.486,329.29l1.787-4.048l5.119-4.287l4.881,2.026l3.096-2.026l-2.621-3.093l1.429-1.433l13.219,0.836l4.525,3.097l2.264,1.425l3.451-2.26l2.619-0.833l0.596,3.093h1.904l1.43-2.021l2.856-2.86l1.431,2.027v4.049l1.19,1.667l2.619,0.594l2.855-2.854l4.287-1.433l7.979-7.381l3.691,0.236l4.522-1.428l-5.358-10.24l1.668-3.214l-0.593-1.071l-2.862-0.952l-4.761-2.858l-2.381-1.427l-3.098,1.427l-3.451-2.854h-4.524l-3.455-1.907l-0.83-2.856l-1.787-1.786l-2.5,1.428L395.421,285c0,0-9.509,0.927-7.146,1.071c2.363,0.146-7.736-1.666-7.736-1.666l-9.407-8.334l-2.619,2.023l-1.188-0.831h-1.907h-8.572l-1.189,1.068l2.619,2.62l2.5,0.593l2.26,0.837l-1.067,1.668l-4.287,2.021l-0.834,3.451l0.834,1.191l0.596,4.288l2.5,0.238l2.619,3.452l1.07,6.548l-0.832,2.262l-1.666-0.594l-4.883,3.812l-8.336,1.429l-2.261,2.263l1.783,2.262l0.24,4.882l2.262,0.598L356.486,329.29z").attr(attr)},china.xizang={name:"西藏",alice:"西藏自治区",code:"540000",path:R.path("M152.525,339.529l6.787,0.834l2.265,3.216l1.189,0.477l10.239-1.904l0.594-1.787l2.023-1.07l4.884-4.05l4.285-0.594l3.93-2.501l7.74-4.286l0.832,1.428l5.716,1.904l8.334-4.285l2.618,1.787l-2.379,3.452l0.952,0.833h3.332l0.359,1.427l-2.857,5.121l0.833,0.834h1.666l8.336,2.265l3.691-3.099l5.478,4.289l1.667-2.026l1.43,1.431h1.784l0.834-1.431l-0.356-6.549l1.429-0.835l3.451-4.284l-0.594-16.549l-3.099-8.337l2.265-1.665l-6.548-12.027l-7.979-6.311l-2.26,1.43l0.238,3.692l-6.908,8.931l-11.428-2.384l-0.833-4.286l-7.146-5.716l-15.717-2.498l-6.787-1.188l-2.619-0.241l-5.952-4.883l-12.385-2.857l-8.57-16.551l-0.238-4.642l3.451-1.672v-5.117l2.502-6.311l-2.858-2.858l3.811-3.095l-2.383-1.425h-5.716l-10.238-4.644h-6.549l-5.118,1.43h-5.715l-8.931,4.879l-7.144-0.834l-7.146,2.5l-5.954-1.906l-3.688-3.212l-9.526-1.427l-6.192,4.28l-3.45-1.425l-2.859-2.263l-6.908-1.667l-1.065-1.189l-2.857-0.237l-9.782,5.945l-10.412-1.297l2.428,4.398l2.68,1.995l-0.821,3.842l-0.231,3.758l0.256,2.672l0,0l-0.193,3.208l3.451,3.454l0.239,4.884l-1.072,1.907l-5.119,0.591l-2.621-2.854l-2.619,0.355l-0.476,2.265l1.428,3.688l0.479,2.62v3.333l-0.833,2.381l0.354,1.909l3.336,0.356l1.785,3.094l7.739,6.071v1.906l5.716,6.311l1.902,2.262l1.79,0.595l3.451-3.451l3.096,2.856c0,0,15.395,13.684,13.098,11.193c-2.297-2.491,2.381,5.715,2.381,5.715h2.859l1.667-1.665l1.426,1.428v5.117l7.741,4.287l1.667-0.357l1.191,4.287l6.548,3.81l0.238,2.501l1.188,0.835l5.717-0.24h3.098l4.644,3.457l10.24-0.359l5.476-0.239l1.428,2.265l-1.188,4.883l1.427,1.664l5.715-4.761l7.146-5.239l5.12,0.95L152.525,339.529z").attr(attr)},china.qinghai={name:"青海",alice:"青海省",code:"630000",path:R.path("M153.954,234.989l4.523,1.667l7.742-2.617l-1.193-1.429h-2.021l-0.834-2.259l0.594-2.024l3.692-1.668l2.617-4.286l-7.977-6.548l-0.356-6.906c0,0,2.08-2.545,3.689-2.856c1.609-0.313,26.317-5.119,26.317-5.119l1.783-1.428l3.931,0.594l13.215,3.095l3.93,2.265l5.714,3.451l3.692-0.237l5.714-3.452l7.501,1.188l4.882-2.616l9.999,6.309l5.36-2.023l2.856,6.903l6.907,4.286l5.119,4.527l3.691-1.431l7.146,9.405l1.426,6.071l2.619,3.688l-0.832,7.146l-5.715,4.524l1.073,2.856l-2.265,2.263l-2.856,2.62v4.879l-2.621,2.027l-3.097-0.954l-2.617-2.5l-1.431,2.859l1.787,2.499l4.524,0.594l4.287,4.288h2.618l2.024,2.265l-1.787,4.046v0.239l-3.688-0.479l-2.621,1.905l-1.666-2.856l-4.524,1.785l-1.19,2.264v3.451l-4.524,0.836l-5.715-5.716l-1.787-2.856l-4.524,1.428l-7.738-2.262l-11.67,1.666l-0.952,1.189l-1.071,3.69l-2.263,1.43l0.238,3.692l-6.906,8.931l-11.43-2.383l-0.833-4.285l-7.146-5.718l-15.717-2.498l-6.786-1.19l-2.621-0.238l-5.953-4.883l-12.384-2.857l-8.57-16.551l-0.238-4.642l3.451-1.672v-5.117l2.502-6.313l-2.858-2.856L153.954,234.989z").attr(attr)},china.gansu={name:"甘肃",alice:"甘肃省",code:"620000",path:R.path("M196.462,200.108l-1.43-16.55l0.836-3.453l4.879-2.262c0,0,5.209-5.03,6.903-5.717c1.696-0.686,10.6-4.285,10.6-4.285l4.285-2.025v-4.047l1.905-2.262l1.788,0.237l7.144,1.192l-0.358,3.095l1.43,4.88l-0.834,7.978l6.072,8.929l3.097,2.026l4.883-3.812h10.237l2.623,0.953l1.429,2.264l-1.193,2.499l-5.714,4.645l0.597,2.261l6.549,4.882h2.618l0.834,1.07l-0.596,2.025l4.05,3.217l9.404,1.429l4.525-1.19l5.718-5.719l6.903,0.598l2.855,4.287l-1.664,3.929l0.475,2.382l-3.688,2.263l-1.668,2.024l0.596,4.763l6.545,4.646l2.875-0.653l7.725,9.458l1.668,7.145l-0.834,3.451l5.357,2.859v2.26l4.883,1.192h1.426v-4.05l3.693-0.595l0.951-4.763l-2.619-2.026l-2.025-2.021l0.834-9.166l2.023-1.071l3.453,1.43l1.432-0.598l0.834,1.667l9.166,4.639l4.883,3.1l0.832,2.856l-2.619,3.691l1.431,4.285l-0.834,2.021l-6.785,0.6l-1.433,0.833l0.478,1.191v1.903l-5.355,0.594l-2.856-1.428h-3.691l-0.596,0.834l0.596,2.024l-1.789,2.023l-0.592,2.262l3.449,2.857l-2.498,5.119l1.072,2.622l-0.238,1.188h-4.051l-2.854,1.435l2.26,3.091l-1.428,4.051l-4.287,1.07l0.357,2.023l-1.189,1.428l-7.383-0.596l-2.854-2.021l-0.601-4.525l-1.664-1.669l-2.62,1.669l-4.523-4.521l-3.455-2.385l-0.354-3.335l-1.074-2.619h-1.787l-7.144,3.096l0.356,3.454h-2.618l-4.287-4.288l-4.525-0.593l-1.786-2.499l1.431-2.86l2.617,2.5l3.097,0.954l2.62-2.025v-4.881l2.857-2.62l2.265-2.263l-1.073-2.856l5.716-4.522l0.832-7.147l-2.619-3.688l-1.429-6.071l-7.144-9.405l-3.692,1.431l-5.118-4.524l-6.907-4.287l-2.856-6.905l-5.359,2.023l-9.999-6.309l-4.883,2.616l-7.501-1.188l-5.714,3.452l-3.691,0.237l-5.715-3.451l-3.93-2.265L196.462,200.108z").attr(attr)},china.xinjiang={name:"新疆",alice:"新疆维吾尔自治区",code:"650000",path:R.path("M153.889,69.508l2.327-0.014l-1.428,4.525l2.025,2.38l0.236,1.666l4.525,4.524l1.191,3.453l5.953,0.357l2.62,2.265h1.429l3.453,7.379l3.451,8.931l-1.784,5.357l0.358,2.025l-3.215,5.477l0.833,4.286l11.192,4.763l12.025,1.788l12.503,8.571l4.049,1.429l0.237,2.261l2.619,5.478l2.619,7.146l3.333,5.953l-1.903,2.263v4.047l-4.286,2.026l-10.596,4.284l-6.907,5.719l-4.881,2.26l-0.834,3.453l1.43,16.55l-3.931-0.596l-1.783,1.431l-26.315,5.119l-3.691,2.856l0.358,6.906l7.978,6.548l-2.62,4.286l-3.69,1.668l-0.597,2.024l0.835,2.259h2.021l1.192,1.429l-7.738,2.617l-4.525-1.667l-2.382-1.424h-5.715l-10.24-4.642h-6.546l-5.121,1.428h-5.714l-8.931,4.879l-7.143-0.834l-7.145,2.5l-5.956-1.907l-3.689-3.211l-9.525-1.427l-6.191,4.28l-3.452-1.425l-2.858-2.263l-6.907-1.667l-1.07-1.189l-2.857-0.237l-9.782,5.945l-10.037-1.25l-0.822-0.359l1.113-8.623l-4.524-1.191l-9.406-6.902l-2.62-0.241l-2.023-4.525l1.427-4.643l-0.477-2.26l-3.451-2.266l-1.192-2.26l-7.143-4.049v-1.189l3.452-1.431l2.023,1.19l2.025-2.025l-0.598-6.785l0.598-5.716l-4.646-4.642l-3.095,0.833l-1.189-3.336l1.785-3.452l-0.952-3.214l3.038-2.749l1.248-1.182v-2.618l4.285-2.024l4.286-0.833l3.811-1.429l3.099,0.832l2.26-0.832l0.833,0.595l0.356,2.859l2.022,0.832l4.765-0.238c0,0,3.566-4.729,5.478-6.073c1.911-1.346,11.19,2.381,11.19,2.381l5.717-4.048l16.552-3.689l1.069-2.264l1.43-6.31l4.643-3.69h1.433v-1.906l0.236-15.836l0.833-3.212l-4.521-1.668l-0.24-1.191l4.762-1.428l12.384-1.073l1.905,2.501l4.287,0.952l1.192,0.239l1.665-2.262l-2.265-2.263l9.169-18.574l1.431-0.953l8.335,4.047h3.689l1.667,2.264l7.979-2.502l2.023-13.212l3.452-2.265l4.048-0.238l2.859-3.452l1.071-3.454l2.263-1.191L153.889,69.508z").attr(attr)},china.shanxi={name:"陕西",alice:"陕西省",code:"610000",path:R.path("M363.393,259.519l-1.428-3.454l2.498-8.81l-3.689-16.903c0,0,3.262-5.777,2.619-4.286c-0.646,1.49,1.07-3.929,1.07-3.929l-3.334-6.905l3.096-4.884l0.594-4.525l1.67-3.452l-0.238-4.046l-1.432-1.074l-2.26,2.502l-6.072,0.356l-3.096,4.526l0.236,2.62l-0.593,1.665l-2.502,0.834l-9.406,13.454l-1.19-0.836l-2.617-0.594l-5.359,0.359l-1.789,2.499l-0.233,5.478l0.834,1.667l9.166,4.637l4.883,3.099l0.832,2.855l-2.619,3.691l1.431,4.286l-0.835,2.021l-6.784,0.6l-1.433,0.835l0.478,1.188v1.904l-5.355,0.596l-2.856-1.428h-3.691l-0.596,0.832l0.596,2.026l-1.789,2.022l-0.592,2.261l3.451,2.861l-2.5,5.117l1.071,2.619l-0.237,1.191h-4.052l-2.854,1.429l2.262,3.098l-1.43,4.048l2.383,0.478l0.238,2.617l2.021,0.237l7.386-1.427l1.43,0.593l0.354,2.025l3.099,0.835l6.547,3.216l3.69-1.434l8.097,2.857l1.666,2.26l4.051-0.829l-0.596-4.288l-0.834-1.191l0.834-3.451l4.286-2.021l1.068-1.668l-2.26-0.837l-2.5-0.593l-2.619-2.62l1.189-1.068h8.571h1.908l1.189,0.83l2.616-2.022v-3.454l-7.737-11.668L363.393,259.519L363.393,259.519z").attr(attr)},china.henan={name:"河南",alice:"河南省",code:"410000",path:R.path("M371.131,276.068l9.405,8.336l7.742,1.665l7.144-1.072l2.262,1.072l2.5-1.43l1.783,1.787l0.834,2.856l3.455,1.905h4.524l3.451,2.857l3.098-1.428l2.382,1.428l1.903-3.929l2.855-1.43l0.598-3.216l-1.07-5.715l-0.596-0.479l-2.856,2.86l-4.287-3.453l-3.218-4.049l3.218-2.263l0.834-4.048l2.021-1.431l-0.354-5.359l1.43-1.188l2.619,1.787l1.664,2.26l3.455-2.26l1.19-1.434l-0.598-2.617l-4.049-2.263l-0.834-2.619l-7.142,0.835l-4.524-3.93l-2.021-0.596v-2.621l10-11.074l-3.69,0.834l-2.261,1.669l-0.957-1.429v-1.666l-1.663-0.6l-4.525,1.785l-11.43-1.428l-0.597,9.408c0,0-6.604,5.169-5.479,4.287c1.129-0.884-7.381,1.429-7.381,1.429l-10.359,7.142l-8.215,2.264v1.43l7.738,11.666L371.131,276.068L371.131,276.068z").attr(attr)},china.shanxis={name:"山西",alice:"山西省",code:"140000",path:R.path("M363.393,259.519l8.217-2.265l10.357-7.142l7.381-1.431l5.477-4.287l0.599-9.405l-2.623-3.449l0.836-2.856l1.787-2.619l0.477-3.929l1.785-2.86l-2.859-5.713l-4.047-4.645l2.262-7.383l4.886-3.212l0.83-4.765l-1.904-4.286v-5.242l-3.215-2.854l-7.381,3.809l-1.191-1.189l-3.93,2.855l-3.213-0.235l-6.312,9.048h-1.906l-3.452,2.858l0.237,4.046l-1.67,3.452l-0.594,4.525l-3.096,4.884l3.334,6.905l-1.07,3.929l-2.619,4.286c0,0,4.146,18.996,3.689,16.903s-2.498,8.81-2.498,8.81L363.393,259.519z").attr(attr)},china.shandong={name:"山东",alice:"山东省",code:"370000",path:R.path("M425.661,252.611l0.597-2.856l2.5-1.069l4.645,3.927h1.433l4.284-0.476l2.5-2.022l3.453,2.856l1.429-2.62l0.356-1.43l2.857-1.667l0.834-3.45l2.854-0.595l7.98-13.454l-1.429-2.264l1.429-1.427l1.666,0.595l2.619-1.429l1.432-3.094l6.545-6.073l5.121-1.666l2.381-2.266l-0.592-4.88l-3.457-0.355l-7.738,0.952l-5.356-2.62l-3.216,0.596l-7.977,10.239l-2.262,1.429l-5.117-2.263l-0.359-2.619l-1.069-4.523l-2.859-1.669l-4.643,1.073l-2.882-1.971l-4.266,5.423l-4.523,1.188c0,0-8.514,7.798-6.313,5.718c2.201-2.081-6.902,12.5-6.902,12.5l1.783,3.45l-0.357,1.431v1.666l0.957,1.429l2.261-1.669l3.69-0.834l-10.002,11.074v2.621l2.023,0.596l4.524,3.93l7.146-0.835L425.661,252.611z").attr(attr)},china.hebei={name:"河北",alice:"河北省",code:"130000",path:R.path("M413.04,235.229l0.357-1.426l-1.783-3.453l6.902-12.5c0,0,8.725-7.9,6.313-5.718c-2.411,2.185,4.523-1.188,4.523-1.188l4.268-5.423l-1.647-1.125l-1.56-3.907l-3.319,1.286l-5.479-1.428l-0.237-1.428l-0.238-9.17l3.69-1.667l-0.419-1.563l-0.177-0.104l0.81-3.557l-5.094,2.128l0.832,1.905l0.178,1.424l0.18,1.433l-2.857,1.19l-1.785,1.667l-3.692-1.071l-4.881,0.834l-0.832-2.264l0.594-4.287l3.693-4.286l0.831-4.88l3.691-3.691l6.666,3.454h1.668l1.189,4.762l1.905,0.95l0.953,3.1l-0.356,2.024l4.047,2.854l0.594,2.264l3.338,1.428l8.332-4.523v-2.621l4.883-7.143l-3.45-4.881l-2.621-0.238l-4.763-3.218l1.668-5.118l-7.387-0.595l-3.213-4.765l0.357-2.619l-6.31-6.906l-4.051,2.026l-3.451,3.452l1.191,2.62l-0.834,1.667l-4.882,0.237l-2.264,2.022l-2.022-0.835l-2.021,2.026l-4.527,3.453l-2.024-1.43v-4.644l-1.666-0.832l-2.619,1.189l-3.096,6.547l-1.189,6.311l3.689,6.19l3.215,2.858v5.24l1.904,4.286l-0.834,4.764l-4.884,3.213l-2.26,7.382l4.049,4.645l2.857,5.717l-1.785,2.857l-0.477,3.928l-1.787,2.619l-0.834,2.859l2.621,3.446l11.43,1.431l4.524-1.787L413.04,235.229z").attr(attr)},china.tianjin={name:"天津",alice:"天津市",code:"120000",path:R.path("M430.413,200.491c0,0-1.832,1.672-3.319,1.284c-1.49-0.388-5.479-1.428-5.479-1.428l-0.237-1.429l-0.238-9.169l3.69-1.667l-0.596-1.666l0.81-3.557l0.385-1.683l1.901,0.95l0.953,3.098l-0.356,2.022l4.047,2.858l0.594,2.263l-2.379,1.668l-0.834,3.809L430.413,200.491z").attr(attr)},china.beijing={name:"北京",alice:"北京市",code:"110000",path:R.path("M421.139,189.75l-0.357-2.856l-0.832-1.905l5.095-2.126l0.381-1.683l-1.189-4.767h-1.668l-6.666-3.449l-3.69,3.69c0,0-1.125,6.585-0.832,4.88c0.289-1.704-3.693,4.288-3.693,4.288l-0.594,4.286l0.832,2.263l4.881-0.834l3.693,1.071l1.784-1.667L421.139,189.75z").attr(attr)},china.ningxia={name:"宁夏",alice:"宁夏回族自治区",code:"640000",path:R.path("M329.934,230.111l0.24-5.476l1.785-2.499l-0.832-2.62l-9.168-3.454l0.594-3.691l2.858-4.049l-1.786-6.19l-0.835-0.952l-5.954,4.049l-2.855,9.168l-0.953,6.31l-4.762,3.93l-2.859,1.189l-3.438,0.779c0,0,9.184,11.236,7.729,9.458c-1.455-1.78,1.664,7.146,1.664,7.146l-0.834,3.449l5.357,2.859v2.262l4.881,1.19h1.43v-4.048l3.691-0.597l0.951-4.763l-2.619-2.026l-2.023-2.021l0.832-9.163l2.023-1.073l3.453,1.43L329.934,230.111z").attr(attr)},china.neimeng={name:"内蒙古",alice:"内蒙古自治区",code:"150000",path:R.path("M301.969,226.604l3.438-0.779l2.859-1.188l4.762-3.932l0.953-6.31l2.855-9.168l5.954-4.048l0.835,0.951l1.786,6.19l-2.858,4.049l-0.594,3.691l9.168,3.453l0.832,2.621l5.358-0.359l2.617,0.596l1.191,0.834l9.405-13.454l2.502-0.835l0.593-1.664l-0.236-2.623l3.096-4.523l6.072-0.358l2.262-2.5l1.431,1.074l3.452-2.86h1.904l6.312-9.046l3.215,0.235l3.93-2.855l1.191,1.189l7.381-3.809l-3.689-6.193l1.189-6.311l3.096-6.549l2.619-1.188l1.666,0.832v4.644l2.025,1.43l4.526-3.453l2.021-2.026l2.022,0.835l2.265-2.025l4.881-0.234l0.834-1.667l-1.191-2.622l3.453-3.452l4.049-2.024l6.31,6.908l-0.355,2.618l3.213,4.763l7.385,0.595l1.666-3.453l-1.903-10.002l1.666-1.667l3.453,2.262l3.096,4.644l4.881-7.5l2.264-0.596l3.689-3.692h1.787l3.094-3.095h1.787l1.666-2.856h4.527l4.047-4.051l2.021-2.021v-2.264l-3.213-1.667v-4.286l-5.953-7.502l-5.717,5.478l-1.666-1.19l-0.357-3.096l-2.264-3.453l-0.594-3.931v-4.046l-3.928-2.858l-0.601-1.667l1.074-2.382l7.502,2.022l0.238-3.452l2.621-3.099l-1.789-1.666l0.358-3.214l3.689-1.667l0.834-1.19l-0.598-1.07l-3.927,1.07l-7.145-4.882l-0.357-1.43l3.453-4.524l7.146-10.597l0.594-1.072h1.193l2.26,2.858l0.596,0.479l0.238-13.336l2.26-1.191v-5.121l-0.594-8.333l2.858-11.668l-8.575-6.312l-6.548,5.478l-3.45,0.476l-1.668,1.786l-5.718-0.832l-2.854-3.215l-1.664-5.122l0.236-2.021l-4.525-2.858l-2.621,4.289l-4.881-3.096l-0.834-0.835l2.856-7.5L433.4,7.223h-2.024l-5.119,3.688l-4.285,6.311l1.668,1.071l3.211,0.359l2.504,6.548l-1.43,2.618l-2.502,3.689l-4.644,17.147l1.785,2.856l-1.428,2.498l-10.599,7.742l-5.713-1.071l-3.215-1.191l-0.479,1.667l-4.642,18.577l-2.264,2.378l1.191,3.335l2.854,2.382l4.764-2.623l7.74,0.598l2.26-3.692l4.052-0.951l7.737,2.856l9.408,9.765v2.023l-2.024,1.429l-10.836,0.599l-3.691,2.854l-2.857-0.355l-2.022,3.214l-5.121,1.07l-3.457,5.12l-0.592,3.81l-7.379,4.763l-4.646,0.598l-5.119,6.904l-4.883,2.859l-9.408-2.025l-3.092-1.431l-3.692,3.694l-1.785,6.548l5.119,7.501l-3.335,3.451l-4.643,2.859c0,0-8.422,10.638-6.787,8.571c1.637-2.064-6.619,3.36-8.93,3.93c-2.31,0.568-14.525,1.429-14.525,1.429l-2.264-0.237l-16.906,7.144l-7.742,4.881l-2.262-1.19l-0.83-2.262l-10.36-0.597l-11.909-3.688l-3.211-3.69l-17.385-2.025l-3.217,1.43l-21.072-2.022l-0.358,3.095l1.43,4.883l-0.834,7.976l6.073,8.929l3.096,2.026l4.883-3.812h10.237l2.623,0.953l1.426,2.262l-1.19,2.5l-5.714,4.646l0.597,2.261l6.549,4.88h2.618l0.834,1.072l-0.596,2.023l4.05,3.217l9.403,1.429l4.527-1.19l5.716-5.719l6.903,0.598l2.857,4.289l-1.664,3.926l0.473,2.382l-3.688,2.263l-1.668,2.024l0.596,4.76l6.545,4.647L301.969,226.604z").attr(attr)},china.liaoning={name:"辽宁",alice:"辽宁省",code:"210000",path:R.path("M491.15,173.2l6.783-10.002l4.287-4.881l-0.595-4.763l-4.524-5.239l-0.594-4.286l-8.216-11.075l-0.358,1.074l-1.666,1.786l-3.453-4.05l-4.883-1.429l-0.236,1.429v2.264l-2.022,2.022l-4.047,4.05H467.1l-1.666,2.856h-1.789l-3.094,3.096h-1.787l-3.691,3.691l-2.262,0.596l-4.881,7.5l-3.096-4.644l-3.453-2.262l-1.666,1.667l1.903,10.002l-1.666,3.453l-1.668,5.12l4.763,3.215l2.621,0.238l3.45,4.881l2.5-1.429c0,0,2.857-2.881,4.05-4.882c1.192-2.002,4.049-6.788,4.049-6.788l6.787-1.429l4.287,4.286l-3.099,6.787l-4.049,6.311l3.688,2.62l-0.233,3.098l-2.857,2.855l0.597,1.19l4.881-2.619l7.143-9.407l10.836-6.072L491.15,173.2z").attr(attr)},china.jilin={name:"吉林",alice:"吉林省",code:"220000",path:R.path("M544.896,113.042l-2.07-0.088h-2.858l-4.285-1.431l-1.43-2.619l-1.431,2.024l-2.022-1.428l-4.523,5.12l-0.834,1.427l-2.022,0.357l-2.859-3.214l-2.621-1.072l-2.854-5.715l-2.027,1.431l0.594,5.12l-1.426,0.833l-3.689-4.05l-1.432-1.903h-2.854l-1.666-4.288l-3.813-2.023l-5.354,2.023l-2.025-0.357l-3.098-3.094l-4.285,2.5h-2.383l-2.857,1.191l-4.285-3.096l-2.854-5.24l-6.787,1.189l-2.621,3.099l-0.238,3.45l-7.502-2.023l-1.074,2.381l0.601,1.667l3.928,2.859v4.046l0.594,3.929l2.265,3.456l0.356,3.095l1.666,1.191l5.717-5.479l5.953,7.502v4.288l3.213,1.667l0.238-1.431l4.885,1.431l3.451,4.046l1.666-1.784l0.357-1.074l8.217,11.075l0.594,4.286l4.527,5.239l0.592,4.761l4.051-2.499l3.689-10.598l1.67-0.595l4.047,2.263l6.549-0.834l2.26-2.024l-3.092-4.763l0.832-1.191c0,0,7.84-2.611,6.072-2.022c-1.766,0.588,2.5-4.883,2.5-4.883l3.215-1.428l0.238-4.766l0.832-3.212l1.785-0.596l1.668,1.789l1.668,1.426l4.287-5.715l1.188-4.288L544.896,113.042z").attr(attr)},china.heilongjiang={name:"黑龙江",alice:"黑龙江省",code:"230000",path:R.path("M464.838,96.639l6.787-1.19l2.854,5.241l4.285,3.095l2.856-1.188h2.386l4.285-2.501l3.094,3.094l2.024,0.357l5.357-2.023l3.813,2.023l1.666,4.288h2.857l1.43,1.904l3.689,4.049l1.426-0.833l-0.594-5.12l2.026-1.432l2.854,5.716l2.621,1.074l2.858,3.212l2.021-0.357l0.836-1.427l4.523-5.12l2.022,1.428l1.43-2.022l1.431,2.619l4.283,1.429h2.86l2.07,0.088l-1.238-2.113l-0.598-6.906l-5.115-7.978l2.855-2.857l2.616-4.883h9.646l1.785-1.665l-0.597-3.69l2.025-3.691l-0.596-2.024l0.832-3.451l-0.236-17.742l2.855-5.715l-3.214-3.692l0.595-2.261l-1.427-2.024l-3.69,1.429l-4.289,4.884l-4.283,2.023l-4.289,5.951l-10.598,3.692l-4.879-3.692l0.594-2.262l-2.5-3.689l-1.191-3.811l-4.047-0.239l-7.145-3.69l-2.859,1.071l-3.33-1.667l-4.887,0.834l-4.283-1.429l-2.621-3.69l-2.498-2.857l-0.951-2.857l-3.334-3.452l-2.026-3.099l-4.644-6.31l-1.428-3.69l-5.119-6.548l-1.432-3.454l-6.549-3.216l-4.287,1.429l-3.689-0.833l-8.336-1.668l-11.07,3.932l-2.024,1.786l2.262,3.096l-2.856,7.499l0.834,0.835l4.881,3.096l2.621-4.286l4.524,2.856l-0.235,2.022l1.664,5.119l2.854,3.218l5.717,0.833l1.668-1.787l3.451-0.477l6.547-5.476l8.576,6.31l-2.858,11.669l0.594,8.333v5.119l-2.26,1.191l-0.238,13.335l-0.597-0.476l-2.26-2.858h-1.192l-0.595,1.073c0,0-8.797,13.044-7.146,10.596c1.652-2.448-3.451,4.523-3.451,4.523l0.357,1.428l7.145,4.886l3.926-1.071l0.599,1.071l-0.834,1.189l-3.689,1.667l-0.359,3.214L464.838,96.639z").attr(attr)},china.chongqing={name:"重庆",alice:"重庆市",code:"500000",path:R.path("M318.986,317.871l5.58-2.092l4.564,2.092l1.014-5.811l5.346-3.72l1.351-7.671l3.932-1.059v-7.47l3.689-1.432l8.096,2.857l1.666,2.26l4.051-0.829l2.5,0.238l2.619,3.452l1.07,6.548l-0.832,2.262l-1.666-0.594c0,0-3.072,3.501-4.884,3.812c-1.809,0.311-8.336,1.429-8.336,1.429l-2.26,2.263l1.783,2.262l0.24,4.883l2.262,0.597l5.715,7.142l0.357,9.407l-3.218,2.412l-0.592,0.445l-3.334-3.451l-3.215-4.29l-0.24-2.619l-2.26-0.476l-2.621,0.834l-4.287-2.025l-2.022,4.883l-3.691,0.239l-2.619,4.049l-1.666-0.834l-2.28-6.977l-6.507-4.07L318.986,317.871z").attr(attr)},china.sichuan={name:"四川",alice:"四川省",code:"510000",path:R.path("M279.33,280.95l1.788-4.05l-2.025-2.261l-0.357-3.454l7.145-3.096h1.787l1.069,2.619l0.357,3.336l3.455,2.384l4.522,4.521l2.621-1.669l1.664,1.669l0.6,4.525l2.855,2.021l7.383,0.599l1.189-1.431l-0.357-2.023l4.287-1.07l2.381,0.478l0.238,2.617l2.024,0.237l7.382-1.427l1.43,0.593l0.354,2.026l3.099,0.834l6.549,3.214v7.47l-3.932,1.059l-1.351,7.671l-5.346,3.72l-1.014,5.811l-4.564-2.092l-5.58,2.092l-0.231,4.416l-0.464,4.53l6.507,4.07l2.28,6.977l-2.623,0.833l-3.928-2.263l-3.213,3.691v1.666l6.311,3.452l1.427,2.62l-4.523,1.666l-6.904-0.238l-0.831-2.855l-2.621-0.954l-4.285,2.623l-2.859-1.429l-0.238-3.694l-1.43-1.786v-1.903l-4.047-0.952l-1.072,1.188l0.599,2.858l-3.215,1.431l-0.836,2.021l0.836,2.504l-7.146,8.334l1.191,9.764l-3.453,2.855l-1.666-1.784l-6.906,4.049l-2.621-1.431l-10.001-19.17l-3.931-2.854l-3.216-0.835l-1.428-2.623l1.787-2.854l-2.857-2.264l-3.455,2.858l-3.45,0.595l-2.264-10.359l-0.597-2.499c0,0-2.04-22.568-0.594-16.55c1.446,6.017-3.099-8.336-3.099-8.336l2.267-1.665l-6.55-12.027l-7.977-6.311l1.069-3.692l0.953-1.188l11.669-1.666l7.738,2.262l4.523-1.431l1.785,2.859l5.717,5.715l4.524-0.833v-3.453l1.191-2.266l4.522-1.783l1.667,2.856l2.621-1.903l3.689,0.478v-0.241H279.33z").attr(attr)}}var china=[];
//# sourceMappingURL=chinamapPath.js.map
!function(glob){var current_event,stop,version="0.3.4",has="hasOwnProperty",separator=/[\.\/]/,wildcard="*",fun=function(){},numsort=function(a,b){return a-b},events={n:{}},eve=function(name,scope){var l,oldstop=stop,args=Array.prototype.slice.call(arguments,2),listeners=eve.listeners(name),z=0,indexed=[],queue={},out=[],ce=current_event;current_event=name,stop=0;for(var i=0,ii=listeners.length;ii>i;i++)"zIndex"in listeners[i]&&(indexed.push(listeners[i].zIndex),listeners[i].zIndex<0&&(queue[listeners[i].zIndex]=listeners[i]));for(indexed.sort(numsort);indexed[z]<0;)if(l=queue[indexed[z++]],out.push(l.apply(scope,args)),stop)return stop=oldstop,out;for(i=0;ii>i;i++)if(l=listeners[i],"zIndex"in l)if(l.zIndex==indexed[z]){if(out.push(l.apply(scope,args)),stop)break;do if(z++,l=queue[indexed[z]],l&&out.push(l.apply(scope,args)),stop)break;while(l)}else queue[l.zIndex]=l;else if(out.push(l.apply(scope,args)),stop)break;return stop=oldstop,current_event=ce,out.length?out:null};eve.listeners=function(name){var item,items,k,i,ii,j,jj,nes,names=name.split(separator),e=events,es=[e],out=[];for(i=0,ii=names.length;ii>i;i++){for(nes=[],j=0,jj=es.length;jj>j;j++)for(e=es[j].n,items=[e[names[i]],e[wildcard]],k=2;k--;)item=items[k],item&&(nes.push(item),out=out.concat(item.f||[]));es=nes}return out},eve.on=function(name,f){for(var names=name.split(separator),e=events,i=0,ii=names.length;ii>i;i++)e=e.n,!e[names[i]]&&(e[names[i]]={n:{}}),e=e[names[i]];for(e.f=e.f||[],i=0,ii=e.f.length;ii>i;i++)if(e.f[i]==f)return fun;return e.f.push(f),function(zIndex){+zIndex==+zIndex&&(f.zIndex=+zIndex)}},eve.stop=function(){stop=1},eve.nt=function(subname){return subname?new RegExp("(?:\\.|\\/|^)"+subname+"(?:\\.|\\/|$)").test(current_event):current_event},eve.off=eve.unbind=function(name,f){var e,key,splice,i,ii,j,jj,names=name.split(separator),cur=[events];for(i=0,ii=names.length;ii>i;i++)for(j=0;j<cur.length;j+=splice.length-2){if(splice=[j,1],e=cur[j].n,names[i]!=wildcard)e[names[i]]&&splice.push(e[names[i]]);else for(key in e)e[has](key)&&splice.push(e[key]);cur.splice.apply(cur,splice)}for(i=0,ii=cur.length;ii>i;i++)for(e=cur[i];e.n;){if(f){if(e.f){for(j=0,jj=e.f.length;jj>j;j++)if(e.f[j]==f){e.f.splice(j,1);break}!e.f.length&&delete e.f}for(key in e.n)if(e.n[has](key)&&e.n[key].f){var funcs=e.n[key].f;for(j=0,jj=funcs.length;jj>j;j++)if(funcs[j]==f){funcs.splice(j,1);break}!funcs.length&&delete e.n[key].f}}else{delete e.f;for(key in e.n)e.n[has](key)&&e.n[key].f&&delete e.n[key].f}e=e.n}},eve.once=function(name,f){var f2=function(){var res=f.apply(this,arguments);return eve.unbind(name,f2),res};return eve.on(name,f2)},eve.version=version,eve.toString=function(){return"You are running Eve "+version},"undefined"!=typeof module&&module.exports?module.exports=eve:"undefined"!=typeof define?define("eve",[],function(){return eve}):glob.eve=eve}(this),function(){function R(first){if(R.is(first,"function"))return loaded?first():eve.on("raphael.DOMload",first);if(R.is(first,array))return R._engine.create[apply](R,first.splice(0,3+R.is(first[0],nu))).add(first);var args=Array.prototype.slice.call(arguments,0);if(R.is(args[args.length-1],"function")){var f=args.pop();return loaded?f.call(R._engine.create[apply](R,args)):eve.on("raphael.DOMload",function(){f.call(R._engine.create[apply](R,args))})}return R._engine.create[apply](R,arguments)}function clone(obj){if(Object(obj)!==obj)return obj;var res=new obj.constructor;for(var key in obj)obj[has](key)&&(res[key]=clone(obj[key]));return res}function repush(array,item){for(var i=0,ii=array.length;ii>i;i++)if(array[i]===item)return array.push(array.splice(i,1)[0])}function cacher(f,scope,postprocessor){function newf(){var arg=Array.prototype.slice.call(arguments,0),args=arg.join("␀"),cache=newf.cache=newf.cache||{},count=newf.count=newf.count||[];return cache[has](args)?(repush(count,args),postprocessor?postprocessor(cache[args]):cache[args]):(count.length>=1e3&&delete cache[count.shift()],count.push(args),cache[args]=f[apply](scope,arg),postprocessor?postprocessor(cache[args]):cache[args])}return newf}function clrToString(){return this.hex}function catmullRom2bezier(crp,z){for(var d=[],i=0,iLen=crp.length;iLen-2*!z>i;i+=2){var p=[{x:+crp[i-2],y:+crp[i-1]},{x:+crp[i],y:+crp[i+1]},{x:+crp[i+2],y:+crp[i+3]},{x:+crp[i+4],y:+crp[i+5]}];z?i?iLen-4==i?p[3]={x:+crp[0],y:+crp[1]}:iLen-2==i&&(p[2]={x:+crp[0],y:+crp[1]},p[3]={x:+crp[2],y:+crp[3]}):p[0]={x:+crp[iLen-2],y:+crp[iLen-1]}:iLen-4==i?p[3]=p[2]:i||(p[0]={x:+crp[i],y:+crp[i+1]}),d.push(["C",(-p[0].x+6*p[1].x+p[2].x)/6,(-p[0].y+6*p[1].y+p[2].y)/6,(p[1].x+6*p[2].x-p[3].x)/6,(p[1].y+6*p[2].y-p[3].y)/6,p[2].x,p[2].y])}return d}function base3(t,p1,p2,p3,p4){var t1=-3*p1+9*p2-9*p3+3*p4,t2=t*t1+6*p1-12*p2+6*p3;return t*t2-3*p1+3*p2}function bezlen(x1,y1,x2,y2,x3,y3,x4,y4,z){null==z&&(z=1),z=z>1?1:0>z?0:z;for(var z2=z/2,n=12,Tvalues=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],Cvalues=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],sum=0,i=0;n>i;i++){var ct=z2*Tvalues[i]+z2,xbase=base3(ct,x1,x2,x3,x4),ybase=base3(ct,y1,y2,y3,y4),comb=xbase*xbase+ybase*ybase;sum+=Cvalues[i]*math.sqrt(comb)}return z2*sum}function getTatLen(x1,y1,x2,y2,x3,y3,x4,y4,ll){if(!(0>ll||bezlen(x1,y1,x2,y2,x3,y3,x4,y4)<ll)){var l,t=1,step=t/2,t2=t-step,e=.01;for(l=bezlen(x1,y1,x2,y2,x3,y3,x4,y4,t2);abs(l-ll)>e;)step/=2,t2+=(ll>l?1:-1)*step,l=bezlen(x1,y1,x2,y2,x3,y3,x4,y4,t2);return t2}}function intersect(x1,y1,x2,y2,x3,y3,x4,y4){if(!(mmax(x1,x2)<mmin(x3,x4)||mmin(x1,x2)>mmax(x3,x4)||mmax(y1,y2)<mmin(y3,y4)||mmin(y1,y2)>mmax(y3,y4))){var nx=(x1*y2-y1*x2)*(x3-x4)-(x1-x2)*(x3*y4-y3*x4),ny=(x1*y2-y1*x2)*(y3-y4)-(y1-y2)*(x3*y4-y3*x4),denominator=(x1-x2)*(y3-y4)-(y1-y2)*(x3-x4);if(denominator){var px=nx/denominator,py=ny/denominator,px2=+px.toFixed(2),py2=+py.toFixed(2);if(!(px2<+mmin(x1,x2).toFixed(2)||px2>+mmax(x1,x2).toFixed(2)||px2<+mmin(x3,x4).toFixed(2)||px2>+mmax(x3,x4).toFixed(2)||py2<+mmin(y1,y2).toFixed(2)||py2>+mmax(y1,y2).toFixed(2)||py2<+mmin(y3,y4).toFixed(2)||py2>+mmax(y3,y4).toFixed(2)))return{x:px,y:py}}}}function interHelper(bez1,bez2,justCount){var bbox1=R.bezierBBox(bez1),bbox2=R.bezierBBox(bez2);if(!R.isBBoxIntersect(bbox1,bbox2))return justCount?0:[];for(var l1=bezlen.apply(0,bez1),l2=bezlen.apply(0,bez2),n1=~~(l1/5),n2=~~(l2/5),dots1=[],dots2=[],xy={},res=justCount?0:[],i=0;n1+1>i;i++){var p=R.findDotsAtSegment.apply(R,bez1.concat(i/n1));dots1.push({x:p.x,y:p.y,t:i/n1})}for(i=0;n2+1>i;i++)p=R.findDotsAtSegment.apply(R,bez2.concat(i/n2)),dots2.push({x:p.x,y:p.y,t:i/n2});for(i=0;n1>i;i++)for(var j=0;n2>j;j++){var di=dots1[i],di1=dots1[i+1],dj=dots2[j],dj1=dots2[j+1],ci=abs(di1.x-di.x)<.001?"y":"x",cj=abs(dj1.x-dj.x)<.001?"y":"x",is=intersect(di.x,di.y,di1.x,di1.y,dj.x,dj.y,dj1.x,dj1.y);if(is){if(xy[is.x.toFixed(4)]==is.y.toFixed(4))continue;xy[is.x.toFixed(4)]=is.y.toFixed(4);var t1=di.t+abs((is[ci]-di[ci])/(di1[ci]-di[ci]))*(di1.t-di.t),t2=dj.t+abs((is[cj]-dj[cj])/(dj1[cj]-dj[cj]))*(dj1.t-dj.t);t1>=0&&1>=t1&&t2>=0&&1>=t2&&(justCount?res++:res.push({x:is.x,y:is.y,t1:t1,t2:t2}))}}return res}function interPathHelper(path1,path2,justCount){path1=R._path2curve(path1),path2=R._path2curve(path2);for(var x1,y1,x2,y2,x1m,y1m,x2m,y2m,bez1,bez2,res=justCount?0:[],i=0,ii=path1.length;ii>i;i++){var pi=path1[i];if("M"==pi[0])x1=x1m=pi[1],y1=y1m=pi[2];else{"C"==pi[0]?(bez1=[x1,y1].concat(pi.slice(1)),x1=bez1[6],y1=bez1[7]):(bez1=[x1,y1,x1,y1,x1m,y1m,x1m,y1m],x1=x1m,y1=y1m);for(var j=0,jj=path2.length;jj>j;j++){var pj=path2[j];if("M"==pj[0])x2=x2m=pj[1],y2=y2m=pj[2];else{"C"==pj[0]?(bez2=[x2,y2].concat(pj.slice(1)),x2=bez2[6],y2=bez2[7]):(bez2=[x2,y2,x2,y2,x2m,y2m,x2m,y2m],x2=x2m,y2=y2m);var intr=interHelper(bez1,bez2,justCount);if(justCount)res+=intr;else{for(var k=0,kk=intr.length;kk>k;k++)intr[k].segment1=i,intr[k].segment2=j,intr[k].bez1=bez1,intr[k].bez2=bez2;res=res.concat(intr)}}}}}return res}function Matrix(a,b,c,d,e,f){null!=a?(this.a=+a,this.b=+b,this.c=+c,this.d=+d,this.e=+e,this.f=+f):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}function x_y_w_h(){return this.x+S+this.y+S+this.width+" × "+this.height}function CubicBezierAtTime(t,p1x,p1y,p2x,p2y,duration){function sampleCurveX(t){return((ax*t+bx)*t+cx)*t}function solve(x,epsilon){var t=solveCurveX(x,epsilon);return((ay*t+by)*t+cy)*t}function solveCurveX(x,epsilon){var t0,t1,t2,x2,d2,i;for(t2=x,i=0;8>i;i++){if(x2=sampleCurveX(t2)-x,abs(x2)<epsilon)return t2;if(d2=(3*ax*t2+2*bx)*t2+cx,abs(d2)<1e-6)break;t2-=x2/d2}if(t0=0,t1=1,t2=x,t0>t2)return t0;if(t2>t1)return t1;for(;t1>t0;){if(x2=sampleCurveX(t2),abs(x2-x)<epsilon)return t2;x>x2?t0=t2:t1=t2,t2=(t1-t0)/2+t0}return t2}var cx=3*p1x,bx=3*(p2x-p1x)-cx,ax=1-cx-bx,cy=3*p1y,by=3*(p2y-p1y)-cy,ay=1-cy-by;return solve(t,1/(200*duration))}function Animation(anim,ms){var percents=[],newAnim={};if(this.ms=ms,this.times=1,anim){for(var attr in anim)anim[has](attr)&&(newAnim[toFloat(attr)]=anim[attr],percents.push(toFloat(attr)));percents.sort(sortByNumber)}this.anim=newAnim,this.top=percents[percents.length-1],this.percents=percents}function runAnimation(anim,element,percent,status,totalOrigin,times){percent=toFloat(percent);var params,isInAnim,isInAnimSet,next,prev,timestamp,ms=anim.ms,from={},to={},diff={};if(status)for(i=0,ii=animationElements.length;ii>i;i++){var e=animationElements[i];if(e.el.id==element.id&&e.anim==anim){e.percent!=percent?(animationElements.splice(i,1),isInAnimSet=1):isInAnim=e,element.attr(e.totalOrigin);break}}else status=+to;for(var i=0,ii=anim.percents.length;ii>i;i++){if(anim.percents[i]==percent||anim.percents[i]>status*anim.top){percent=anim.percents[i],prev=anim.percents[i-1]||0,ms=ms/anim.top*(percent-prev),next=anim.percents[i+1],params=anim.anim[percent];break}status&&element.attr(anim.anim[anim.percents[i]])}if(params){if(isInAnim)isInAnim.initstatus=status,isInAnim.start=new Date-isInAnim.ms*status;else{for(var attr in params)if(params[has](attr)&&(availableAnimAttrs[has](attr)||element.paper.customAttributes[has](attr)))switch(from[attr]=element.attr(attr),null==from[attr]&&(from[attr]=availableAttrs[attr]),to[attr]=params[attr],availableAnimAttrs[attr]){case nu:diff[attr]=(to[attr]-from[attr])/ms;break;case"colour":from[attr]=R.getRGB(from[attr]);var toColour=R.getRGB(to[attr]);diff[attr]={r:(toColour.r-from[attr].r)/ms,g:(toColour.g-from[attr].g)/ms,b:(toColour.b-from[attr].b)/ms};break;case"path":var pathes=path2curve(from[attr],to[attr]),toPath=pathes[1];for(from[attr]=pathes[0],diff[attr]=[],i=0,ii=from[attr].length;ii>i;i++){diff[attr][i]=[0];for(var j=1,jj=from[attr][i].length;jj>j;j++)diff[attr][i][j]=(toPath[i][j]-from[attr][i][j])/ms}break;case"transform":var _=element._,eq=equaliseTransform(_[attr],to[attr]);if(eq)for(from[attr]=eq.from,to[attr]=eq.to,diff[attr]=[],diff[attr].real=!0,i=0,ii=from[attr].length;ii>i;i++)for(diff[attr][i]=[from[attr][i][0]],j=1,jj=from[attr][i].length;jj>j;j++)diff[attr][i][j]=(to[attr][i][j]-from[attr][i][j])/ms;else{var m=element.matrix||new Matrix,to2={_:{transform:_.transform},getBBox:function(){return element.getBBox(1)}};from[attr]=[m.a,m.b,m.c,m.d,m.e,m.f],extractTransform(to2,to[attr]),to[attr]=to2._.transform,diff[attr]=[(to2.matrix.a-m.a)/ms,(to2.matrix.b-m.b)/ms,(to2.matrix.c-m.c)/ms,(to2.matrix.d-m.d)/ms,(to2.matrix.e-m.e)/ms,(to2.matrix.f-m.f)/ms]}break;case"csv":var values=Str(params[attr])[split](separator),from2=Str(from[attr])[split](separator);if("clip-rect"==attr)for(from[attr]=from2,diff[attr]=[],i=from2.length;i--;)diff[attr][i]=(values[i]-from[attr][i])/ms;to[attr]=values;break;default:for(values=[][concat](params[attr]),from2=[][concat](from[attr]),diff[attr]=[],i=element.paper.customAttributes[attr].length;i--;)diff[attr][i]=((values[i]||0)-(from2[i]||0))/ms}var easing=params.easing,easyeasy=R.easing_formulas[easing];if(!easyeasy)if(easyeasy=Str(easing).match(bezierrg),easyeasy&&5==easyeasy.length){var curve=easyeasy;easyeasy=function(t){return CubicBezierAtTime(t,+curve[1],+curve[2],+curve[3],+curve[4],ms)}}else easyeasy=pipe;if(timestamp=params.start||anim.start||+new Date,e={anim:anim,percent:percent,timestamp:timestamp,start:timestamp+(anim.del||0),status:0,initstatus:status||0,stop:!1,ms:ms,easing:easyeasy,from:from,diff:diff,to:to,el:element,callback:params.callback,prev:prev,next:next,repeat:times||anim.times,origin:element.attr(),totalOrigin:totalOrigin},animationElements.push(e),status&&!isInAnim&&!isInAnimSet&&(e.stop=!0,e.start=new Date-ms*status,1==animationElements.length))return animation();isInAnimSet&&(e.start=new Date-e.ms*status),1==animationElements.length&&requestAnimFrame(animation)}eve("raphael.anim.start."+element.id,element,anim)}}function stopAnimation(paper){for(var i=0;i<animationElements.length;i++)animationElements[i].el.paper==paper&&animationElements.splice(i--,1)}R.version="2.1.0",R.eve=eve;var loaded,paperproto,separator=/[, ]+/,elements={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},formatrg=/\{(\d+)\}/g,has="hasOwnProperty",g={doc:document,win:window},oldRaphael={was:Object.prototype[has].call(g.win,"Raphael"),is:g.win.Raphael},Paper=function(){this.ca=this.customAttributes={}},apply="apply",concat="concat",supportsTouch="createTouch"in g.doc,E="",S=" ",Str=String,split="split",events="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[split](S),touchMap={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},lowerCase=Str.prototype.toLowerCase,math=Math,mmax=math.max,mmin=math.min,abs=math.abs,pow=math.pow,PI=math.PI,nu="number",string="string",array="array",objectToString=Object.prototype.toString,colourRegExp=(R._ISURL=/^url\(['"]?([^\)]+?)['"]?\)$/i,/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i),isnan={NaN:1,Infinity:1,"-Infinity":1},bezierrg=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,round=math.round,toFloat=parseFloat,toInt=parseInt,upperCase=Str.prototype.toUpperCase,availableAttrs=R._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0},availableAnimAttrs=R._availableAnimAttrs={blur:nu,"clip-rect":"csv",cx:nu,cy:nu,fill:"colour","fill-opacity":nu,"font-size":nu,height:nu,opacity:nu,path:"path",r:nu,rx:nu,ry:nu,stroke:"colour","stroke-opacity":nu,"stroke-width":nu,transform:"transform",width:nu,x:nu,y:nu},commaSpaces=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,hsrg={hs:1,rg:1},p2s=/,?([achlmqrstvxz]),?/gi,pathCommand=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,tCommand=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,pathValues=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,eldata=(R._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,{}),sortByNumber=function(a,b){return toFloat(a)-toFloat(b)},fun=function(){},pipe=function(x){return x},rectPath=R._rectPath=function(x,y,w,h,r){return r?[["M",x+r,y],["l",w-2*r,0],["a",r,r,0,0,1,r,r],["l",0,h-2*r],["a",r,r,0,0,1,-r,r],["l",2*r-w,0],["a",r,r,0,0,1,-r,-r],["l",0,2*r-h],["a",r,r,0,0,1,r,-r],["z"]]:[["M",x,y],["l",w,0],["l",0,h],["l",-w,0],["z"]]},ellipsePath=function(x,y,rx,ry){return null==ry&&(ry=rx),[["M",x,y],["m",0,-ry],["a",rx,ry,0,1,1,0,2*ry],["a",rx,ry,0,1,1,0,-2*ry],["z"]]},getPath=R._getPath={path:function(el){return el.attr("path")},circle:function(el){var a=el.attrs;return ellipsePath(a.cx,a.cy,a.r)},ellipse:function(el){var a=el.attrs;return ellipsePath(a.cx,a.cy,a.rx,a.ry)},rect:function(el){var a=el.attrs;return rectPath(a.x,a.y,a.width,a.height,a.r)},image:function(el){var a=el.attrs;return rectPath(a.x,a.y,a.width,a.height)},text:function(el){var bbox=el._getBBox();return rectPath(bbox.x,bbox.y,bbox.width,bbox.height)}},mapPath=R.mapPath=function(path,matrix){if(!matrix)return path;var x,y,i,j,ii,jj,pathi;for(path=path2curve(path),i=0,ii=path.length;ii>i;i++)for(pathi=path[i],j=1,jj=pathi.length;jj>j;j+=2)x=matrix.x(pathi[j],pathi[j+1]),y=matrix.y(pathi[j],pathi[j+1]),pathi[j]=x,pathi[j+1]=y;return path};if(R._g=g,R.type=g.win.SVGAngle||g.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML","VML"==R.type){var b,d=g.doc.createElement("div");if(d.innerHTML='<v:shape adj="1"/>',b=d.firstChild,b.style.behavior="url(#default#VML)",!b||"object"!=typeof b.adj)return R.type=E;d=null}R.svg=!(R.vml="VML"==R.type),R._Paper=Paper,R.fn=paperproto=Paper.prototype=R.prototype,R._id=0,R._oid=0,R.is=function(o,type){return type=lowerCase.call(type),"finite"==type?!isnan[has](+o):"array"==type?o instanceof Array:"null"==type&&null===o||type==typeof o&&null!==o||"object"==type&&o===Object(o)||"array"==type&&Array.isArray&&Array.isArray(o)||objectToString.call(o).slice(8,-1).toLowerCase()==type},R.angle=function(x1,y1,x2,y2,x3,y3){if(null==x3){var x=x1-x2,y=y1-y2;return x||y?(180+180*math.atan2(-y,-x)/PI+360)%360:0}return R.angle(x1,y1,x3,y3)-R.angle(x2,y2,x3,y3)},R.rad=function(deg){return deg%360*PI/180},R.deg=function(rad){return 180*rad/PI%360},R.snapTo=function(values,value,tolerance){if(tolerance=R.is(tolerance,"finite")?tolerance:10,R.is(values,array)){for(var i=values.length;i--;)if(abs(values[i]-value)<=tolerance)return values[i]}else{values=+values;var rem=value%values;if(tolerance>rem)return value-rem;if(rem>values-tolerance)return value-rem+values}return value};R.createUUID=function(uuidRegEx,uuidReplacer){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(uuidRegEx,uuidReplacer).toUpperCase()}}(/[xy]/g,function(c){var r=16*math.random()|0,v="x"==c?r:3&r|8;return v.toString(16)});R.setWindow=function(newwin){eve("raphael.setWindow",R,g.win,newwin),g.win=newwin,g.doc=g.win.document,R._engine.initWin&&R._engine.initWin(g.win)};var toHex=function(color){if(R.vml){var bod,trim=/^\s+|\s+$/g;try{var docum=new ActiveXObject("htmlfile");docum.write("<body>"),docum.close(),bod=docum.body}catch(e){bod=createPopup().document.body}var range=bod.createTextRange();toHex=cacher(function(color){try{bod.style.color=Str(color).replace(trim,E);var value=range.queryCommandValue("ForeColor");return value=(255&value)<<16|65280&value|(16711680&value)>>>16,"#"+("000000"+value.toString(16)).slice(-6)}catch(e){return"none"}})}else{var i=g.doc.createElement("i");i.title="Raphaël Colour Picker",i.style.display="none",g.doc.body.appendChild(i),toHex=cacher(function(color){return i.style.color=color,g.doc.defaultView.getComputedStyle(i,E).getPropertyValue("color")})}return toHex(color)},hsbtoString=function(){return"hsb("+[this.h,this.s,this.b]+")"},hsltoString=function(){return"hsl("+[this.h,this.s,this.l]+")"},rgbtoString=function(){return this.hex},prepareRGB=function(r,g,b){if(null==g&&R.is(r,"object")&&"r"in r&&"g"in r&&"b"in r&&(b=r.b,g=r.g,r=r.r),null==g&&R.is(r,string)){var clr=R.getRGB(r);r=clr.r,g=clr.g,b=clr.b}return(r>1||g>1||b>1)&&(r/=255,g/=255,b/=255),[r,g,b]},packageRGB=function(r,g,b,o){r*=255,g*=255,b*=255;var rgb={r:r,g:g,b:b,hex:R.rgb(r,g,b),toString:rgbtoString};return R.is(o,"finite")&&(rgb.opacity=o),rgb};R.color=function(clr){var rgb;return R.is(clr,"object")&&"h"in clr&&"s"in clr&&"b"in clr?(rgb=R.hsb2rgb(clr),clr.r=rgb.r,clr.g=rgb.g,clr.b=rgb.b,clr.hex=rgb.hex):R.is(clr,"object")&&"h"in clr&&"s"in clr&&"l"in clr?(rgb=R.hsl2rgb(clr),clr.r=rgb.r,clr.g=rgb.g,clr.b=rgb.b,clr.hex=rgb.hex):(R.is(clr,"string")&&(clr=R.getRGB(clr)),R.is(clr,"object")&&"r"in clr&&"g"in clr&&"b"in clr?(rgb=R.rgb2hsl(clr),clr.h=rgb.h,clr.s=rgb.s,clr.l=rgb.l,rgb=R.rgb2hsb(clr),clr.v=rgb.b):(clr={hex:"none"},clr.r=clr.g=clr.b=clr.h=clr.s=clr.v=clr.l=-1)),clr.toString=rgbtoString,clr},R.hsb2rgb=function(h,s,v,o){this.is(h,"object")&&"h"in h&&"s"in h&&"b"in h&&(v=h.b,s=h.s,h=h.h,o=h.o),h*=360;var R,G,B,X,C;return h=h%360/60,C=v*s,X=C*(1-abs(h%2-1)),R=G=B=v-C,h=~~h,R+=[C,X,0,0,X,C][h],G+=[X,C,C,X,0,0][h],B+=[0,0,X,C,C,X][h],packageRGB(R,G,B,o)},R.hsl2rgb=function(h,s,l,o){this.is(h,"object")&&"h"in h&&"s"in h&&"l"in h&&(l=h.l,s=h.s,h=h.h),(h>1||s>1||l>1)&&(h/=360,s/=100,l/=100),h*=360;var R,G,B,X,C;return h=h%360/60,C=2*s*(.5>l?l:1-l),X=C*(1-abs(h%2-1)),R=G=B=l-C/2,h=~~h,R+=[C,X,0,0,X,C][h],G+=[X,C,C,X,0,0][h],B+=[0,0,X,C,C,X][h],packageRGB(R,G,B,o)},R.rgb2hsb=function(r,g,b){b=prepareRGB(r,g,b),r=b[0],g=b[1],b=b[2];var H,S,V,C;return V=mmax(r,g,b),C=V-mmin(r,g,b),H=0==C?null:V==r?(g-b)/C:V==g?(b-r)/C+2:(r-g)/C+4,H=(H+360)%6*60/360,S=0==C?0:C/V,{h:H,s:S,b:V,toString:hsbtoString}},R.rgb2hsl=function(r,g,b){b=prepareRGB(r,g,b),r=b[0],g=b[1],b=b[2];var H,S,L,M,m,C;return M=mmax(r,g,b),m=mmin(r,g,b),C=M-m,H=0==C?null:M==r?(g-b)/C:M==g?(b-r)/C+2:(r-g)/C+4,H=(H+360)%6*60/360,L=(M+m)/2,S=0==C?0:.5>L?C/(2*L):C/(2-2*L),{h:H,s:S,l:L,toString:hsltoString}},R._path2string=function(){return this.join(",").replace(p2s,"$1")};R._preload=function(src,f){var img=g.doc.createElement("img");img.style.cssText="position:absolute;left:-9999em;top:-9999em",img.onload=function(){f.call(this),this.onload=null,g.doc.body.removeChild(this)},img.onerror=function(){g.doc.body.removeChild(this)},g.doc.body.appendChild(img),img.src=src};R.getRGB=cacher(function(colour){if(!colour||(colour=Str(colour)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:clrToString};if("none"==colour)return{r:-1,g:-1,b:-1,hex:"none",toString:clrToString};!(hsrg[has](colour.toLowerCase().substring(0,2))||"#"==colour.charAt())&&(colour=toHex(colour));var red,green,blue,opacity,t,values,rgb=colour.match(colourRegExp);return rgb?(rgb[2]&&(blue=toInt(rgb[2].substring(5),16),green=toInt(rgb[2].substring(3,5),16),red=toInt(rgb[2].substring(1,3),16)),rgb[3]&&(blue=toInt((t=rgb[3].charAt(3))+t,16),green=toInt((t=rgb[3].charAt(2))+t,16),red=toInt((t=rgb[3].charAt(1))+t,16)),rgb[4]&&(values=rgb[4][split](commaSpaces),red=toFloat(values[0]),"%"==values[0].slice(-1)&&(red*=2.55),green=toFloat(values[1]),"%"==values[1].slice(-1)&&(green*=2.55),blue=toFloat(values[2]),"%"==values[2].slice(-1)&&(blue*=2.55),"rgba"==rgb[1].toLowerCase().slice(0,4)&&(opacity=toFloat(values[3])),values[3]&&"%"==values[3].slice(-1)&&(opacity/=100)),rgb[5]?(values=rgb[5][split](commaSpaces),red=toFloat(values[0]),"%"==values[0].slice(-1)&&(red*=2.55),green=toFloat(values[1]),"%"==values[1].slice(-1)&&(green*=2.55),blue=toFloat(values[2]),"%"==values[2].slice(-1)&&(blue*=2.55),("deg"==values[0].slice(-3)||"°"==values[0].slice(-1))&&(red/=360),"hsba"==rgb[1].toLowerCase().slice(0,4)&&(opacity=toFloat(values[3])),values[3]&&"%"==values[3].slice(-1)&&(opacity/=100),R.hsb2rgb(red,green,blue,opacity)):rgb[6]?(values=rgb[6][split](commaSpaces),red=toFloat(values[0]),"%"==values[0].slice(-1)&&(red*=2.55),green=toFloat(values[1]),"%"==values[1].slice(-1)&&(green*=2.55),blue=toFloat(values[2]),"%"==values[2].slice(-1)&&(blue*=2.55),("deg"==values[0].slice(-3)||"°"==values[0].slice(-1))&&(red/=360),"hsla"==rgb[1].toLowerCase().slice(0,4)&&(opacity=toFloat(values[3])),values[3]&&"%"==values[3].slice(-1)&&(opacity/=100),R.hsl2rgb(red,green,blue,opacity)):(rgb={r:red,g:green,b:blue,toString:clrToString},rgb.hex="#"+(16777216|blue|green<<8|red<<16).toString(16).slice(1),R.is(opacity,"finite")&&(rgb.opacity=opacity),rgb)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:clrToString}},R),R.hsb=cacher(function(h,s,b){return R.hsb2rgb(h,s,b).hex}),R.hsl=cacher(function(h,s,l){return R.hsl2rgb(h,s,l).hex}),R.rgb=cacher(function(r,g,b){return"#"+(16777216|b|g<<8|r<<16).toString(16).slice(1)}),R.getColor=function(value){var start=this.getColor.start=this.getColor.start||{h:0,s:1,b:value||.75},rgb=this.hsb2rgb(start.h,start.s,start.b);return start.h+=.075,start.h>1&&(start.h=0,start.s-=.2,start.s<=0&&(this.getColor.start={h:0,s:1,b:start.b})),rgb.hex},R.getColor.reset=function(){delete this.start},R.parsePathString=function(pathString){if(!pathString)return null;var pth=paths(pathString);if(pth.arr)return pathClone(pth.arr);var paramCounts={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},data=[];return R.is(pathString,array)&&R.is(pathString[0],array)&&(data=pathClone(pathString)),data.length||Str(pathString).replace(pathCommand,function(a,b,c){var params=[],name=b.toLowerCase();if(c.replace(pathValues,function(a,b){b&&params.push(+b)}),"m"==name&&params.length>2&&(data.push([b][concat](params.splice(0,2))),name="l",b="m"==b?"l":"L"),"r"==name)data.push([b][concat](params));else for(;params.length>=paramCounts[name]&&(data.push([b][concat](params.splice(0,paramCounts[name]))),paramCounts[name]););}),data.toString=R._path2string,pth.arr=pathClone(data),data},R.parseTransformString=cacher(function(TString){if(!TString)return null;var data=[];return R.is(TString,array)&&R.is(TString[0],array)&&(data=pathClone(TString)),data.length||Str(TString).replace(tCommand,function(a,b,c){var params=[];lowerCase.call(b);c.replace(pathValues,function(a,b){b&&params.push(+b)}),data.push([b][concat](params))}),data.toString=R._path2string,data});var paths=function(ps){var p=paths.ps=paths.ps||{};return p[ps]?p[ps].sleep=100:p[ps]={sleep:100},setTimeout(function(){for(var key in p)p[has](key)&&key!=ps&&(p[key].sleep--,!p[key].sleep&&delete p[key])}),p[ps]};R.findDotsAtSegment=function(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,t){var t1=1-t,t13=pow(t1,3),t12=pow(t1,2),t2=t*t,t3=t2*t,x=t13*p1x+3*t12*t*c1x+3*t1*t*t*c2x+t3*p2x,y=t13*p1y+3*t12*t*c1y+3*t1*t*t*c2y+t3*p2y,mx=p1x+2*t*(c1x-p1x)+t2*(c2x-2*c1x+p1x),my=p1y+2*t*(c1y-p1y)+t2*(c2y-2*c1y+p1y),nx=c1x+2*t*(c2x-c1x)+t2*(p2x-2*c2x+c1x),ny=c1y+2*t*(c2y-c1y)+t2*(p2y-2*c2y+c1y),ax=t1*p1x+t*c1x,ay=t1*p1y+t*c1y,cx=t1*c2x+t*p2x,cy=t1*c2y+t*p2y,alpha=90-180*math.atan2(mx-nx,my-ny)/PI;return(mx>nx||ny>my)&&(alpha+=180),{x:x,y:y,m:{x:mx,y:my},n:{x:nx,y:ny},start:{x:ax,y:ay},end:{x:cx,y:cy},alpha:alpha}},R.bezierBBox=function(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y){R.is(p1x,"array")||(p1x=[p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y]);var bbox=curveDim.apply(null,p1x);return{x:bbox.min.x,y:bbox.min.y,x2:bbox.max.x,y2:bbox.max.y,width:bbox.max.x-bbox.min.x,height:bbox.max.y-bbox.min.y}},R.isPointInsideBBox=function(bbox,x,y){return x>=bbox.x&&x<=bbox.x2&&y>=bbox.y&&y<=bbox.y2},R.isBBoxIntersect=function(bbox1,bbox2){var i=R.isPointInsideBBox;return i(bbox2,bbox1.x,bbox1.y)||i(bbox2,bbox1.x2,bbox1.y)||i(bbox2,bbox1.x,bbox1.y2)||i(bbox2,bbox1.x2,bbox1.y2)||i(bbox1,bbox2.x,bbox2.y)||i(bbox1,bbox2.x2,bbox2.y)||i(bbox1,bbox2.x,bbox2.y2)||i(bbox1,bbox2.x2,bbox2.y2)||(bbox1.x<bbox2.x2&&bbox1.x>bbox2.x||bbox2.x<bbox1.x2&&bbox2.x>bbox1.x)&&(bbox1.y<bbox2.y2&&bbox1.y>bbox2.y||bbox2.y<bbox1.y2&&bbox2.y>bbox1.y)},R.pathIntersection=function(path1,path2){return interPathHelper(path1,path2)},R.pathIntersectionNumber=function(path1,path2){return interPathHelper(path1,path2,1)},R.isPointInsidePath=function(path,x,y){var bbox=R.pathBBox(path);return R.isPointInsideBBox(bbox,x,y)&&interPathHelper(path,[["M",x,y],["H",bbox.x2+10]],1)%2==1},R._removedFactory=function(methodname){return function(){eve("raphael.log",null,"Raphaël: you are calling to method “"+methodname+"” of removed object",methodname)}};var pathDimensions=R.pathBBox=function(path){var pth=paths(path);if(pth.bbox)return pth.bbox;if(!path)return{x:0,y:0,width:0,height:0,x2:0,y2:0};path=path2curve(path);for(var p,x=0,y=0,X=[],Y=[],i=0,ii=path.length;ii>i;i++)if(p=path[i],"M"==p[0])x=p[1],y=p[2],X.push(x),Y.push(y);else{var dim=curveDim(x,y,p[1],p[2],p[3],p[4],p[5],p[6]);X=X[concat](dim.min.x,dim.max.x),Y=Y[concat](dim.min.y,dim.max.y),x=p[5],y=p[6]}var xmin=mmin[apply](0,X),ymin=mmin[apply](0,Y),xmax=mmax[apply](0,X),ymax=mmax[apply](0,Y),bb={x:xmin,y:ymin,x2:xmax,y2:ymax,width:xmax-xmin,height:ymax-ymin};return pth.bbox=clone(bb),bb},pathClone=function(pathArray){var res=clone(pathArray);return res.toString=R._path2string,res},pathToRelative=R._pathToRelative=function(pathArray){var pth=paths(pathArray);if(pth.rel)return pathClone(pth.rel);R.is(pathArray,array)&&R.is(pathArray&&pathArray[0],array)||(pathArray=R.parsePathString(pathArray));var res=[],x=0,y=0,mx=0,my=0,start=0;"M"==pathArray[0][0]&&(x=pathArray[0][1],y=pathArray[0][2],mx=x,my=y,start++,res.push(["M",x,y]));for(var i=start,ii=pathArray.length;ii>i;i++){var r=res[i]=[],pa=pathArray[i];if(pa[0]!=lowerCase.call(pa[0]))switch(r[0]=lowerCase.call(pa[0]),r[0]){case"a":r[1]=pa[1],r[2]=pa[2],r[3]=pa[3],r[4]=pa[4],r[5]=pa[5],r[6]=+(pa[6]-x).toFixed(3),r[7]=+(pa[7]-y).toFixed(3);break;case"v":r[1]=+(pa[1]-y).toFixed(3);break;case"m":mx=pa[1],my=pa[2];default:for(var j=1,jj=pa.length;jj>j;j++)r[j]=+(pa[j]-(j%2?x:y)).toFixed(3)}else{r=res[i]=[],"m"==pa[0]&&(mx=pa[1]+x,my=pa[2]+y);for(var k=0,kk=pa.length;kk>k;k++)res[i][k]=pa[k]}var len=res[i].length;switch(res[i][0]){case"z":x=mx,y=my;break;case"h":x+=+res[i][len-1];break;case"v":y+=+res[i][len-1];break;default:x+=+res[i][len-2],y+=+res[i][len-1]}}return res.toString=R._path2string,pth.rel=pathClone(res),res},pathToAbsolute=R._pathToAbsolute=function(pathArray){var pth=paths(pathArray);if(pth.abs)return pathClone(pth.abs);if(R.is(pathArray,array)&&R.is(pathArray&&pathArray[0],array)||(pathArray=R.parsePathString(pathArray)),!pathArray||!pathArray.length)return[["M",0,0]];var res=[],x=0,y=0,mx=0,my=0,start=0;"M"==pathArray[0][0]&&(x=+pathArray[0][1],y=+pathArray[0][2],mx=x,my=y,start++,res[0]=["M",x,y]);for(var r,pa,crz=3==pathArray.length&&"M"==pathArray[0][0]&&"R"==pathArray[1][0].toUpperCase()&&"Z"==pathArray[2][0].toUpperCase(),i=start,ii=pathArray.length;ii>i;i++){if(res.push(r=[]),pa=pathArray[i],pa[0]!=upperCase.call(pa[0]))switch(r[0]=upperCase.call(pa[0]),r[0]){case"A":r[1]=pa[1],r[2]=pa[2],r[3]=pa[3],r[4]=pa[4],r[5]=pa[5],r[6]=+(pa[6]+x),r[7]=+(pa[7]+y);break;case"V":r[1]=+pa[1]+y;break;case"H":r[1]=+pa[1]+x;break;case"R":for(var dots=[x,y][concat](pa.slice(1)),j=2,jj=dots.length;jj>j;j++)dots[j]=+dots[j]+x,dots[++j]=+dots[j]+y;res.pop(),res=res[concat](catmullRom2bezier(dots,crz));
break;case"M":mx=+pa[1]+x,my=+pa[2]+y;default:for(j=1,jj=pa.length;jj>j;j++)r[j]=+pa[j]+(j%2?x:y)}else if("R"==pa[0])dots=[x,y][concat](pa.slice(1)),res.pop(),res=res[concat](catmullRom2bezier(dots,crz)),r=["R"][concat](pa.slice(-2));else for(var k=0,kk=pa.length;kk>k;k++)r[k]=pa[k];switch(r[0]){case"Z":x=mx,y=my;break;case"H":x=r[1];break;case"V":y=r[1];break;case"M":mx=r[r.length-2],my=r[r.length-1];default:x=r[r.length-2],y=r[r.length-1]}}return res.toString=R._path2string,pth.abs=pathClone(res),res},l2c=function(x1,y1,x2,y2){return[x1,y1,x2,y2,x2,y2]},q2c=function(x1,y1,ax,ay,x2,y2){var _13=1/3,_23=2/3;return[_13*x1+_23*ax,_13*y1+_23*ay,_13*x2+_23*ax,_13*y2+_23*ay,x2,y2]},a2c=function(x1,y1,rx,ry,angle,large_arc_flag,sweep_flag,x2,y2,recursive){var xy,_120=120*PI/180,rad=PI/180*(+angle||0),res=[],rotate=cacher(function(x,y,rad){var X=x*math.cos(rad)-y*math.sin(rad),Y=x*math.sin(rad)+y*math.cos(rad);return{x:X,y:Y}});if(recursive)f1=recursive[0],f2=recursive[1],cx=recursive[2],cy=recursive[3];else{xy=rotate(x1,y1,-rad),x1=xy.x,y1=xy.y,xy=rotate(x2,y2,-rad),x2=xy.x,y2=xy.y;var x=(math.cos(PI/180*angle),math.sin(PI/180*angle),(x1-x2)/2),y=(y1-y2)/2,h=x*x/(rx*rx)+y*y/(ry*ry);h>1&&(h=math.sqrt(h),rx=h*rx,ry=h*ry);var rx2=rx*rx,ry2=ry*ry,k=(large_arc_flag==sweep_flag?-1:1)*math.sqrt(abs((rx2*ry2-rx2*y*y-ry2*x*x)/(rx2*y*y+ry2*x*x))),cx=k*rx*y/ry+(x1+x2)/2,cy=k*-ry*x/rx+(y1+y2)/2,f1=math.asin(((y1-cy)/ry).toFixed(9)),f2=math.asin(((y2-cy)/ry).toFixed(9));f1=cx>x1?PI-f1:f1,f2=cx>x2?PI-f2:f2,0>f1&&(f1=2*PI+f1),0>f2&&(f2=2*PI+f2),sweep_flag&&f1>f2&&(f1-=2*PI),!sweep_flag&&f2>f1&&(f2-=2*PI)}var df=f2-f1;if(abs(df)>_120){var f2old=f2,x2old=x2,y2old=y2;f2=f1+_120*(sweep_flag&&f2>f1?1:-1),x2=cx+rx*math.cos(f2),y2=cy+ry*math.sin(f2),res=a2c(x2,y2,rx,ry,angle,0,sweep_flag,x2old,y2old,[f2,f2old,cx,cy])}df=f2-f1;var c1=math.cos(f1),s1=math.sin(f1),c2=math.cos(f2),s2=math.sin(f2),t=math.tan(df/4),hx=4/3*rx*t,hy=4/3*ry*t,m1=[x1,y1],m2=[x1+hx*s1,y1-hy*c1],m3=[x2+hx*s2,y2-hy*c2],m4=[x2,y2];if(m2[0]=2*m1[0]-m2[0],m2[1]=2*m1[1]-m2[1],recursive)return[m2,m3,m4][concat](res);res=[m2,m3,m4][concat](res).join()[split](",");for(var newres=[],i=0,ii=res.length;ii>i;i++)newres[i]=i%2?rotate(res[i-1],res[i],rad).y:rotate(res[i],res[i+1],rad).x;return newres},findDotAtSegment=function(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,t){var t1=1-t;return{x:pow(t1,3)*p1x+3*pow(t1,2)*t*c1x+3*t1*t*t*c2x+pow(t,3)*p2x,y:pow(t1,3)*p1y+3*pow(t1,2)*t*c1y+3*t1*t*t*c2y+pow(t,3)*p2y}},curveDim=cacher(function(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y){var dot,a=c2x-2*c1x+p1x-(p2x-2*c2x+c1x),b=2*(c1x-p1x)-2*(c2x-c1x),c=p1x-c1x,t1=(-b+math.sqrt(b*b-4*a*c))/2/a,t2=(-b-math.sqrt(b*b-4*a*c))/2/a,y=[p1y,p2y],x=[p1x,p2x];return abs(t1)>"1e12"&&(t1=.5),abs(t2)>"1e12"&&(t2=.5),t1>0&&1>t1&&(dot=findDotAtSegment(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,t1),x.push(dot.x),y.push(dot.y)),t2>0&&1>t2&&(dot=findDotAtSegment(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,t2),x.push(dot.x),y.push(dot.y)),a=c2y-2*c1y+p1y-(p2y-2*c2y+c1y),b=2*(c1y-p1y)-2*(c2y-c1y),c=p1y-c1y,t1=(-b+math.sqrt(b*b-4*a*c))/2/a,t2=(-b-math.sqrt(b*b-4*a*c))/2/a,abs(t1)>"1e12"&&(t1=.5),abs(t2)>"1e12"&&(t2=.5),t1>0&&1>t1&&(dot=findDotAtSegment(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,t1),x.push(dot.x),y.push(dot.y)),t2>0&&1>t2&&(dot=findDotAtSegment(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,t2),x.push(dot.x),y.push(dot.y)),{min:{x:mmin[apply](0,x),y:mmin[apply](0,y)},max:{x:mmax[apply](0,x),y:mmax[apply](0,y)}}}),path2curve=R._path2curve=cacher(function(path,path2){var pth=!path2&&paths(path);if(!path2&&pth.curve)return pathClone(pth.curve);for(var p=pathToAbsolute(path),p2=path2&&pathToAbsolute(path2),attrs={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},attrs2={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},processPath=(function(path,d){var nx,ny;if(!path)return["C",d.x,d.y,d.x,d.y,d.x,d.y];switch(!(path[0]in{T:1,Q:1})&&(d.qx=d.qy=null),path[0]){case"M":d.X=path[1],d.Y=path[2];break;case"A":path=["C"][concat](a2c[apply](0,[d.x,d.y][concat](path.slice(1))));break;case"S":nx=d.x+(d.x-(d.bx||d.x)),ny=d.y+(d.y-(d.by||d.y)),path=["C",nx,ny][concat](path.slice(1));break;case"T":d.qx=d.x+(d.x-(d.qx||d.x)),d.qy=d.y+(d.y-(d.qy||d.y)),path=["C"][concat](q2c(d.x,d.y,d.qx,d.qy,path[1],path[2]));break;case"Q":d.qx=path[1],d.qy=path[2],path=["C"][concat](q2c(d.x,d.y,path[1],path[2],path[3],path[4]));break;case"L":path=["C"][concat](l2c(d.x,d.y,path[1],path[2]));break;case"H":path=["C"][concat](l2c(d.x,d.y,path[1],d.y));break;case"V":path=["C"][concat](l2c(d.x,d.y,d.x,path[1]));break;case"Z":path=["C"][concat](l2c(d.x,d.y,d.X,d.Y))}return path}),fixArc=function(pp,i){if(pp[i].length>7){pp[i].shift();for(var pi=pp[i];pi.length;)pp.splice(i++,0,["C"][concat](pi.splice(0,6)));pp.splice(i,1),ii=mmax(p.length,p2&&p2.length||0)}},fixM=function(path1,path2,a1,a2,i){path1&&path2&&"M"==path1[i][0]&&"M"!=path2[i][0]&&(path2.splice(i,0,["M",a2.x,a2.y]),a1.bx=0,a1.by=0,a1.x=path1[i][1],a1.y=path1[i][2],ii=mmax(p.length,p2&&p2.length||0))},i=0,ii=mmax(p.length,p2&&p2.length||0);ii>i;i++){p[i]=processPath(p[i],attrs),fixArc(p,i),p2&&(p2[i]=processPath(p2[i],attrs2)),p2&&fixArc(p2,i),fixM(p,p2,attrs,attrs2,i),fixM(p2,p,attrs2,attrs,i);var seg=p[i],seg2=p2&&p2[i],seglen=seg.length,seg2len=p2&&seg2.length;attrs.x=seg[seglen-2],attrs.y=seg[seglen-1],attrs.bx=toFloat(seg[seglen-4])||attrs.x,attrs.by=toFloat(seg[seglen-3])||attrs.y,attrs2.bx=p2&&(toFloat(seg2[seg2len-4])||attrs2.x),attrs2.by=p2&&(toFloat(seg2[seg2len-3])||attrs2.y),attrs2.x=p2&&seg2[seg2len-2],attrs2.y=p2&&seg2[seg2len-1]}return p2||(pth.curve=pathClone(p)),p2?[p,p2]:p},null,pathClone),tear=(R._parseDots=cacher(function(gradient){for(var dots=[],i=0,ii=gradient.length;ii>i;i++){var dot={},par=gradient[i].match(/^([^:]*):?([\d\.]*)/);if(dot.color=R.getRGB(par[1]),dot.color.error)return null;dot.color=dot.color.hex,par[2]&&(dot.offset=par[2]+"%"),dots.push(dot)}for(i=1,ii=dots.length-1;ii>i;i++)if(!dots[i].offset){for(var start=toFloat(dots[i-1].offset||0),end=0,j=i+1;ii>j;j++)if(dots[j].offset){end=dots[j].offset;break}end||(end=100,j=ii),end=toFloat(end);for(var d=(end-start)/(j-i+1);j>i;i++)start+=d,dots[i].offset=start+"%"}return dots}),R._tear=function(el,paper){el==paper.top&&(paper.top=el.prev),el==paper.bottom&&(paper.bottom=el.next),el.next&&(el.next.prev=el.prev),el.prev&&(el.prev.next=el.next)}),toMatrix=(R._tofront=function(el,paper){paper.top!==el&&(tear(el,paper),el.next=null,el.prev=paper.top,paper.top.next=el,paper.top=el)},R._toback=function(el,paper){paper.bottom!==el&&(tear(el,paper),el.next=paper.bottom,el.prev=null,paper.bottom.prev=el,paper.bottom=el)},R._insertafter=function(el,el2,paper){tear(el,paper),el2==paper.top&&(paper.top=el),el2.next&&(el2.next.prev=el),el.next=el2.next,el.prev=el2,el2.next=el},R._insertbefore=function(el,el2,paper){tear(el,paper),el2==paper.bottom&&(paper.bottom=el),el2.prev&&(el2.prev.next=el),el.prev=el2.prev,el2.prev=el,el.next=el2},R.toMatrix=function(path,transform){var bb=pathDimensions(path),el={_:{transform:E},getBBox:function(){return bb}};return extractTransform(el,transform),el.matrix}),extractTransform=(R.transformPath=function(path,transform){return mapPath(path,toMatrix(path,transform))},R._extractTransform=function(el,tstr){if(null==tstr)return el._.transform;tstr=Str(tstr).replace(/\.{3}|\u2026/g,el._.transform||E);var tdata=R.parseTransformString(tstr),deg=0,dx=0,dy=0,sx=1,sy=1,_=el._,m=new Matrix;if(_.transform=tdata||[],tdata)for(var i=0,ii=tdata.length;ii>i;i++){var x1,y1,x2,y2,bb,t=tdata[i],tlen=t.length,command=Str(t[0]).toLowerCase(),absolute=t[0]!=command,inver=absolute?m.invert():0;"t"==command&&3==tlen?absolute?(x1=inver.x(0,0),y1=inver.y(0,0),x2=inver.x(t[1],t[2]),y2=inver.y(t[1],t[2]),m.translate(x2-x1,y2-y1)):m.translate(t[1],t[2]):"r"==command?2==tlen?(bb=bb||el.getBBox(1),m.rotate(t[1],bb.x+bb.width/2,bb.y+bb.height/2),deg+=t[1]):4==tlen&&(absolute?(x2=inver.x(t[2],t[3]),y2=inver.y(t[2],t[3]),m.rotate(t[1],x2,y2)):m.rotate(t[1],t[2],t[3]),deg+=t[1]):"s"==command?2==tlen||3==tlen?(bb=bb||el.getBBox(1),m.scale(t[1],t[tlen-1],bb.x+bb.width/2,bb.y+bb.height/2),sx*=t[1],sy*=t[tlen-1]):5==tlen&&(absolute?(x2=inver.x(t[3],t[4]),y2=inver.y(t[3],t[4]),m.scale(t[1],t[2],x2,y2)):m.scale(t[1],t[2],t[3],t[4]),sx*=t[1],sy*=t[2]):"m"==command&&7==tlen&&m.add(t[1],t[2],t[3],t[4],t[5],t[6]),_.dirtyT=1,el.matrix=m}el.matrix=m,_.sx=sx,_.sy=sy,_.deg=deg,_.dx=dx=m.e,_.dy=dy=m.f,1==sx&&1==sy&&!deg&&_.bbox?(_.bbox.x+=+dx,_.bbox.y+=+dy):_.dirtyT=1}),getEmpty=function(item){var l=item[0];switch(l.toLowerCase()){case"t":return[l,0,0];case"m":return[l,1,0,0,1,0,0];case"r":return 4==item.length?[l,0,item[2],item[3]]:[l,0];case"s":return 5==item.length?[l,1,1,item[3],item[4]]:3==item.length?[l,1,1]:[l,1]}},equaliseTransform=R._equaliseTransform=function(t1,t2){t2=Str(t2).replace(/\.{3}|\u2026/g,t1),t1=R.parseTransformString(t1)||[],t2=R.parseTransformString(t2)||[];for(var j,jj,tt1,tt2,maxlength=mmax(t1.length,t2.length),from=[],to=[],i=0;maxlength>i;i++){if(tt1=t1[i]||getEmpty(t2[i]),tt2=t2[i]||getEmpty(tt1),tt1[0]!=tt2[0]||"r"==tt1[0].toLowerCase()&&(tt1[2]!=tt2[2]||tt1[3]!=tt2[3])||"s"==tt1[0].toLowerCase()&&(tt1[3]!=tt2[3]||tt1[4]!=tt2[4]))return;for(from[i]=[],to[i]=[],j=0,jj=mmax(tt1.length,tt2.length);jj>j;j++)j in tt1&&(from[i][j]=tt1[j]),j in tt2&&(to[i][j]=tt2[j])}return{from:from,to:to}};R._getContainer=function(x,y,w,h){var container;return container=null!=h||R.is(x,"object")?x:g.doc.getElementById(x),null!=container?container.tagName?null==y?{container:container,width:container.style.pixelWidth||container.offsetWidth,height:container.style.pixelHeight||container.offsetHeight}:{container:container,width:y,height:w}:{container:1,x:x,y:y,width:w,height:h}:void 0},R.pathToRelative=pathToRelative,R._engine={},R.path2curve=path2curve,R.matrix=function(a,b,c,d,e,f){return new Matrix(a,b,c,d,e,f)},function(matrixproto){function norm(a){return a[0]*a[0]+a[1]*a[1]}function normalize(a){var mag=math.sqrt(norm(a));a[0]&&(a[0]/=mag),a[1]&&(a[1]/=mag)}matrixproto.add=function(a,b,c,d,e,f){var x,y,z,res,out=[[],[],[]],m=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],matrix=[[a,c,e],[b,d,f],[0,0,1]];for(a&&a instanceof Matrix&&(matrix=[[a.a,a.c,a.e],[a.b,a.d,a.f],[0,0,1]]),x=0;3>x;x++)for(y=0;3>y;y++){for(res=0,z=0;3>z;z++)res+=m[x][z]*matrix[z][y];out[x][y]=res}this.a=out[0][0],this.b=out[1][0],this.c=out[0][1],this.d=out[1][1],this.e=out[0][2],this.f=out[1][2]},matrixproto.invert=function(){var me=this,x=me.a*me.d-me.b*me.c;return new Matrix(me.d/x,-me.b/x,-me.c/x,me.a/x,(me.c*me.f-me.d*me.e)/x,(me.b*me.e-me.a*me.f)/x)},matrixproto.clone=function(){return new Matrix(this.a,this.b,this.c,this.d,this.e,this.f)},matrixproto.translate=function(x,y){this.add(1,0,0,1,x,y)},matrixproto.scale=function(x,y,cx,cy){null==y&&(y=x),(cx||cy)&&this.add(1,0,0,1,cx,cy),this.add(x,0,0,y,0,0),(cx||cy)&&this.add(1,0,0,1,-cx,-cy)},matrixproto.rotate=function(a,x,y){a=R.rad(a),x=x||0,y=y||0;var cos=+math.cos(a).toFixed(9),sin=+math.sin(a).toFixed(9);this.add(cos,sin,-sin,cos,x,y),this.add(1,0,0,1,-x,-y)},matrixproto.x=function(x,y){return x*this.a+y*this.c+this.e},matrixproto.y=function(x,y){return x*this.b+y*this.d+this.f},matrixproto.get=function(i){return+this[Str.fromCharCode(97+i)].toFixed(4)},matrixproto.toString=function(){return R.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},matrixproto.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},matrixproto.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},matrixproto.split=function(){var out={};out.dx=this.e,out.dy=this.f;var row=[[this.a,this.c],[this.b,this.d]];out.scalex=math.sqrt(norm(row[0])),normalize(row[0]),out.shear=row[0][0]*row[1][0]+row[0][1]*row[1][1],row[1]=[row[1][0]-row[0][0]*out.shear,row[1][1]-row[0][1]*out.shear],out.scaley=math.sqrt(norm(row[1])),normalize(row[1]),out.shear/=out.scaley;var sin=-row[0][1],cos=row[1][1];return 0>cos?(out.rotate=R.deg(math.acos(cos)),0>sin&&(out.rotate=360-out.rotate)):out.rotate=R.deg(math.asin(sin)),out.isSimple=!(+out.shear.toFixed(9)||out.scalex.toFixed(9)!=out.scaley.toFixed(9)&&out.rotate),out.isSuperSimple=!+out.shear.toFixed(9)&&out.scalex.toFixed(9)==out.scaley.toFixed(9)&&!out.rotate,out.noRotation=!+out.shear.toFixed(9)&&!out.rotate,out},matrixproto.toTransformString=function(shorter){var s=shorter||this[split]();return s.isSimple?(s.scalex=+s.scalex.toFixed(4),s.scaley=+s.scaley.toFixed(4),s.rotate=+s.rotate.toFixed(4),(s.dx||s.dy?"t"+[s.dx,s.dy]:E)+(1!=s.scalex||1!=s.scaley?"s"+[s.scalex,s.scaley,0,0]:E)+(s.rotate?"r"+[s.rotate,0,0]:E)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(Matrix.prototype);var version=navigator.userAgent.match(/Version\/(.*?)\s/)||navigator.userAgent.match(/Chrome\/(\d+)/);"Apple Computer, Inc."==navigator.vendor&&(version&&version[1]<4||"iP"==navigator.platform.slice(0,2))||"Google Inc."==navigator.vendor&&version&&version[1]<8?paperproto.safari=function(){var rect=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});setTimeout(function(){rect.remove()})}:paperproto.safari=fun;for(var preventDefault=function(){this.returnValue=!1},preventTouch=function(){return this.originalEvent.preventDefault()},stopPropagation=function(){this.cancelBubble=!0},stopTouch=function(){return this.originalEvent.stopPropagation()},addEvent=function(){return g.doc.addEventListener?function(obj,type,fn,element){var realName=supportsTouch&&touchMap[type]?touchMap[type]:type,f=function(e){var scrollY=g.doc.documentElement.scrollTop||g.doc.body.scrollTop,scrollX=g.doc.documentElement.scrollLeft||g.doc.body.scrollLeft,x=e.clientX+scrollX,y=e.clientY+scrollY;if(supportsTouch&&touchMap[has](type))for(var i=0,ii=e.targetTouches&&e.targetTouches.length;ii>i;i++)if(e.targetTouches[i].target==obj){var olde=e;e=e.targetTouches[i],e.originalEvent=olde,e.preventDefault=preventTouch,e.stopPropagation=stopTouch;break}return fn.call(element,e,x,y)};return obj.addEventListener(realName,f,!1),function(){return obj.removeEventListener(realName,f,!1),!0}}:g.doc.attachEvent?function(obj,type,fn,element){var f=function(e){e=e||g.win.event;var scrollY=g.doc.documentElement.scrollTop||g.doc.body.scrollTop,scrollX=g.doc.documentElement.scrollLeft||g.doc.body.scrollLeft,x=e.clientX+scrollX,y=e.clientY+scrollY;return e.preventDefault=e.preventDefault||preventDefault,e.stopPropagation=e.stopPropagation||stopPropagation,fn.call(element,e,x,y)};obj.attachEvent("on"+type,f);var detacher=function(){return obj.detachEvent("on"+type,f),!0};return detacher}:void 0}(),drag=[],dragMove=function(e){for(var dragi,x=e.clientX,y=e.clientY,scrollY=g.doc.documentElement.scrollTop||g.doc.body.scrollTop,scrollX=g.doc.documentElement.scrollLeft||g.doc.body.scrollLeft,j=drag.length;j--;){if(dragi=drag[j],supportsTouch){for(var touch,i=e.touches.length;i--;)if(touch=e.touches[i],touch.identifier==dragi.el._drag.id){x=touch.clientX,y=touch.clientY,(e.originalEvent?e.originalEvent:e).preventDefault();break}}else e.preventDefault();var o,node=dragi.el.node,next=node.nextSibling,parent=node.parentNode,display=node.style.display;g.win.opera&&parent.removeChild(node),node.style.display="none",o=dragi.el.paper.getElementByPoint(x,y),node.style.display=display,g.win.opera&&(next?parent.insertBefore(node,next):parent.appendChild(node)),o&&eve("raphael.drag.over."+dragi.el.id,dragi.el,o),x+=scrollX,y+=scrollY,eve("raphael.drag.move."+dragi.el.id,dragi.move_scope||dragi.el,x-dragi.el._drag.x,y-dragi.el._drag.y,x,y,e)}},dragUp=function(e){R.unmousemove(dragMove).unmouseup(dragUp);for(var dragi,i=drag.length;i--;)dragi=drag[i],dragi.el._drag={},eve("raphael.drag.end."+dragi.el.id,dragi.end_scope||dragi.start_scope||dragi.move_scope||dragi.el,e);drag=[]},elproto=R.el={},i=events.length;i--;)!function(eventName){R[eventName]=elproto[eventName]=function(fn,scope){return R.is(fn,"function")&&(this.events=this.events||[],this.events.push({name:eventName,f:fn,unbind:addEvent(this.shape||this.node||g.doc,eventName,fn,scope||this)})),this},R["un"+eventName]=elproto["un"+eventName]=function(fn){for(var events=this.events||[],l=events.length;l--;)if(events[l].name==eventName&&events[l].f==fn)return events[l].unbind(),events.splice(l,1),!events.length&&delete this.events,this;return this}}(events[i]);elproto.data=function(key,value){var data=eldata[this.id]=eldata[this.id]||{};if(1==arguments.length){if(R.is(key,"object")){for(var i in key)key[has](i)&&this.data(i,key[i]);return this}return eve("raphael.data.get."+this.id,this,data[key],key),data[key]}return data[key]=value,eve("raphael.data.set."+this.id,this,value,key),this},elproto.removeData=function(key){return null==key?eldata[this.id]={}:eldata[this.id]&&delete eldata[this.id][key],this},elproto.hover=function(f_in,f_out,scope_in,scope_out){return this.mouseover(f_in,scope_in).mouseout(f_out,scope_out||scope_in)},elproto.unhover=function(f_in,f_out){return this.unmouseover(f_in).unmouseout(f_out)};var draggable=[];elproto.drag=function(onmove,onstart,onend,move_scope,start_scope,end_scope){function start(e){(e.originalEvent||e).preventDefault();var scrollY=g.doc.documentElement.scrollTop||g.doc.body.scrollTop,scrollX=g.doc.documentElement.scrollLeft||g.doc.body.scrollLeft;this._drag.x=e.clientX+scrollX,this._drag.y=e.clientY+scrollY,this._drag.id=e.identifier,!drag.length&&R.mousemove(dragMove).mouseup(dragUp),drag.push({el:this,move_scope:move_scope,start_scope:start_scope,end_scope:end_scope}),onstart&&eve.on("raphael.drag.start."+this.id,onstart),onmove&&eve.on("raphael.drag.move."+this.id,onmove),onend&&eve.on("raphael.drag.end."+this.id,onend),eve("raphael.drag.start."+this.id,start_scope||move_scope||this,e.clientX+scrollX,e.clientY+scrollY,e)}return this._drag={},draggable.push({el:this,start:start}),this.mousedown(start),this},elproto.onDragOver=function(f){f?eve.on("raphael.drag.over."+this.id,f):eve.unbind("raphael.drag.over."+this.id)},elproto.undrag=function(){for(var i=draggable.length;i--;)draggable[i].el==this&&(this.unmousedown(draggable[i].start),draggable.splice(i,1),eve.unbind("raphael.drag.*."+this.id));!draggable.length&&R.unmousemove(dragMove).unmouseup(dragUp)},paperproto.circle=function(x,y,r){var out=R._engine.circle(this,x||0,y||0,r||0);return this.__set__&&this.__set__.push(out),out},paperproto.rect=function(x,y,w,h,r){var out=R._engine.rect(this,x||0,y||0,w||0,h||0,r||0);return this.__set__&&this.__set__.push(out),out},paperproto.ellipse=function(x,y,rx,ry){var out=R._engine.ellipse(this,x||0,y||0,rx||0,ry||0);return this.__set__&&this.__set__.push(out),out},paperproto.path=function(pathString){pathString&&!R.is(pathString,string)&&!R.is(pathString[0],array)&&(pathString+=E);var out=R._engine.path(R.format[apply](R,arguments),this);return this.__set__&&this.__set__.push(out),out},paperproto.image=function(src,x,y,w,h){var out=R._engine.image(this,src||"about:blank",x||0,y||0,w||0,h||0);return this.__set__&&this.__set__.push(out),out},paperproto.text=function(x,y,text){var out=R._engine.text(this,x||0,y||0,Str(text));return this.__set__&&this.__set__.push(out),out},paperproto.set=function(itemsArray){!R.is(itemsArray,"array")&&(itemsArray=Array.prototype.splice.call(arguments,0,arguments.length));var out=new Set(itemsArray);return this.__set__&&this.__set__.push(out),out},paperproto.setStart=function(set){this.__set__=set||this.set()},paperproto.setFinish=function(set){var out=this.__set__;return delete this.__set__,out},paperproto.setSize=function(width,height){return R._engine.setSize.call(this,width,height)},paperproto.setViewBox=function(x,y,w,h,fit){return R._engine.setViewBox.call(this,x,y,w,h,fit)},paperproto.top=paperproto.bottom=null,paperproto.raphael=R;var getOffset=function(elem){var box=elem.getBoundingClientRect(),doc=elem.ownerDocument,body=doc.body,docElem=doc.documentElement,clientTop=docElem.clientTop||body.clientTop||0,clientLeft=docElem.clientLeft||body.clientLeft||0,top=box.top+(g.win.pageYOffset||docElem.scrollTop||body.scrollTop)-clientTop,left=box.left+(g.win.pageXOffset||docElem.scrollLeft||body.scrollLeft)-clientLeft;return{y:top,x:left}};paperproto.getElementByPoint=function(x,y){var paper=this,svg=paper.canvas,target=g.doc.elementFromPoint(x,y);if(g.win.opera&&"svg"==target.tagName){var so=getOffset(svg),sr=svg.createSVGRect();sr.x=x-so.x,sr.y=y-so.y,sr.width=sr.height=1;var hits=svg.getIntersectionList(sr,null);hits.length&&(target=hits[hits.length-1])}if(!target)return null;for(;target.parentNode&&target!=svg.parentNode&&!target.raphael;)target=target.parentNode;return target==paper.canvas.parentNode&&(target=svg),target=target&&target.raphael?paper.getById(target.raphaelid):null},paperproto.getById=function(id){for(var bot=this.bottom;bot;){if(bot.id==id)return bot;bot=bot.next}return null},paperproto.forEach=function(callback,thisArg){for(var bot=this.bottom;bot;){if(callback.call(thisArg,bot)===!1)return this;bot=bot.next}return this},paperproto.getElementsByPoint=function(x,y){var set=this.set();return this.forEach(function(el){el.isPointInside(x,y)&&set.push(el)}),set},elproto.isPointInside=function(x,y){var rp=this.realPath=this.realPath||getPath[this.type](this);return R.isPointInsidePath(rp,x,y)},elproto.getBBox=function(isWithoutTransform){if(this.removed)return{};var _=this._;return isWithoutTransform?((_.dirty||!_.bboxwt)&&(this.realPath=getPath[this.type](this),_.bboxwt=pathDimensions(this.realPath),_.bboxwt.toString=x_y_w_h,_.dirty=0),_.bboxwt):((_.dirty||_.dirtyT||!_.bbox)&&((_.dirty||!this.realPath)&&(_.bboxwt=0,this.realPath=getPath[this.type](this)),_.bbox=pathDimensions(mapPath(this.realPath,this.matrix)),_.bbox.toString=x_y_w_h,_.dirty=_.dirtyT=0),_.bbox)},elproto.clone=function(){if(this.removed)return null;var out=this.paper[this.type]().attr(this.attr());return this.__set__&&this.__set__.push(out),out},elproto.glow=function(glow){if("text"==this.type)return null;glow=glow||{};var s={width:(glow.width||10)+(+this.attr("stroke-width")||1),fill:glow.fill||!1,opacity:glow.opacity||.5,offsetx:glow.offsetx||0,offsety:glow.offsety||0,color:glow.color||"#000"},c=s.width/2,r=this.paper,out=r.set(),path=this.realPath||getPath[this.type](this);path=this.matrix?mapPath(path,this.matrix):path;for(var i=1;c+1>i;i++)out.push(r.path(path).attr({stroke:s.color,fill:s.fill?s.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(s.width/c*i).toFixed(3),opacity:+(s.opacity/c).toFixed(3)}));return out.insertBefore(this).translate(s.offsetx,s.offsety)};var getPointAtSegmentLength=function(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,length){return null==length?bezlen(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y):R.findDotsAtSegment(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,getTatLen(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,length))},getLengthFactory=function(istotal,subpath){return function(path,length,onlystart){path=path2curve(path);for(var x,y,p,l,point,sp="",subpaths={},len=0,i=0,ii=path.length;ii>i;i++){if(p=path[i],"M"==p[0])x=+p[1],y=+p[2];else{if(l=getPointAtSegmentLength(x,y,p[1],p[2],p[3],p[4],p[5],p[6]),len+l>length){if(subpath&&!subpaths.start){if(point=getPointAtSegmentLength(x,y,p[1],p[2],p[3],p[4],p[5],p[6],length-len),sp+=["C"+point.start.x,point.start.y,point.m.x,point.m.y,point.x,point.y],onlystart)return sp;subpaths.start=sp,sp=["M"+point.x,point.y+"C"+point.n.x,point.n.y,point.end.x,point.end.y,p[5],p[6]].join(),len+=l,x=+p[5],y=+p[6];continue}if(!istotal&&!subpath)return point=getPointAtSegmentLength(x,y,p[1],p[2],p[3],p[4],p[5],p[6],length-len),{x:point.x,y:point.y,alpha:point.alpha}}len+=l,x=+p[5],y=+p[6]}sp+=p.shift()+p}return subpaths.end=sp,point=istotal?len:subpath?subpaths:R.findDotsAtSegment(x,y,p[0],p[1],p[2],p[3],p[4],p[5],1),point.alpha&&(point={x:point.x,y:point.y,alpha:point.alpha}),point}},getTotalLength=getLengthFactory(1),getPointAtLength=getLengthFactory(),getSubpathsAtLength=getLengthFactory(0,1);R.getTotalLength=getTotalLength,R.getPointAtLength=getPointAtLength,R.getSubpath=function(path,from,to){if(this.getTotalLength(path)-to<1e-6)return getSubpathsAtLength(path,from).end;var a=getSubpathsAtLength(path,to,1);return from?getSubpathsAtLength(a,from).end:a},elproto.getTotalLength=function(){return"path"==this.type?this.node.getTotalLength?this.node.getTotalLength():getTotalLength(this.attrs.path):void 0},elproto.getPointAtLength=function(length){return"path"==this.type?getPointAtLength(this.attrs.path,length):void 0},elproto.getSubpath=function(from,to){return"path"==this.type?R.getSubpath(this.attrs.path,from,to):void 0};var ef=R.easing_formulas={linear:function(n){return n},"<":function(n){return pow(n,1.7)},">":function(n){return pow(n,.48)},"<>":function(n){var q=.48-n/1.04,Q=math.sqrt(.1734+q*q),x=Q-q,X=pow(abs(x),1/3)*(0>x?-1:1),y=-Q-q,Y=pow(abs(y),1/3)*(0>y?-1:1),t=X+Y+.5;return 3*(1-t)*t*t+t*t*t},backIn:function(n){var s=1.70158;return n*n*((s+1)*n-s)},backOut:function(n){n-=1;var s=1.70158;return n*n*((s+1)*n+s)+1},elastic:function(n){return n==!!n?n:pow(2,-10*n)*math.sin(2*(n-.075)*PI/.3)+1},bounce:function(n){var l,s=7.5625,p=2.75;return 1/p>n?l=s*n*n:2/p>n?(n-=1.5/p,l=s*n*n+.75):2.5/p>n?(n-=2.25/p,l=s*n*n+.9375):(n-=2.625/p,l=s*n*n+.984375),l}};ef.easeIn=ef["ease-in"]=ef["<"],ef.easeOut=ef["ease-out"]=ef[">"],ef.easeInOut=ef["ease-in-out"]=ef["<>"],ef["back-in"]=ef.backIn,ef["back-out"]=ef.backOut;var animationElements=[],requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback){setTimeout(callback,16)},animation=function(){for(var Now=+new Date,l=0;l<animationElements.length;l++){var e=animationElements[l];if(!e.el.removed&&!e.paused){var now,key,time=Now-e.start,ms=e.ms,easing=e.easing,from=e.from,diff=e.diff,to=e.to,that=(e.t,e.el),set={},init={};if(e.initstatus?(time=(e.initstatus*e.anim.top-e.prev)/(e.percent-e.prev)*ms,e.status=e.initstatus,delete e.initstatus,e.stop&&animationElements.splice(l--,1)):e.status=(e.prev+(e.percent-e.prev)*(time/ms))/e.anim.top,!(0>time))if(ms>time){var pos=easing(time/ms);for(var attr in from)if(from[has](attr)){switch(availableAnimAttrs[attr]){case nu:now=+from[attr]+pos*ms*diff[attr];break;case"colour":now="rgb("+[upto255(round(from[attr].r+pos*ms*diff[attr].r)),upto255(round(from[attr].g+pos*ms*diff[attr].g)),upto255(round(from[attr].b+pos*ms*diff[attr].b))].join(",")+")";break;case"path":now=[];for(var i=0,ii=from[attr].length;ii>i;i++){now[i]=[from[attr][i][0]];for(var j=1,jj=from[attr][i].length;jj>j;j++)now[i][j]=+from[attr][i][j]+pos*ms*diff[attr][i][j];now[i]=now[i].join(S)}now=now.join(S);break;case"transform":if(diff[attr].real)for(now=[],i=0,ii=from[attr].length;ii>i;i++)for(now[i]=[from[attr][i][0]],j=1,jj=from[attr][i].length;jj>j;j++)now[i][j]=from[attr][i][j]+pos*ms*diff[attr][i][j];else{var get=function(i){return+from[attr][i]+pos*ms*diff[attr][i]};now=[["m",get(0),get(1),get(2),get(3),get(4),get(5)]]}break;case"csv":if("clip-rect"==attr)for(now=[],i=4;i--;)now[i]=+from[attr][i]+pos*ms*diff[attr][i];break;default:var from2=[][concat](from[attr]);for(now=[],i=that.paper.customAttributes[attr].length;i--;)now[i]=+from2[i]+pos*ms*diff[attr][i]}set[attr]=now}that.attr(set),function(id,that,anim){setTimeout(function(){eve("raphael.anim.frame."+id,that,anim)})}(that.id,that,e.anim)}else{if(function(f,el,a){setTimeout(function(){eve("raphael.anim.frame."+el.id,el,a),eve("raphael.anim.finish."+el.id,el,a),R.is(f,"function")&&f.call(el)})}(e.callback,that,e.anim),that.attr(to),animationElements.splice(l--,1),e.repeat>1&&!e.next){for(key in to)to[has](key)&&(init[key]=e.totalOrigin[key]);e.el.attr(init),runAnimation(e.anim,e.el,e.anim.percents[0],null,e.totalOrigin,e.repeat-1)}e.next&&!e.stop&&runAnimation(e.anim,e.el,e.next,null,e.totalOrigin,e.repeat)}}}R.svg&&that&&that.paper&&that.paper.safari(),animationElements.length&&requestAnimFrame(animation)},upto255=function(color){return color>255?255:0>color?0:color};elproto.animateWith=function(el,anim,params,ms,easing,callback){var element=this;if(element.removed)return callback&&callback.call(element),element;var a=params instanceof Animation?params:R.animation(params,ms,easing,callback);runAnimation(a,element,a.percents[0],null,element.attr());for(var i=0,ii=animationElements.length;ii>i;i++)if(animationElements[i].anim==anim&&animationElements[i].el==el){animationElements[ii-1].start=animationElements[i].start;break}return element},elproto.onAnimation=function(f){return f?eve.on("raphael.anim.frame."+this.id,f):eve.unbind("raphael.anim.frame."+this.id),this},Animation.prototype.delay=function(delay){var a=new Animation(this.anim,this.ms);return a.times=this.times,a.del=+delay||0,a},Animation.prototype.repeat=function(times){var a=new Animation(this.anim,this.ms);return a.del=this.del,a.times=math.floor(mmax(times,0))||1,a},R.animation=function(params,ms,easing,callback){if(params instanceof Animation)return params;(R.is(easing,"function")||!easing)&&(callback=callback||easing||null,easing=null),params=Object(params),ms=+ms||0;var json,attr,p={};for(attr in params)params[has](attr)&&toFloat(attr)!=attr&&toFloat(attr)+"%"!=attr&&(json=!0,p[attr]=params[attr]);return json?(easing&&(p.easing=easing),callback&&(p.callback=callback),new Animation({100:p},ms)):new Animation(params,ms)},elproto.animate=function(params,ms,easing,callback){var element=this;if(element.removed)return callback&&callback.call(element),element;var anim=params instanceof Animation?params:R.animation(params,ms,easing,callback);return runAnimation(anim,element,anim.percents[0],null,element.attr()),element},elproto.setTime=function(anim,value){return anim&&null!=value&&this.status(anim,mmin(value,anim.ms)/anim.ms),this},elproto.status=function(anim,value){var len,e,out=[],i=0;if(null!=value)return runAnimation(anim,this,-1,mmin(value,1)),this;for(len=animationElements.length;len>i;i++)if(e=animationElements[i],e.el.id==this.id&&(!anim||e.anim==anim)){if(anim)return e.status;out.push({anim:e.anim,status:e.status})}return anim?0:out},elproto.pause=function(anim){for(var i=0;i<animationElements.length;i++)animationElements[i].el.id!=this.id||anim&&animationElements[i].anim!=anim||eve("raphael.anim.pause."+this.id,this,animationElements[i].anim)!==!1&&(animationElements[i].paused=!0);return this},elproto.resume=function(anim){for(var i=0;i<animationElements.length;i++)if(animationElements[i].el.id==this.id&&(!anim||animationElements[i].anim==anim)){var e=animationElements[i];eve("raphael.anim.resume."+this.id,this,e.anim)!==!1&&(delete e.paused,this.status(e.anim,e.status))}return this},elproto.stop=function(anim){for(var i=0;i<animationElements.length;i++)animationElements[i].el.id!=this.id||anim&&animationElements[i].anim!=anim||eve("raphael.anim.stop."+this.id,this,animationElements[i].anim)!==!1&&animationElements.splice(i--,1);return this},eve.on("raphael.remove",stopAnimation),eve.on("raphael.clear",stopAnimation),elproto.toString=function(){return"Raphaël’s object"};var Set=function(items){if(this.items=[],this.length=0,this.type="set",items)for(var i=0,ii=items.length;ii>i;i++)!items[i]||items[i].constructor!=elproto.constructor&&items[i].constructor!=Set||(this[this.items.length]=this.items[this.items.length]=items[i],this.length++)},setproto=Set.prototype;setproto.push=function(){for(var item,len,i=0,ii=arguments.length;ii>i;i++)item=arguments[i],!item||item.constructor!=elproto.constructor&&item.constructor!=Set||(len=this.items.length,this[len]=this.items[len]=item,this.length++);return this},setproto.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},setproto.forEach=function(callback,thisArg){for(var i=0,ii=this.items.length;ii>i;i++)if(callback.call(thisArg,this.items[i],i)===!1)return this;return this;
};for(var method in elproto)elproto[has](method)&&(setproto[method]=function(methodname){return function(){var arg=arguments;return this.forEach(function(el){el[methodname][apply](el,arg)})}}(method));setproto.attr=function(name,value){if(name&&R.is(name,array)&&R.is(name[0],"object"))for(var j=0,jj=name.length;jj>j;j++)this.items[j].attr(name[j]);else for(var i=0,ii=this.items.length;ii>i;i++)this.items[i].attr(name,value);return this},setproto.clear=function(){for(;this.length;)this.pop()},setproto.splice=function(index,count,insertion){index=0>index?mmax(this.length+index,0):index,count=mmax(0,mmin(this.length-index,count));var i,tail=[],todel=[],args=[];for(i=2;i<arguments.length;i++)args.push(arguments[i]);for(i=0;count>i;i++)todel.push(this[index+i]);for(;i<this.length-index;i++)tail.push(this[index+i]);var arglen=args.length;for(i=0;i<arglen+tail.length;i++)this.items[index+i]=this[index+i]=arglen>i?args[i]:tail[i-arglen];for(i=this.items.length=this.length-=count-arglen;this[i];)delete this[i++];return new Set(todel)},setproto.exclude=function(el){for(var i=0,ii=this.length;ii>i;i++)if(this[i]==el)return this.splice(i,1),!0},setproto.animate=function(params,ms,easing,callback){(R.is(easing,"function")||!easing)&&(callback=easing||null);var item,collector,len=this.items.length,i=len,set=this;if(!len)return this;callback&&(collector=function(){!--len&&callback.call(set)}),easing=R.is(easing,string)?easing:collector;var anim=R.animation(params,ms,easing,collector);for(item=this.items[--i].animate(anim);i--;)this.items[i]&&!this.items[i].removed&&this.items[i].animateWith(item,anim,anim);return this},setproto.insertAfter=function(el){for(var i=this.items.length;i--;)this.items[i].insertAfter(el);return this},setproto.getBBox=function(){for(var x=[],y=[],x2=[],y2=[],i=this.items.length;i--;)if(!this.items[i].removed){var box=this.items[i].getBBox();x.push(box.x),y.push(box.y),x2.push(box.x+box.width),y2.push(box.y+box.height)}return x=mmin[apply](0,x),y=mmin[apply](0,y),x2=mmax[apply](0,x2),y2=mmax[apply](0,y2),{x:x,y:y,x2:x2,y2:y2,width:x2-x,height:y2-y}},setproto.clone=function(s){s=new Set;for(var i=0,ii=this.items.length;ii>i;i++)s.push(this.items[i].clone());return s},setproto.toString=function(){return"Raphaël‘s set"},R.registerFont=function(font){if(!font.face)return font;this.fonts=this.fonts||{};var fontcopy={w:font.w,face:{},glyphs:{}},family=font.face["font-family"];for(var prop in font.face)font.face[has](prop)&&(fontcopy.face[prop]=font.face[prop]);if(this.fonts[family]?this.fonts[family].push(fontcopy):this.fonts[family]=[fontcopy],!font.svg){fontcopy.face["units-per-em"]=toInt(font.face["units-per-em"],10);for(var glyph in font.glyphs)if(font.glyphs[has](glyph)){var path=font.glyphs[glyph];if(fontcopy.glyphs[glyph]={w:path.w,k:{},d:path.d&&"M"+path.d.replace(/[mlcxtrv]/g,function(command){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[command]||"M"})+"z"},path.k)for(var k in path.k)path[has](k)&&(fontcopy.glyphs[glyph].k[k]=path.k[k])}}return font},paperproto.getFont=function(family,weight,style,stretch){if(stretch=stretch||"normal",style=style||"normal",weight=+weight||{normal:400,bold:700,lighter:300,bolder:800}[weight]||400,R.fonts){var font=R.fonts[family];if(!font){var name=new RegExp("(^|\\s)"+family.replace(/[^\w\d\s+!~.:_-]/g,E)+"(\\s|$)","i");for(var fontName in R.fonts)if(R.fonts[has](fontName)&&name.test(fontName)){font=R.fonts[fontName];break}}var thefont;if(font)for(var i=0,ii=font.length;ii>i&&(thefont=font[i],thefont.face["font-weight"]!=weight||thefont.face["font-style"]!=style&&thefont.face["font-style"]||thefont.face["font-stretch"]!=stretch);i++);return thefont}},paperproto.print=function(x,y,string,font,size,origin,letter_spacing){origin=origin||"middle",letter_spacing=mmax(mmin(letter_spacing||0,1),-1);var scale,letters=Str(string)[split](E),shift=0,notfirst=0,path=E;if(R.is(font,string)&&(font=this.getFont(font)),font){scale=(size||16)/font.face["units-per-em"];for(var bb=font.face.bbox[split](separator),top=+bb[0],lineHeight=bb[3]-bb[1],shifty=0,height=+bb[1]+("baseline"==origin?lineHeight+ +font.face.descent:lineHeight/2),i=0,ii=letters.length;ii>i;i++){if("\n"==letters[i])shift=0,curr=0,notfirst=0,shifty+=lineHeight;else{var prev=notfirst&&font.glyphs[letters[i-1]]||{},curr=font.glyphs[letters[i]];shift+=notfirst?(prev.w||font.w)+(prev.k&&prev.k[letters[i]]||0)+font.w*letter_spacing:0,notfirst=1}curr&&curr.d&&(path+=R.transformPath(curr.d,["t",shift*scale,shifty*scale,"s",scale,scale,top,height,"t",(x-top)/scale,(y-height)/scale]))}}return this.path(path).attr({fill:"#000",stroke:"none"})},paperproto.add=function(json){if(R.is(json,"array"))for(var j,res=this.set(),i=0,ii=json.length;ii>i;i++)j=json[i]||{},elements[has](j.type)&&res.push(this[j.type]().attr(j));return res},R.format=function(token,params){var args=R.is(params,array)?[0][concat](params):arguments;return token&&R.is(token,string)&&args.length-1&&(token=token.replace(formatrg,function(str,i){return null==args[++i]?E:args[i]})),token||E},R.fullfill=function(){var tokenRegex=/\{([^\}]+)\}/g,objNotationRegex=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,replacer=function(all,key,obj){var res=obj;return key.replace(objNotationRegex,function(all,name,quote,quotedName,isFunc){name=name||quotedName,res&&(name in res&&(res=res[name]),"function"==typeof res&&isFunc&&(res=res()))}),res=(null==res||res==obj?all:res)+""};return function(str,obj){return String(str).replace(tokenRegex,function(all,key){return replacer(all,key,obj)})}}(),R.ninja=function(){return oldRaphael.was?g.win.Raphael=oldRaphael.is:delete Raphael,R},R.st=setproto,function(doc,loaded,f){function isLoaded(){/in/.test(doc.readyState)?setTimeout(isLoaded,9):R.eve("raphael.DOMload")}null==doc.readyState&&doc.addEventListener&&(doc.addEventListener(loaded,f=function(){doc.removeEventListener(loaded,f,!1),doc.readyState="complete"},!1),doc.readyState="loading"),isLoaded()}(document,"DOMContentLoaded"),oldRaphael.was?g.win.Raphael=R:Raphael=R,eve.on("raphael.DOMload",function(){loaded=!0})}(),window.Raphael.svg&&function(R){var has="hasOwnProperty",Str=String,toFloat=parseFloat,toInt=parseInt,math=Math,mmax=math.max,abs=math.abs,pow=math.pow,separator=/[, ]+/,eve=R.eve,E="",S=" ",xlink="http://www.w3.org/1999/xlink",markers={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},markerCounter={};R.toString=function(){return"Your browser supports SVG.\nYou are running Raphaël "+this.version};var $=function(el,attr){if(attr){"string"==typeof el&&(el=$(el));for(var key in attr)attr[has](key)&&("xlink:"==key.substring(0,6)?el.setAttributeNS(xlink,key.substring(6),Str(attr[key])):el.setAttribute(key,Str(attr[key])))}else el=R._g.doc.createElementNS("http://www.w3.org/2000/svg",el),el.style&&(el.style.webkitTapHighlightColor="rgba(0,0,0,0)");return el},addGradientFill=function(element,gradient){var type="linear",id=element.id+gradient,fx=.5,fy=.5,o=element.node,SVG=element.paper,s=o.style,el=R._g.doc.getElementById(id);if(!el){if(gradient=Str(gradient).replace(R._radial_gradient,function(all,_fx,_fy){if(type="radial",_fx&&_fy){fx=toFloat(_fx),fy=toFloat(_fy);var dir=2*(fy>.5)-1;pow(fx-.5,2)+pow(fy-.5,2)>.25&&(fy=math.sqrt(.25-pow(fx-.5,2))*dir+.5)&&.5!=fy&&(fy=fy.toFixed(5)-1e-5*dir)}return E}),gradient=gradient.split(/\s*\-\s*/),"linear"==type){var angle=gradient.shift();if(angle=-toFloat(angle),isNaN(angle))return null;var vector=[0,0,math.cos(R.rad(angle)),math.sin(R.rad(angle))],max=1/(mmax(abs(vector[2]),abs(vector[3]))||1);vector[2]*=max,vector[3]*=max,vector[2]<0&&(vector[0]=-vector[2],vector[2]=0),vector[3]<0&&(vector[1]=-vector[3],vector[3]=0)}var dots=R._parseDots(gradient);if(!dots)return null;if(id=id.replace(/[\(\)\s,\xb0#]/g,"_"),element.gradient&&id!=element.gradient.id&&(SVG.defs.removeChild(element.gradient),delete element.gradient),!element.gradient){el=$(type+"Gradient",{id:id}),element.gradient=el,$(el,"radial"==type?{fx:fx,fy:fy}:{x1:vector[0],y1:vector[1],x2:vector[2],y2:vector[3],gradientTransform:element.matrix.invert()}),SVG.defs.appendChild(el);for(var i=0,ii=dots.length;ii>i;i++)el.appendChild($("stop",{offset:dots[i].offset?dots[i].offset:i?"100%":"0%","stop-color":dots[i].color||"#fff"}))}}return $(o,{fill:"url(#"+id+")",opacity:1,"fill-opacity":1}),s.fill=E,s.opacity=1,s.fillOpacity=1,1},updatePosition=function(o){var bbox=o.getBBox(1);$(o.pattern,{patternTransform:o.matrix.invert()+" translate("+bbox.x+","+bbox.y+")"})},addArrow=function(o,value,isEnd){if("path"==o.type){for(var from,to,dx,refX,attr,values=Str(value).toLowerCase().split("-"),p=o.paper,se=isEnd?"end":"start",node=o.node,attrs=o.attrs,stroke=attrs["stroke-width"],i=values.length,type="classic",w=3,h=3,t=5;i--;)switch(values[i]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":type=values[i];break;case"wide":h=5;break;case"narrow":h=2;break;case"long":w=5;break;case"short":w=2}if("open"==type?(w+=2,h+=2,t+=2,dx=1,refX=isEnd?4:1,attr={fill:"none",stroke:attrs.stroke}):(refX=dx=w/2,attr={fill:attrs.stroke,stroke:"none"}),o._.arrows?isEnd?(o._.arrows.endPath&&markerCounter[o._.arrows.endPath]--,o._.arrows.endMarker&&markerCounter[o._.arrows.endMarker]--):(o._.arrows.startPath&&markerCounter[o._.arrows.startPath]--,o._.arrows.startMarker&&markerCounter[o._.arrows.startMarker]--):o._.arrows={},"none"!=type){var pathId="raphael-marker-"+type,markerId="raphael-marker-"+se+type+w+h;R._g.doc.getElementById(pathId)?markerCounter[pathId]++:(p.defs.appendChild($($("path"),{"stroke-linecap":"round",d:markers[type],id:pathId})),markerCounter[pathId]=1);var use,marker=R._g.doc.getElementById(markerId);marker?(markerCounter[markerId]++,use=marker.getElementsByTagName("use")[0]):(marker=$($("marker"),{id:markerId,markerHeight:h,markerWidth:w,orient:"auto",refX:refX,refY:h/2}),use=$($("use"),{"xlink:href":"#"+pathId,transform:(isEnd?"rotate(180 "+w/2+" "+h/2+") ":E)+"scale("+w/t+","+h/t+")","stroke-width":(1/((w/t+h/t)/2)).toFixed(4)}),marker.appendChild(use),p.defs.appendChild(marker),markerCounter[markerId]=1),$(use,attr);var delta=dx*("diamond"!=type&&"oval"!=type);isEnd?(from=o._.arrows.startdx*stroke||0,to=R.getTotalLength(attrs.path)-delta*stroke):(from=delta*stroke,to=R.getTotalLength(attrs.path)-(o._.arrows.enddx*stroke||0)),attr={},attr["marker-"+se]="url(#"+markerId+")",(to||from)&&(attr.d=Raphael.getSubpath(attrs.path,from,to)),$(node,attr),o._.arrows[se+"Path"]=pathId,o._.arrows[se+"Marker"]=markerId,o._.arrows[se+"dx"]=delta,o._.arrows[se+"Type"]=type,o._.arrows[se+"String"]=value}else isEnd?(from=o._.arrows.startdx*stroke||0,to=R.getTotalLength(attrs.path)-from):(from=0,to=R.getTotalLength(attrs.path)-(o._.arrows.enddx*stroke||0)),o._.arrows[se+"Path"]&&$(node,{d:Raphael.getSubpath(attrs.path,from,to)}),delete o._.arrows[se+"Path"],delete o._.arrows[se+"Marker"],delete o._.arrows[se+"dx"],delete o._.arrows[se+"Type"],delete o._.arrows[se+"String"];for(attr in markerCounter)if(markerCounter[has](attr)&&!markerCounter[attr]){var item=R._g.doc.getElementById(attr);item&&item.parentNode.removeChild(item)}}},dasharray={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},addDashes=function(o,value,params){if(value=dasharray[Str(value).toLowerCase()]){for(var width=o.attrs["stroke-width"]||"1",butt={round:width,square:width,butt:0}[o.attrs["stroke-linecap"]||params["stroke-linecap"]]||0,dashes=[],i=value.length;i--;)dashes[i]=value[i]*width+(i%2?1:-1)*butt;$(o.node,{"stroke-dasharray":dashes.join(",")})}},setFillAndStroke=function(o,params){var node=o.node,attrs=o.attrs,vis=node.style.visibility;node.style.visibility="hidden";for(var att in params)if(params[has](att)){if(!R._availableAttrs[has](att))continue;var value=params[att];switch(attrs[att]=value,att){case"blur":o.blur(value);break;case"href":case"title":case"target":var pn=node.parentNode;if("a"!=pn.tagName.toLowerCase()){var hl=$("a");pn.insertBefore(hl,node),hl.appendChild(node),pn=hl}"target"==att?pn.setAttributeNS(xlink,"show","blank"==value?"new":value):pn.setAttributeNS(xlink,att,value);break;case"cursor":node.style.cursor=value;break;case"transform":o.transform(value);break;case"arrow-start":addArrow(o,value);break;case"arrow-end":addArrow(o,value,1);break;case"clip-rect":var rect=Str(value).split(separator);if(4==rect.length){o.clip&&o.clip.parentNode.parentNode.removeChild(o.clip.parentNode);var el=$("clipPath"),rc=$("rect");el.id=R.createUUID(),$(rc,{x:rect[0],y:rect[1],width:rect[2],height:rect[3]}),el.appendChild(rc),o.paper.defs.appendChild(el),$(node,{"clip-path":"url(#"+el.id+")"}),o.clip=rc}if(!value){var path=node.getAttribute("clip-path");if(path){var clip=R._g.doc.getElementById(path.replace(/(^url\(#|\)$)/g,E));clip&&clip.parentNode.removeChild(clip),$(node,{"clip-path":E}),delete o.clip}}break;case"path":"path"==o.type&&($(node,{d:value?attrs.path=R._pathToAbsolute(value):"M0,0"}),o._.dirty=1,o._.arrows&&("startString"in o._.arrows&&addArrow(o,o._.arrows.startString),"endString"in o._.arrows&&addArrow(o,o._.arrows.endString,1)));break;case"width":if(node.setAttribute(att,value),o._.dirty=1,!attrs.fx)break;att="x",value=attrs.x;case"x":attrs.fx&&(value=-attrs.x-(attrs.width||0));case"rx":if("rx"==att&&"rect"==o.type)break;case"cx":node.setAttribute(att,value),o.pattern&&updatePosition(o),o._.dirty=1;break;case"height":if(node.setAttribute(att,value),o._.dirty=1,!attrs.fy)break;att="y",value=attrs.y;case"y":attrs.fy&&(value=-attrs.y-(attrs.height||0));case"ry":if("ry"==att&&"rect"==o.type)break;case"cy":node.setAttribute(att,value),o.pattern&&updatePosition(o),o._.dirty=1;break;case"r":"rect"==o.type?$(node,{rx:value,ry:value}):node.setAttribute(att,value),o._.dirty=1;break;case"src":"image"==o.type&&node.setAttributeNS(xlink,"href",value);break;case"stroke-width":(1!=o._.sx||1!=o._.sy)&&(value/=mmax(abs(o._.sx),abs(o._.sy))||1),o.paper._vbSize&&(value*=o.paper._vbSize),node.setAttribute(att,value),attrs["stroke-dasharray"]&&addDashes(o,attrs["stroke-dasharray"],params),o._.arrows&&("startString"in o._.arrows&&addArrow(o,o._.arrows.startString),"endString"in o._.arrows&&addArrow(o,o._.arrows.endString,1));break;case"stroke-dasharray":addDashes(o,value,params);break;case"fill":var isURL=Str(value).match(R._ISURL);if(isURL){el=$("pattern");var ig=$("image");el.id=R.createUUID(),$(el,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),$(ig,{x:0,y:0,"xlink:href":isURL[1]}),el.appendChild(ig),function(el){R._preload(isURL[1],function(){var w=this.offsetWidth,h=this.offsetHeight;$(el,{width:w,height:h}),$(ig,{width:w,height:h}),o.paper.safari()})}(el),o.paper.defs.appendChild(el),$(node,{fill:"url(#"+el.id+")"}),o.pattern=el,o.pattern&&updatePosition(o);break}var clr=R.getRGB(value);if(clr.error){if(("circle"==o.type||"ellipse"==o.type||"r"!=Str(value).charAt())&&addGradientFill(o,value)){if("opacity"in attrs||"fill-opacity"in attrs){var gradient=R._g.doc.getElementById(node.getAttribute("fill").replace(/^url\(#|\)$/g,E));if(gradient){var stops=gradient.getElementsByTagName("stop");$(stops[stops.length-1],{"stop-opacity":("opacity"in attrs?attrs.opacity:1)*("fill-opacity"in attrs?attrs["fill-opacity"]:1)})}}attrs.gradient=value,attrs.fill="none";break}}else delete params.gradient,delete attrs.gradient,!R.is(attrs.opacity,"undefined")&&R.is(params.opacity,"undefined")&&$(node,{opacity:attrs.opacity}),!R.is(attrs["fill-opacity"],"undefined")&&R.is(params["fill-opacity"],"undefined")&&$(node,{"fill-opacity":attrs["fill-opacity"]});clr[has]("opacity")&&$(node,{"fill-opacity":clr.opacity>1?clr.opacity/100:clr.opacity});case"stroke":clr=R.getRGB(value),node.setAttribute(att,clr.hex),"stroke"==att&&clr[has]("opacity")&&$(node,{"stroke-opacity":clr.opacity>1?clr.opacity/100:clr.opacity}),"stroke"==att&&o._.arrows&&("startString"in o._.arrows&&addArrow(o,o._.arrows.startString),"endString"in o._.arrows&&addArrow(o,o._.arrows.endString,1));break;case"gradient":("circle"==o.type||"ellipse"==o.type||"r"!=Str(value).charAt())&&addGradientFill(o,value);break;case"opacity":attrs.gradient&&!attrs[has]("stroke-opacity")&&$(node,{"stroke-opacity":value>1?value/100:value});case"fill-opacity":if(attrs.gradient){gradient=R._g.doc.getElementById(node.getAttribute("fill").replace(/^url\(#|\)$/g,E)),gradient&&(stops=gradient.getElementsByTagName("stop"),$(stops[stops.length-1],{"stop-opacity":value}));break}default:"font-size"==att&&(value=toInt(value,10)+"px");var cssrule=att.replace(/(\-.)/g,function(w){return w.substring(1).toUpperCase()});node.style[cssrule]=value,o._.dirty=1,node.setAttribute(att,value)}}tuneText(o,params),node.style.visibility=vis},leading=1.2,tuneText=function(el,params){if("text"==el.type&&(params[has]("text")||params[has]("font")||params[has]("font-size")||params[has]("x")||params[has]("y"))){var a=el.attrs,node=el.node,fontSize=node.firstChild?toInt(R._g.doc.defaultView.getComputedStyle(node.firstChild,E).getPropertyValue("font-size"),10):10;if(params[has]("text")){for(a.text=params.text;node.firstChild;)node.removeChild(node.firstChild);for(var tspan,texts=Str(params.text).split("\n"),tspans=[],i=0,ii=texts.length;ii>i;i++)tspan=$("tspan"),i&&$(tspan,{dy:fontSize*leading,x:a.x}),tspan.appendChild(R._g.doc.createTextNode(texts[i])),node.appendChild(tspan),tspans[i]=tspan}else for(tspans=node.getElementsByTagName("tspan"),i=0,ii=tspans.length;ii>i;i++)i?$(tspans[i],{dy:fontSize*leading,x:a.x}):$(tspans[0],{dy:0});$(node,{x:a.x,y:a.y}),el._.dirty=1;var bb=el._getBBox(),dif=a.y-(bb.y+bb.height/2);dif&&R.is(dif,"finite")&&$(tspans[0],{dy:dif})}},Element=function(node,svg){this[0]=this.node=node,node.raphael=!0,this.id=R._oid++,node.raphaelid=this.id,this.matrix=R.matrix(),this.realPath=null,this.paper=svg,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!svg.bottom&&(svg.bottom=this),this.prev=svg.top,svg.top&&(svg.top.next=this),svg.top=this,this.next=null},elproto=R.el;Element.prototype=elproto,elproto.constructor=Element,R._engine.path=function(pathString,SVG){var el=$("path");SVG.canvas&&SVG.canvas.appendChild(el);var p=new Element(el,SVG);return p.type="path",setFillAndStroke(p,{fill:"none",stroke:"#000",path:pathString}),p},elproto.rotate=function(deg,cx,cy){if(this.removed)return this;if(deg=Str(deg).split(separator),deg.length-1&&(cx=toFloat(deg[1]),cy=toFloat(deg[2])),deg=toFloat(deg[0]),null==cy&&(cx=cy),null==cx||null==cy){var bbox=this.getBBox(1);cx=bbox.x+bbox.width/2,cy=bbox.y+bbox.height/2}return this.transform(this._.transform.concat([["r",deg,cx,cy]])),this},elproto.scale=function(sx,sy,cx,cy){if(this.removed)return this;if(sx=Str(sx).split(separator),sx.length-1&&(sy=toFloat(sx[1]),cx=toFloat(sx[2]),cy=toFloat(sx[3])),sx=toFloat(sx[0]),null==sy&&(sy=sx),null==cy&&(cx=cy),null==cx||null==cy)var bbox=this.getBBox(1);return cx=null==cx?bbox.x+bbox.width/2:cx,cy=null==cy?bbox.y+bbox.height/2:cy,this.transform(this._.transform.concat([["s",sx,sy,cx,cy]])),this},elproto.translate=function(dx,dy){return this.removed?this:(dx=Str(dx).split(separator),dx.length-1&&(dy=toFloat(dx[1])),dx=toFloat(dx[0])||0,dy=+dy||0,this.transform(this._.transform.concat([["t",dx,dy]])),this)},elproto.transform=function(tstr){var _=this._;if(null==tstr)return _.transform;if(R._extractTransform(this,tstr),this.clip&&$(this.clip,{transform:this.matrix.invert()}),this.pattern&&updatePosition(this),this.node&&$(this.node,{transform:this.matrix}),1!=_.sx||1!=_.sy){var sw=this.attrs[has]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":sw})}return this},elproto.hide=function(){return!this.removed&&this.paper.safari(this.node.style.display="none"),this},elproto.show=function(){return!this.removed&&this.paper.safari(this.node.style.display=""),this},elproto.remove=function(){if(!this.removed&&this.node.parentNode){var paper=this.paper;paper.__set__&&paper.__set__.exclude(this),eve.unbind("raphael.*.*."+this.id),this.gradient&&paper.defs.removeChild(this.gradient),R._tear(this,paper),"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.removeChild(this.node.parentNode):this.node.parentNode.removeChild(this.node);for(var i in this)this[i]="function"==typeof this[i]?R._removedFactory(i):null;this.removed=!0}},elproto._getBBox=function(){if("none"==this.node.style.display){this.show();var hide=!0}var bbox={};try{bbox=this.node.getBBox()}catch(e){}finally{bbox=bbox||{}}return hide&&this.hide(),bbox},elproto.attr=function(name,value){if(this.removed)return this;if(null==name){var res={};for(var a in this.attrs)this.attrs[has](a)&&(res[a]=this.attrs[a]);return res.gradient&&"none"==res.fill&&(res.fill=res.gradient)&&delete res.gradient,res.transform=this._.transform,res}if(null==value&&R.is(name,"string")){if("fill"==name&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;if("transform"==name)return this._.transform;for(var names=name.split(separator),out={},i=0,ii=names.length;ii>i;i++)name=names[i],name in this.attrs?out[name]=this.attrs[name]:R.is(this.paper.customAttributes[name],"function")?out[name]=this.paper.customAttributes[name].def:out[name]=R._availableAttrs[name];return ii-1?out:out[names[0]]}if(null==value&&R.is(name,"array")){for(out={},i=0,ii=name.length;ii>i;i++)out[name[i]]=this.attr(name[i]);return out}if(null!=value){var params={};params[name]=value}else null!=name&&R.is(name,"object")&&(params=name);for(var key in params)eve("raphael.attr."+key+"."+this.id,this,params[key]);for(key in this.paper.customAttributes)if(this.paper.customAttributes[has](key)&&params[has](key)&&R.is(this.paper.customAttributes[key],"function")){var par=this.paper.customAttributes[key].apply(this,[].concat(params[key]));this.attrs[key]=params[key];for(var subkey in par)par[has](subkey)&&(params[subkey]=par[subkey])}return setFillAndStroke(this,params),this},elproto.toFront=function(){if(this.removed)return this;"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.appendChild(this.node.parentNode):this.node.parentNode.appendChild(this.node);var svg=this.paper;return svg.top!=this&&R._tofront(this,svg),this},elproto.toBack=function(){if(this.removed)return this;var parent=this.node.parentNode;"a"==parent.tagName.toLowerCase()?parent.parentNode.insertBefore(this.node.parentNode,this.node.parentNode.parentNode.firstChild):parent.firstChild!=this.node&&parent.insertBefore(this.node,this.node.parentNode.firstChild),R._toback(this,this.paper);this.paper;return this},elproto.insertAfter=function(element){if(this.removed)return this;var node=element.node||element[element.length-1].node;return node.nextSibling?node.parentNode.insertBefore(this.node,node.nextSibling):node.parentNode.appendChild(this.node),R._insertafter(this,element,this.paper),this},elproto.insertBefore=function(element){if(this.removed)return this;var node=element.node||element[0].node;return node.parentNode.insertBefore(this.node,node),R._insertbefore(this,element,this.paper),this},elproto.blur=function(size){var t=this;if(0!==+size){var fltr=$("filter"),blur=$("feGaussianBlur");t.attrs.blur=size,fltr.id=R.createUUID(),$(blur,{stdDeviation:+size||1.5}),fltr.appendChild(blur),t.paper.defs.appendChild(fltr),t._blur=fltr,$(t.node,{filter:"url(#"+fltr.id+")"})}else t._blur&&(t._blur.parentNode.removeChild(t._blur),delete t._blur,delete t.attrs.blur),t.node.removeAttribute("filter")},R._engine.circle=function(svg,x,y,r){var el=$("circle");svg.canvas&&svg.canvas.appendChild(el);var res=new Element(el,svg);return res.attrs={cx:x,cy:y,r:r,fill:"none",stroke:"#000"},res.type="circle",$(el,res.attrs),res},R._engine.rect=function(svg,x,y,w,h,r){var el=$("rect");svg.canvas&&svg.canvas.appendChild(el);var res=new Element(el,svg);return res.attrs={x:x,y:y,width:w,height:h,r:r||0,rx:r||0,ry:r||0,fill:"none",stroke:"#000"},res.type="rect",$(el,res.attrs),res},R._engine.ellipse=function(svg,x,y,rx,ry){var el=$("ellipse");svg.canvas&&svg.canvas.appendChild(el);var res=new Element(el,svg);return res.attrs={cx:x,cy:y,rx:rx,ry:ry,fill:"none",stroke:"#000"},res.type="ellipse",$(el,res.attrs),res},R._engine.image=function(svg,src,x,y,w,h){var el=$("image");$(el,{x:x,y:y,width:w,height:h,preserveAspectRatio:"none"}),el.setAttributeNS(xlink,"href",src),svg.canvas&&svg.canvas.appendChild(el);var res=new Element(el,svg);return res.attrs={x:x,y:y,width:w,height:h,src:src},res.type="image",res},R._engine.text=function(svg,x,y,text){var el=$("text");svg.canvas&&svg.canvas.appendChild(el);var res=new Element(el,svg);return res.attrs={x:x,y:y,"text-anchor":"middle",text:text,font:R._availableAttrs.font,stroke:"none",fill:"#000"},res.type="text",setFillAndStroke(res,res.attrs),res},R._engine.setSize=function(width,height){return this.width=width||this.width,this.height=height||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this},R._engine.create=function(){var con=R._getContainer.apply(0,arguments),container=con&&con.container,x=con.x,y=con.y,width=con.width,height=con.height;if(!container)throw new Error("SVG container not found.");var isFloating,cnvs=$("svg"),css="overflow:hidden;";return x=x||0,y=y||0,width=width||512,height=height||342,$(cnvs,{height:height,version:1.1,width:width,xmlns:"http://www.w3.org/2000/svg"}),1==container?(cnvs.style.cssText=css+"position:absolute;left:"+x+"px;top:"+y+"px",R._g.doc.body.appendChild(cnvs),isFloating=1):(cnvs.style.cssText=css+"position:relative",container.firstChild?container.insertBefore(cnvs,container.firstChild):container.appendChild(cnvs)),container=new R._Paper,container.width=width,container.height=height,container.canvas=cnvs,container.clear(),container._left=container._top=0,isFloating&&(container.renderfix=function(){}),container.renderfix(),container},R._engine.setViewBox=function(x,y,w,h,fit){eve("raphael.setViewBox",this,this._viewBox,[x,y,w,h,fit]);var vb,sw,size=mmax(w/this.width,h/this.height),top=this.top,aspectRatio=fit?"meet":"xMinYMin";for(null==x?(this._vbSize&&(size=1),delete this._vbSize,vb="0 0 "+this.width+S+this.height):(this._vbSize=size,vb=x+S+y+S+w+S+h),$(this.canvas,{viewBox:vb,preserveAspectRatio:aspectRatio});size&&top;)sw="stroke-width"in top.attrs?top.attrs["stroke-width"]:1,top.attr({"stroke-width":sw}),top._.dirty=1,top._.dirtyT=1,top=top.prev;return this._viewBox=[x,y,w,h,!!fit],this},R.prototype.renderfix=function(){var pos,cnvs=this.canvas,s=cnvs.style;try{pos=cnvs.getScreenCTM()||cnvs.createSVGMatrix()}catch(e){pos=cnvs.createSVGMatrix()}var left=-pos.e%1,top=-pos.f%1;(left||top)&&(left&&(this._left=(this._left+left)%1,s.left=this._left+"px"),top&&(this._top=(this._top+top)%1,s.top=this._top+"px"))},R.prototype.clear=function(){R.eve("raphael.clear",this);for(var c=this.canvas;c.firstChild;)c.removeChild(c.firstChild);this.bottom=this.top=null,(this.desc=$("desc")).appendChild(R._g.doc.createTextNode("Created with Raphaël "+R.version)),c.appendChild(this.desc),c.appendChild(this.defs=$("defs"))},R.prototype.remove=function(){eve("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var i in this)this[i]="function"==typeof this[i]?R._removedFactory(i):null};var setproto=R.st;for(var method in elproto)elproto[has](method)&&!setproto[has](method)&&(setproto[method]=function(methodname){return function(){var arg=arguments;return this.forEach(function(el){el[methodname].apply(el,arg)})}}(method))}(window.Raphael),window.Raphael.vml&&function(R){var has="hasOwnProperty",Str=String,toFloat=parseFloat,math=Math,round=math.round,mmax=math.max,mmin=math.min,abs=math.abs,fillString="fill",separator=/[, ]+/,eve=R.eve,ms=" progid:DXImageTransform.Microsoft",S=" ",E="",map={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},bites=/([clmz]),?([^clmz]*)/gi,blurregexp=/ progid:\S+Blur\([^\)]+\)/g,val=/-?[^,\s-]+/g,cssDot="position:absolute;left:0;top:0;width:1px;height:1px",zoom=21600,pathTypes={path:1,rect:1,image:1},ovalTypes={circle:1,ellipse:1},path2vml=function(path){var total=/[ahqstv]/gi,command=R._pathToAbsolute;if(Str(path).match(total)&&(command=R._path2curve),total=/[clmz]/g,command==R._pathToAbsolute&&!Str(path).match(total)){var res=Str(path).replace(bites,function(all,command,args){var vals=[],isMove="m"==command.toLowerCase(),res=map[command];return args.replace(val,function(value){isMove&&2==vals.length&&(res+=vals+map["m"==command?"l":"L"],vals=[]),vals.push(round(value*zoom))}),res+vals});return res}var p,r,pa=command(path);res=[];for(var i=0,ii=pa.length;ii>i;i++){p=pa[i],r=pa[i][0].toLowerCase(),"z"==r&&(r="x");for(var j=1,jj=p.length;jj>j;j++)r+=round(p[j]*zoom)+(j!=jj-1?",":E);res.push(r)}return res.join(S)},compensation=function(deg,dx,dy){var m=R.matrix();return m.rotate(-deg,.5,.5),{dx:m.x(dx,dy),dy:m.y(dx,dy)}},setCoords=function(p,sx,sy,dx,dy,deg){var _=p._,m=p.matrix,fillpos=_.fillpos,o=p.node,s=o.style,y=1,flip="",kx=zoom/sx,ky=zoom/sy;if(s.visibility="hidden",sx&&sy){if(o.coordsize=abs(kx)+S+abs(ky),s.rotation=deg*(0>sx*sy?-1:1),deg){var c=compensation(deg,dx,dy);dx=c.dx,dy=c.dy}if(0>sx&&(flip+="x"),0>sy&&(flip+=" y")&&(y=-1),s.flip=flip,o.coordorigin=dx*-kx+S+dy*-ky,fillpos||_.fillsize){var fill=o.getElementsByTagName(fillString);fill=fill&&fill[0],o.removeChild(fill),fillpos&&(c=compensation(deg,m.x(fillpos[0],fillpos[1]),m.y(fillpos[0],fillpos[1])),fill.position=c.dx*y+S+c.dy*y),_.fillsize&&(fill.size=_.fillsize[0]*abs(sx)+S+_.fillsize[1]*abs(sy)),o.appendChild(fill)}s.visibility="visible"}};R.toString=function(){return"Your browser doesn’t support SVG. Falling down to VML.\nYou are running Raphaël "+this.version};var addArrow=function(o,value,isEnd){for(var values=Str(value).toLowerCase().split("-"),se=isEnd?"end":"start",i=values.length,type="classic",w="medium",h="medium";i--;)switch(values[i]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":type=values[i];break;case"wide":case"narrow":h=values[i];break;case"long":case"short":w=values[i]}var stroke=o.node.getElementsByTagName("stroke")[0];stroke[se+"arrow"]=type,stroke[se+"arrowlength"]=w,stroke[se+"arrowwidth"]=h},setFillAndStroke=function(o,params){o.attrs=o.attrs||{};var node=o.node,a=o.attrs,s=node.style,newpath=pathTypes[o.type]&&(params.x!=a.x||params.y!=a.y||params.width!=a.width||params.height!=a.height||params.cx!=a.cx||params.cy!=a.cy||params.rx!=a.rx||params.ry!=a.ry||params.r!=a.r),isOval=ovalTypes[o.type]&&(a.cx!=params.cx||a.cy!=params.cy||a.r!=params.r||a.rx!=params.rx||a.ry!=params.ry),res=o;for(var par in params)params[has](par)&&(a[par]=params[par]);if(newpath&&(a.path=R._getPath[o.type](o),o._.dirty=1),params.href&&(node.href=params.href),params.title&&(node.title=params.title),params.target&&(node.target=params.target),params.cursor&&(s.cursor=params.cursor),"blur"in params&&o.blur(params.blur),(params.path&&"path"==o.type||newpath)&&(node.path=path2vml(~Str(a.path).toLowerCase().indexOf("r")?R._pathToAbsolute(a.path):a.path),"image"==o.type&&(o._.fillpos=[a.x,a.y],o._.fillsize=[a.width,a.height],setCoords(o,1,1,0,0,0))),"transform"in params&&o.transform(params.transform),isOval){var cx=+a.cx,cy=+a.cy,rx=+a.rx||+a.r||0,ry=+a.ry||+a.r||0;node.path=R.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",round((cx-rx)*zoom),round((cy-ry)*zoom),round((cx+rx)*zoom),round((cy+ry)*zoom),round(cx*zoom))}if("clip-rect"in params){var rect=Str(params["clip-rect"]).split(separator);if(4==rect.length){rect[2]=+rect[2]+ +rect[0],rect[3]=+rect[3]+ +rect[1];var div=node.clipRect||R._g.doc.createElement("div"),dstyle=div.style;dstyle.clip=R.format("rect({1}px {2}px {3}px {0}px)",rect),node.clipRect||(dstyle.position="absolute",dstyle.top=0,dstyle.left=0,dstyle.width=o.paper.width+"px",dstyle.height=o.paper.height+"px",node.parentNode.insertBefore(div,node),div.appendChild(node),
node.clipRect=div)}params["clip-rect"]||node.clipRect&&(node.clipRect.style.clip="auto")}if(o.textpath){var textpathStyle=o.textpath.style;params.font&&(textpathStyle.font=params.font),params["font-family"]&&(textpathStyle.fontFamily='"'+params["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,E)+'"'),params["font-size"]&&(textpathStyle.fontSize=params["font-size"]),params["font-weight"]&&(textpathStyle.fontWeight=params["font-weight"]),params["font-style"]&&(textpathStyle.fontStyle=params["font-style"])}if("arrow-start"in params&&addArrow(res,params["arrow-start"]),"arrow-end"in params&&addArrow(res,params["arrow-end"],1),null!=params.opacity||null!=params["stroke-width"]||null!=params.fill||null!=params.src||null!=params.stroke||null!=params["stroke-width"]||null!=params["stroke-opacity"]||null!=params["fill-opacity"]||null!=params["stroke-dasharray"]||null!=params["stroke-miterlimit"]||null!=params["stroke-linejoin"]||null!=params["stroke-linecap"]){var fill=node.getElementsByTagName(fillString),newfill=!1;if(fill=fill&&fill[0],!fill&&(newfill=fill=createNode(fillString)),"image"==o.type&&params.src&&(fill.src=params.src),params.fill&&(fill.on=!0),(null==fill.on||"none"==params.fill||null===params.fill)&&(fill.on=!1),fill.on&&params.fill){var isURL=Str(params.fill).match(R._ISURL);if(isURL){fill.parentNode==node&&node.removeChild(fill),fill.rotate=!0,fill.src=isURL[1],fill.type="tile";var bbox=o.getBBox(1);fill.position=bbox.x+S+bbox.y,o._.fillpos=[bbox.x,bbox.y],R._preload(isURL[1],function(){o._.fillsize=[this.offsetWidth,this.offsetHeight]})}else fill.color=R.getRGB(params.fill).hex,fill.src=E,fill.type="solid",R.getRGB(params.fill).error&&(res.type in{circle:1,ellipse:1}||"r"!=Str(params.fill).charAt())&&addGradientFill(res,params.fill,fill)&&(a.fill="none",a.gradient=params.fill,fill.rotate=!1)}if("fill-opacity"in params||"opacity"in params){var opacity=((+a["fill-opacity"]+1||2)-1)*((+a.opacity+1||2)-1)*((+R.getRGB(params.fill).o+1||2)-1);opacity=mmin(mmax(opacity,0),1),fill.opacity=opacity,fill.src&&(fill.color="none")}node.appendChild(fill);var stroke=node.getElementsByTagName("stroke")&&node.getElementsByTagName("stroke")[0],newstroke=!1;!stroke&&(newstroke=stroke=createNode("stroke")),(params.stroke&&"none"!=params.stroke||params["stroke-width"]||null!=params["stroke-opacity"]||params["stroke-dasharray"]||params["stroke-miterlimit"]||params["stroke-linejoin"]||params["stroke-linecap"])&&(stroke.on=!0),("none"==params.stroke||null===params.stroke||null==stroke.on||0==params.stroke||0==params["stroke-width"])&&(stroke.on=!1);var strokeColor=R.getRGB(params.stroke);stroke.on&&params.stroke&&(stroke.color=strokeColor.hex),opacity=((+a["stroke-opacity"]+1||2)-1)*((+a.opacity+1||2)-1)*((+strokeColor.o+1||2)-1);var width=.75*(toFloat(params["stroke-width"])||1);if(opacity=mmin(mmax(opacity,0),1),null==params["stroke-width"]&&(width=a["stroke-width"]),params["stroke-width"]&&(stroke.weight=width),width&&1>width&&(opacity*=width)&&(stroke.weight=1),stroke.opacity=opacity,params["stroke-linejoin"]&&(stroke.joinstyle=params["stroke-linejoin"]||"miter"),stroke.miterlimit=params["stroke-miterlimit"]||8,params["stroke-linecap"]&&(stroke.endcap="butt"==params["stroke-linecap"]?"flat":"square"==params["stroke-linecap"]?"square":"round"),params["stroke-dasharray"]){var dasharray={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};stroke.dashstyle=dasharray[has](params["stroke-dasharray"])?dasharray[params["stroke-dasharray"]]:E}newstroke&&node.appendChild(stroke)}if("text"==res.type){res.paper.canvas.style.display=E;var span=res.paper.span,m=100,fontSize=a.font&&a.font.match(/\d+(?:\.\d*)?(?=px)/);s=span.style,a.font&&(s.font=a.font),a["font-family"]&&(s.fontFamily=a["font-family"]),a["font-weight"]&&(s.fontWeight=a["font-weight"]),a["font-style"]&&(s.fontStyle=a["font-style"]),fontSize=toFloat(a["font-size"]||fontSize&&fontSize[0])||10,s.fontSize=fontSize*m+"px",res.textpath.string&&(span.innerHTML=Str(res.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var brect=span.getBoundingClientRect();res.W=a.w=(brect.right-brect.left)/m,res.H=a.h=(brect.bottom-brect.top)/m,res.X=a.x,res.Y=a.y+res.H/2,("x"in params||"y"in params)&&(res.path.v=R.format("m{0},{1}l{2},{1}",round(a.x*zoom),round(a.y*zoom),round(a.x*zoom)+1));for(var dirtyattrs=["x","y","text","font","font-family","font-weight","font-style","font-size"],d=0,dd=dirtyattrs.length;dd>d;d++)if(dirtyattrs[d]in params){res._.dirty=1;break}switch(a["text-anchor"]){case"start":res.textpath.style["v-text-align"]="left",res.bbx=res.W/2;break;case"end":res.textpath.style["v-text-align"]="right",res.bbx=-res.W/2;break;default:res.textpath.style["v-text-align"]="center",res.bbx=0}res.textpath.style["v-text-kern"]=!0}},addGradientFill=function(o,gradient,fill){o.attrs=o.attrs||{};var pow=(o.attrs,Math.pow),type="linear",fxfy=".5 .5";if(o.attrs.gradient=gradient,gradient=Str(gradient).replace(R._radial_gradient,function(all,fx,fy){return type="radial",fx&&fy&&(fx=toFloat(fx),fy=toFloat(fy),pow(fx-.5,2)+pow(fy-.5,2)>.25&&(fy=math.sqrt(.25-pow(fx-.5,2))*(2*(fy>.5)-1)+.5),fxfy=fx+S+fy),E}),gradient=gradient.split(/\s*\-\s*/),"linear"==type){var angle=gradient.shift();if(angle=-toFloat(angle),isNaN(angle))return null}var dots=R._parseDots(gradient);if(!dots)return null;if(o=o.shape||o.node,dots.length){o.removeChild(fill),fill.on=!0,fill.method="none",fill.color=dots[0].color,fill.color2=dots[dots.length-1].color;for(var clrs=[],i=0,ii=dots.length;ii>i;i++)dots[i].offset&&clrs.push(dots[i].offset+S+dots[i].color);fill.colors=clrs.length?clrs.join():"0% "+fill.color,"radial"==type?(fill.type="gradientTitle",fill.focus="100%",fill.focussize="0 0",fill.focusposition=fxfy,fill.angle=0):(fill.type="gradient",fill.angle=(270-angle)%360),o.appendChild(fill)}return 1},Element=function(node,vml){this[0]=this.node=node,node.raphael=!0,this.id=R._oid++,node.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=vml,this.matrix=R.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!vml.bottom&&(vml.bottom=this),this.prev=vml.top,vml.top&&(vml.top.next=this),vml.top=this,this.next=null},elproto=R.el;Element.prototype=elproto,elproto.constructor=Element,elproto.transform=function(tstr){if(null==tstr)return this._.transform;var oldt,vbs=this.paper._viewBoxShift,vbt=vbs?"s"+[vbs.scale,vbs.scale]+"-1-1t"+[vbs.dx,vbs.dy]:E;vbs&&(oldt=tstr=Str(tstr).replace(/\.{3}|\u2026/g,this._.transform||E)),R._extractTransform(this,vbt+tstr);var split,matrix=this.matrix.clone(),skew=this.skew,o=this.node,isGrad=~Str(this.attrs.fill).indexOf("-"),isPatt=!Str(this.attrs.fill).indexOf("url(");if(matrix.translate(-.5,-.5),isPatt||isGrad||"image"==this.type)if(skew.matrix="1 0 0 1",skew.offset="0 0",split=matrix.split(),isGrad&&split.noRotation||!split.isSimple){o.style.filter=matrix.toFilter();var bb=this.getBBox(),bbt=this.getBBox(1),dx=bb.x-bbt.x,dy=bb.y-bbt.y;o.coordorigin=dx*-zoom+S+dy*-zoom,setCoords(this,1,1,dx,dy,0)}else o.style.filter=E,setCoords(this,split.scalex,split.scaley,split.dx,split.dy,split.rotate);else o.style.filter=E,skew.matrix=Str(matrix),skew.offset=matrix.offset();return oldt&&(this._.transform=oldt),this},elproto.rotate=function(deg,cx,cy){if(this.removed)return this;if(null!=deg){if(deg=Str(deg).split(separator),deg.length-1&&(cx=toFloat(deg[1]),cy=toFloat(deg[2])),deg=toFloat(deg[0]),null==cy&&(cx=cy),null==cx||null==cy){var bbox=this.getBBox(1);cx=bbox.x+bbox.width/2,cy=bbox.y+bbox.height/2}return this._.dirtyT=1,this.transform(this._.transform.concat([["r",deg,cx,cy]])),this}},elproto.translate=function(dx,dy){return this.removed?this:(dx=Str(dx).split(separator),dx.length-1&&(dy=toFloat(dx[1])),dx=toFloat(dx[0])||0,dy=+dy||0,this._.bbox&&(this._.bbox.x+=dx,this._.bbox.y+=dy),this.transform(this._.transform.concat([["t",dx,dy]])),this)},elproto.scale=function(sx,sy,cx,cy){if(this.removed)return this;if(sx=Str(sx).split(separator),sx.length-1&&(sy=toFloat(sx[1]),cx=toFloat(sx[2]),cy=toFloat(sx[3]),isNaN(cx)&&(cx=null),isNaN(cy)&&(cy=null)),sx=toFloat(sx[0]),null==sy&&(sy=sx),null==cy&&(cx=cy),null==cx||null==cy)var bbox=this.getBBox(1);return cx=null==cx?bbox.x+bbox.width/2:cx,cy=null==cy?bbox.y+bbox.height/2:cy,this.transform(this._.transform.concat([["s",sx,sy,cx,cy]])),this._.dirtyT=1,this},elproto.hide=function(){return!this.removed&&(this.node.style.display="none"),this},elproto.show=function(){return!this.removed&&(this.node.style.display=E),this},elproto._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},elproto.remove=function(){if(!this.removed&&this.node.parentNode){this.paper.__set__&&this.paper.__set__.exclude(this),R.eve.unbind("raphael.*.*."+this.id),R._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape);for(var i in this)this[i]="function"==typeof this[i]?R._removedFactory(i):null;this.removed=!0}},elproto.attr=function(name,value){if(this.removed)return this;if(null==name){var res={};for(var a in this.attrs)this.attrs[has](a)&&(res[a]=this.attrs[a]);return res.gradient&&"none"==res.fill&&(res.fill=res.gradient)&&delete res.gradient,res.transform=this._.transform,res}if(null==value&&R.is(name,"string")){if(name==fillString&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;for(var names=name.split(separator),out={},i=0,ii=names.length;ii>i;i++)name=names[i],name in this.attrs?out[name]=this.attrs[name]:R.is(this.paper.customAttributes[name],"function")?out[name]=this.paper.customAttributes[name].def:out[name]=R._availableAttrs[name];return ii-1?out:out[names[0]]}if(this.attrs&&null==value&&R.is(name,"array")){for(out={},i=0,ii=name.length;ii>i;i++)out[name[i]]=this.attr(name[i]);return out}var params;null!=value&&(params={},params[name]=value),null==value&&R.is(name,"object")&&(params=name);for(var key in params)eve("raphael.attr."+key+"."+this.id,this,params[key]);if(params){for(key in this.paper.customAttributes)if(this.paper.customAttributes[has](key)&&params[has](key)&&R.is(this.paper.customAttributes[key],"function")){var par=this.paper.customAttributes[key].apply(this,[].concat(params[key]));this.attrs[key]=params[key];for(var subkey in par)par[has](subkey)&&(params[subkey]=par[subkey])}params.text&&"text"==this.type&&(this.textpath.string=params.text),setFillAndStroke(this,params)}return this},elproto.toFront=function(){return!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&R._tofront(this,this.paper),this},elproto.toBack=function(){return this.removed?this:(this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),R._toback(this,this.paper)),this)},elproto.insertAfter=function(element){return this.removed?this:(element.constructor==R.st.constructor&&(element=element[element.length-1]),element.node.nextSibling?element.node.parentNode.insertBefore(this.node,element.node.nextSibling):element.node.parentNode.appendChild(this.node),R._insertafter(this,element,this.paper),this)},elproto.insertBefore=function(element){return this.removed?this:(element.constructor==R.st.constructor&&(element=element[0]),element.node.parentNode.insertBefore(this.node,element.node),R._insertbefore(this,element,this.paper),this)},elproto.blur=function(size){var s=this.node.runtimeStyle,f=s.filter;f=f.replace(blurregexp,E),0!==+size?(this.attrs.blur=size,s.filter=f+S+ms+".Blur(pixelradius="+(+size||1.5)+")",s.margin=R.format("-{0}px 0 0 -{0}px",round(+size||1.5))):(s.filter=f,s.margin=0,delete this.attrs.blur)},R._engine.path=function(pathString,vml){var el=createNode("shape");el.style.cssText=cssDot,el.coordsize=zoom+S+zoom,el.coordorigin=vml.coordorigin;var p=new Element(el,vml),attr={fill:"none",stroke:"#000"};pathString&&(attr.path=pathString),p.type="path",p.path=[],p.Path=E,setFillAndStroke(p,attr),vml.canvas.appendChild(el);var skew=createNode("skew");return skew.on=!0,el.appendChild(skew),p.skew=skew,p.transform(E),p},R._engine.rect=function(vml,x,y,w,h,r){var path=R._rectPath(x,y,w,h,r),res=vml.path(path),a=res.attrs;return res.X=a.x=x,res.Y=a.y=y,res.W=a.width=w,res.H=a.height=h,a.r=r,a.path=path,res.type="rect",res},R._engine.ellipse=function(vml,x,y,rx,ry){var res=vml.path();res.attrs;return res.X=x-rx,res.Y=y-ry,res.W=2*rx,res.H=2*ry,res.type="ellipse",setFillAndStroke(res,{cx:x,cy:y,rx:rx,ry:ry}),res},R._engine.circle=function(vml,x,y,r){var res=vml.path();res.attrs;return res.X=x-r,res.Y=y-r,res.W=res.H=2*r,res.type="circle",setFillAndStroke(res,{cx:x,cy:y,r:r}),res},R._engine.image=function(vml,src,x,y,w,h){var path=R._rectPath(x,y,w,h),res=vml.path(path).attr({stroke:"none"}),a=res.attrs,node=res.node,fill=node.getElementsByTagName(fillString)[0];return a.src=src,res.X=a.x=x,res.Y=a.y=y,res.W=a.width=w,res.H=a.height=h,a.path=path,res.type="image",fill.parentNode==node&&node.removeChild(fill),fill.rotate=!0,fill.src=src,fill.type="tile",res._.fillpos=[x,y],res._.fillsize=[w,h],node.appendChild(fill),setCoords(res,1,1,0,0,0),res},R._engine.text=function(vml,x,y,text){var el=createNode("shape"),path=createNode("path"),o=createNode("textpath");x=x||0,y=y||0,text=text||"",path.v=R.format("m{0},{1}l{2},{1}",round(x*zoom),round(y*zoom),round(x*zoom)+1),path.textpathok=!0,o.string=Str(text),o.on=!0,el.style.cssText=cssDot,el.coordsize=zoom+S+zoom,el.coordorigin="0 0";var p=new Element(el,vml),attr={fill:"#000",stroke:"none",font:R._availableAttrs.font,text:text};p.shape=el,p.path=path,p.textpath=o,p.type="text",p.attrs.text=Str(text),p.attrs.x=x,p.attrs.y=y,p.attrs.w=1,p.attrs.h=1,setFillAndStroke(p,attr),el.appendChild(o),el.appendChild(path),vml.canvas.appendChild(el);var skew=createNode("skew");return skew.on=!0,el.appendChild(skew),p.skew=skew,p.transform(E),p},R._engine.setSize=function(width,height){var cs=this.canvas.style;return this.width=width,this.height=height,width==+width&&(width+="px"),height==+height&&(height+="px"),cs.width=width,cs.height=height,cs.clip="rect(0 "+width+" "+height+" 0)",this._viewBox&&R._engine.setViewBox.apply(this,this._viewBox),this},R._engine.setViewBox=function(x,y,w,h,fit){R.eve("raphael.setViewBox",this,this._viewBox,[x,y,w,h,fit]);var H,W,width=this.width,height=this.height,size=1/mmax(w/width,h/height);return fit&&(H=height/h,W=width/w,width>w*H&&(x-=(width-w*H)/2/H),height>h*W&&(y-=(height-h*W)/2/W)),this._viewBox=[x,y,w,h,!!fit],this._viewBoxShift={dx:-x,dy:-y,scale:size},this.forEach(function(el){el.transform("...")}),this};var createNode;R._engine.initWin=function(win){var doc=win.document;doc.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!doc.namespaces.rvml&&doc.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),createNode=function(tagName){return doc.createElement("<rvml:"+tagName+' class="rvml">')}}catch(e){createNode=function(tagName){return doc.createElement("<"+tagName+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},R._engine.initWin(R._g.win),R._engine.create=function(){var con=R._getContainer.apply(0,arguments),container=con.container,height=con.height,width=con.width,x=con.x,y=con.y;if(!container)throw new Error("VML container not found.");var res=new R._Paper,c=res.canvas=R._g.doc.createElement("div"),cs=c.style;return x=x||0,y=y||0,width=width||512,height=height||342,res.width=width,res.height=height,width==+width&&(width+="px"),height==+height&&(height+="px"),res.coordsize=1e3*zoom+S+1e3*zoom,res.coordorigin="0 0",res.span=R._g.doc.createElement("span"),res.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",c.appendChild(res.span),cs.cssText=R.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",width,height),1==container?(R._g.doc.body.appendChild(c),cs.left=x+"px",cs.top=y+"px",cs.position="absolute"):container.firstChild?container.insertBefore(c,container.firstChild):container.appendChild(c),res.renderfix=function(){},res},R.prototype.clear=function(){R.eve("raphael.clear",this),this.canvas.innerHTML=E,this.span=R._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},R.prototype.remove=function(){R.eve("raphael.remove",this),this.canvas.parentNode.removeChild(this.canvas);for(var i in this)this[i]="function"==typeof this[i]?R._removedFactory(i):null;return!0};var setproto=R.st;for(var method in elproto)elproto[has](method)&&!setproto[has](method)&&(setproto[method]=function(methodname){return function(){var arg=arguments;return this.forEach(function(el){el[methodname].apply(el,arg)})}}(method))}(window.Raphael);
//# sourceMappingURL=raphael.js.map
Ext.define("chl.exUnit.GridFilterMenuButton",{alias:"widget.GridFilterMenuButton",extend:"Ext.button.Button",filterParam:!1,menu:{defaults:{xtype:"menucheckitem"},items:[]},initComponent:function(){var me=this;me.callParent(arguments),me.on("boxready",function(componet,width,height,eOpts){if(me.filterParam){var target=componet.up(me.filterParam.GridTypeName);me.filterParam.menuType&&"date"==me.filterParam.menuType?GridManager.CreateGridFilterDateMenu(componet,{group:me.filterParam.group,text:me.filterParam.text,target:target,componet:componet,filterKey:me.filterParam.filterKey}):GridManager.CreateGridFilterMenu(componet,me.filterParam.store,{group:me.filterParam.group,text:me.filterParam.text,target:target,componet:componet,filterKey:me.filterParam.filterKey})}})}}),Ext.define("chl.exUnit.GridSelectCancelMenuButton",{alias:"widget.GridSelectCancelMenuButton",extend:"Ext.button.Button",targetName:!1,menu:{defaults:{xtype:"menuitem"},items:[]},initComponent:function(){var me=this;me.callParent(arguments),me.on("boxready",function(componet,width,height,eOpts){var target=componet.up(me.targetName);GridManager.CreateGridSelectCancelMenu(componet,target)})}}),Ext.define("chl.exUnit.MiniPngDDSortPanel",{alias:"widget.MiniPngDDSortPanel",extend:"Ext.container.Container",alternateClassName:["MiniPngDDSortPanel"],itemId:"MiniPngDDSortPanel",frame:!1,layout:{type:"auto",width:100},bodyStyle:{background:"#DFE8F6"},autoScroll:!0,defaults:{xtype:"image",width:100,height:100,margin:"5 5 5 5",style:{"float":"left"}},items:[]}),Ext.define("MiniPngDDSortViewClass",{config:{selectAll:0,pngSels:new Ext.util.MixedCollection,pngAllMini:new Ext.util.MixedCollection,RowId:0,AreaId:0,currPngTotal:1,shiftImg:0},constructor:function(cfg){this.initConfig(cfg),this.pngSels=new Ext.util.MixedCollection,this.pngSelBig=new Ext.util.MixedCollection,this.pngAllMini=new Ext.util.MixedCollection},initPngPanel:function(palPngContainer){var window=palPngContainer.up("window"),pngClass=window.pngClass,pngNStyle={border:"1px solid black","background-color":"#FFFFFF","background-image":"none","background-repeat":"no-repeat"},param={limit:0,page:0,filter:"{ AreaId: "+pngClass.AreaId+",RowId:"+pngClass.RowId+" }",dir:"ASC",sort:"SortNum",sessiontoken:GlobalFun.getSeesionToken()};WsCall.call(GlobalConfig.Controllers.TombstoneGrid.read,"LoadTombstoneGrid",param,function(response,opts){var data=response.dataset;window.el.mask("请稍候..."),Ext.Array.each(data,function(item,index,allItems){var src=GlobalFun.GetTomestoneImageSrc(item.PaymentStatusId,item.Id,item.TypeId),pngContainer=Ext.create("Ext.container.Container",{width:100,height:80,tombstoneId:item.Id,layout:{type:"vbox",align:"center"},items:[{xtype:"image",cls:"hospital-target",sortNum:index,tombstoneId:item.Id,width:77,height:60,style:pngNStyle,src:src,listeners:{boxready:function(img,width,height,opts){DropDragControl.initializeHospitalDropZone(img,window);var imgDom=img.getEl();pngClass.getPngAllMini().add(img.id,img),imgDom.on("click",function(eve){if(!stopClick){if(eve.ctrlKey){pngClass.setShiftImg(img);var borderStyle=imgDom.getStyle("border",!0);return void("1px solid black"==borderStyle||"black 1px solid"==borderStyle?(imgDom.setStyle("border","3px solid blue"),pngClass.getPngSels().contains(img)||(DropDragControl.uninitHospitalDropZone(img),DropDragControl.initializePatientDragZone(img,window),pngClass.getPngSels().add(img.id,img))):(imgDom.setStyle("border","1px solid black"),pngClass.getPngSels().contains(img)&&(DropDragControl.uninitPatientDragZone(img),DropDragControl.initializeHospitalDropZone(img,window),pngClass.getPngSels().remove(img))))}if(eve.shiftKey){var firstImg,imageList=palPngContainer.query("image");return Ext.Array.each(imageList,function(item,index,allItems){0==index&&(firstImg=0!=pngClass.getShiftImg()?pngClass.getShiftImg():item),DropDragControl.uninitPatientDragZone(item),DropDragControl.initializeHospitalDropZone(item,window)}),pngClass.getPngSels().clear(),void Ext.Array.each(imageList,function(item,index,allItems){var imgItem=item.getEl();imgItem.setStyle("border","1px solid black"),item.sortNum>=firstImg.sortNum&&item.sortNum<=img.sortNum&&!item.ownerCt.disabled&&(imgItem.setStyle("border","3px solid blue"),DropDragControl.uninitHospitalDropZone(item),DropDragControl.initializePatientDragZone(item,window),pngClass.getPngSels().add(item.id,item)),item.sortNum<=firstImg.sortNum&&item.sortNum>=img.sortNum&&!item.ownerCt.disabled&&(imgItem.setStyle("border","3px solid blue"),DropDragControl.uninitHospitalDropZone(item),DropDragControl.initializePatientDragZone(item,window),pngClass.getPngSels().add(item.id,item))})}pngClass.setShiftImg(img);var imageList=palPngContainer.query("image");Ext.Array.each(imageList,function(item,index,allItems){DropDragControl.uninitPatientDragZone(item),DropDragControl.initializeHospitalDropZone(item,window)}),pngClass.getPngSels().clear(),Ext.Array.each(imageList,function(item,index,allItems){var imgItem=item.getEl();imgItem.setStyle("border","1px solid black"),item.id==img.id&&(imgItem.setStyle("border","3px solid blue"),DropDragControl.uninitHospitalDropZone(item),DropDragControl.initializePatientDragZone(item,window),pngClass.getPngSels().add(item.id,item))})}}),imgDom.on("dblclick",function(){var imageList=palPngContainer.query("image");Ext.Array.each(imageList,function(item,index,allItems){DropDragControl.uninitPatientDragZone(item),DropDragControl.initializeHospitalDropZone(item,window)}),pngClass.getPngSels().clear(),Ext.Array.each(imageList,function(item,index,allItems){var imgItem=item.getEl();imgItem.setStyle("border","1px solid black")});var borderStyle=imgDom.dom.style.border;("1px solid black"==borderStyle||"black 1px solid"==borderStyle)&&(imgDom.setStyle("border","3px solid blue"),pngClass.getPngSels().contains(img)||(DropDragControl.uninitHospitalDropZone(img),DropDragControl.initializePatientDragZone(img,window),pngClass.getPngSels().add(img.id,img)))}),imgDom.dom.onload=function(){imgDom.dom&&imgDom.dom.height>1&&img.ownerCt.el.unmask()}}}},{xtype:"label",text:item.Alias}]});palPngContainer.add(pngContainer)}),window.el.unmask()},function(response,opts){GlobalFun.errorProcess(response.code)||Ext.Msg.alert("失败",response.msg)},!0,"请稍候...",palPngContainer.el)}}),Ext.define("chl.exUnit.AreaTombstoneImagePanel",{alias:"widget.AreaTombstoneImagePanel",extend:"Ext.panel.Panel",alternateClassName:["AreaTombstoneImagePanel"],itemId:"AreaTombstoneImagePanel",frame:!1,bodyStyle:{background:"#DFE8F6"},border:!1,autoScroll:!0,style:{"overflow-x":"auto","white-space":"nowrap"},dockedItems:[{xtype:"container",itemId:"container",layout:{type:"hbox",align:"middle"},height:34,dock:"top",defaults:{margin:"2px 2px 2px 2px"},items:[{xtype:"textfield",itemId:"tombCode",cls:"big-fieldtext",fieldLabel:"区域或墓碑编码",labelWidth:100,labelAlign:"right",allowBlank:!1,blankText:"不能为空",regex:GlobalConfig.RegexController.regexTombstoneCode,regexText:"请输入3位或5位或7位编码",enableKeyEvents:!0,listeners:{keypress:function(field,e,opts){if(e.getKey()==e.ENTER){var toolbar=field.up("container"),showTomb=toolbar.down("#showTomb");showTomb.fireEvent("click",showTomb)}if(e.getKey()==e.ESC){var toolbar=field.up("container"),reset=toolbar.down("#reset");reset.fireEvent("click",reset)}}}},{xtype:"button",text:"选择",handler:function(com){var w=this.up("container"),field=w.down("#tombCode");WindowManager.SelectCemeteryAreaWin=WindowManager.ShowSelectCemeteryAreaWin(),WindowManager.SelectCemeteryAreaWin.callComponent=field}},{text:"显示",xtype:"button",iconCls:"search",width:100,cls:"big-fieldtext",itemId:"showTomb",listeners:{click:function(com){var toolbar=com.up("container"),tombCode=toolbar.down("#tombCode");if(tombCode.isValid()){GridManager.AreaTombstoneImagePanel.removeAll();var param={limit:0,page:0,filter:"{}",dir:"ASC",sort:"SortNum",sessiontoken:GlobalFun.getSeesionToken()},codeVal=tombCode.getValue();codeVal.length>0&&(param.filter='{ "Area": { "Alias": "'+codeVal+'" }, "Row": { "Alias": "'+codeVal+'" }, "Column": { "Alias": "'+codeVal+'" } }'),WsCall.call(GlobalConfig.Controllers.TombstoneGrid.read,"LoadTombstoneGrid",param,function(response,opts){var data=response.dataset;GridManager.AreaTombstoneImagePanel.el.mask("请稍候...");var pngNStyle={border:"1px solid black","background-color":"#FFFFFF","background-image":"none","background-repeat":"no-repeat",cursor:"pointer"},items1=[],pngContainer=Ext.create("Ext.container.Container",{style:{"white-space":"nowrap",margin:"5px 5px 5px 5px"},items:[]}),rowMaps=new Ext.util.MixedCollection,areaSort="ASC";Ext.Array.each(data,function(item,index,allItems){var key=item.RowId;rowMaps.containsKey(key)?rowMaps.get(key).push(item):rowMaps.add(key,[item]),"DESC"==item.AreaSort&&(areaSort="DESC")}),rowMaps.sortByKey(areaSort),rowMaps.each(function(row,index){items1=[],pngContainer=Ext.create("Ext.container.Container",{style:{"white-space":"nowrap",margin:"5px 5px 5px 5px"},items:[]}),Ext.Array.each(row,function(item,index1){var src=GlobalFun.GetTomestoneImageSrc(item.PaymentStatusId,item.Id,item.TypeId),pngContainer1=Ext.create("Ext.container.Container",{width:100,height:80,tombstoneId:item.Id,layout:{type:"vbox",align:"center"},style:{display:"inline-block"},items:[{xtype:"image",sortNum:item.SortNum,tombstoneId:item.Id,PaymentStatusId:item.PaymentStatusId,tombstoneInfo:item,width:77,height:60,style:pngNStyle,src:src,listeners:{boxready:function(img){var imgDom=img.getEl();imgDom.on("click",function(eve){var tid=img.tombstoneId,tombstoneInfo=img.tombstoneInfo;GlobalFun.JobTombPngClickFun(eve,tid,tombstoneInfo)})}}},{xtype:"label",text:item.Alias}]});items1.push(pngContainer1)}),pngContainer.add(items1),GridManager.AreaTombstoneImagePanel.add(pngContainer)}),GridManager.AreaTombstoneImagePanel.el.unmask()},function(response,opts){GlobalFun.errorProcess(response.code)||Ext.Msg.alert("失败",response.msg)},!0,"请稍候...",GridManager.AreaTombstoneImagePanel.el)}}}},{text:"重置",xtype:"button",width:100,cls:"big-fieldtext",itemId:"reset",listeners:{click:function(field){var toolbar=field.up("container"),tombCode=toolbar.down("#tombCode");tombCode.setValue(""),tombCode.unsetActiveError(),tombCode.inputEl.focus(100)}}}]}],items:[]});
//# sourceMappingURL=exUnit.js.map
Ext.define("chl.Model.MainItemListTreeModel",{extend:"Ext.data.Model",fields:[{name:"id",type:"string"},{name:"text",type:"string"},{name:"leaf",type:"boolean"},{name:"iconCls",type:"string"},{name:"expanded",type:"boolean"},{name:"linksrc",type:"string"},{name:"parent"},{name:"children"},{name:"cls"},{name:"express_id"}]});
//# sourceMappingURL=MainItemListTreeModel.js.map
Ext.create("Ext.data.TreeStore",{model:"chl.Model.MainItemListTreeModel",storeId:"MainItemListTreeStoreId",root:{id:"000",expanded:!0,children:[{id:"001",text:"客户管理",iconCls:"customerGrid",leaf:!0},{id:"002",text:"票据管理",iconCls:"tracking_numberGrid",leaf:!0},{id:"003",text:"成本管理",expanded:!0,children:[{id:"003_1",express_id:1,iconCls:"expressGrid",text:"圆通快递",leaf:!0}]},{id:"004",text:"网点管理",expanded:!0,children:[{id:"004_1",express_id:1,iconCls:"expressGrid",text:"圆通快递",leaf:!0}]}]}});
//# sourceMappingURL=MainItemListTreeStore.js.map
Ext.define("chl.tree.MainItemListTree",{alias:"widget.MainItemListTree",itemId:"MainItemListTree",title:"系统",iconCls:"home",extend:"chl.tree.BaseTree",clearOnLoad:!1,alternateClassName:["MainItemListTree"],store:"MainItemListTreeStoreId",ddGroup:"MainItemListTreeDDGp",animate:!1,rootVisible:!1,frame:!1,frameHeader:!1,border:!1,listeners:{itemcontextmenu:function(view,rec,item,index,e,opts){e.stopEvent()},expand:function(tree,opts){tree.getSelectionModel().hasSelection()?tree.fireEvent("selectionchange",tree,tree.getSelectionModel().getSelection(),opts):tree.getSelectionModel().select(0,!0)},boxready:function(com,width,height,opts){(new Ext.util.DelayedTask).delay(200,function(){if(!TreeManager.MainItemListTree.getSelectionModel().hasSelection()){var cookie=Ext.util.Cookies.get("GlobalConfig.globalStatus");if(cookie){var obj=Ext.JSON.decode(cookie);if(obj.tree_sel_id){var node=TreeManager.MainItemListTree.getStore().getNodeById(obj.tree_sel_id);node?TreeManager.MainItemListTree.getSelectionModel().select(node,!0):TreeManager.MainItemListTree.getSelectionModel().select(0,!0)}else TreeManager.MainItemListTree.getSelectionModel().select(0,!0)}else TreeManager.MainItemListTree.getSelectionModel().select(0,!0)}})}},initComponent:function(){var me=this;me.callParent(arguments)}}),TreeManager.CreateMainItemListTree=function(param){return TreeManager.MainItemListTree=Ext.create("chl.tree.MainItemListTree"),param&&param.needLoad&&TreeManager.MainItemListTree.getStore().load({callback:function(){var rootNode=TreeManager.MainItemListTree.getRootNode();rootNode.expand()}}),TreeManager.MainItemListTree},TreeManager.SetMainItemListTreeSelectionChangeEvent=function(param){TreeManager.MainItemListTree.on("selectionchange",function(view,seles,op){if(seles[0]){if(GlobalConfig.globalStatus.tree_sel_id=seles[0].data.id,Ext.util.Cookies.set("GlobalConfig.globalStatus",Ext.JSON.encode(GlobalConfig.globalStatus),new Date((new Date).getTime()+31536e6)),"root"==seles[0].data.id)return void GlobalFun.TreeSelChangeGrid("ManageDfGrid",GridManager.ManageDfGrid,"系统",!0);if("001"==seles[0].data.id)return void GlobalFun.TreeSelChangeGrid("CustomerGrid",GridManager.CustomerGrid,"客户列表");if("002"==seles[0].data.id)return void GlobalFun.TreeSelChangeGrid("Tracking_numberGrid",GridManager.Tracking_numberGrid,"票据列表");if("003"==seles[0].data.id)return void GlobalFun.TreeSelChangeGrid("003_CompanyPanel",GridManager.CompanyPanel,"快递公司",!0);if("004"==seles[0].data.id)return void GlobalFun.TreeSelChangeGrid("004_CompanyPanel",GridManager.CompanyPanel,"快递公司",!0);if(-1!=seles[0].data.id.indexOf("_")){var childSelArr=seles[0].data.id.split("_");if("003"==childSelArr[0]){GlobalFun.TreeSelChangeGrid("ExpressPanel",GridManager.ExpressPanel,"各省规则",!0);var param={express_id:seles[0].data.express_id,sessiontoken:GlobalFun.getSeesionToken()};return void WsCall.call(GlobalConfig.Controllers.ExpressPanel.GetCustomer_numberCount,"GetCustomer_numberCount",param,function(response,opts){var data=response.data;Ext.Array.each(data,function(item,index,alls){var temp=GridManager.ExpressPanel.down("#lbl"+item.province_code);temp.setText("现有规则:"+item.count)}),GlobalConfig.ExpressPanel_svgData=[],GlobalConfig.ExpressPanel_svgData=data,1==GridManager.ExpressPanel.getActiveTab().tabIndex&&(Ext.isGecko&&GridManager.ExpressPanel.el.mask("正在加载图形"),GlobalFun.InitChinaSvgDataEvent(GlobalConfig.ExpressPanel_svgData,function(code){GlobalFun.ExpressPanel_addRuleFun({myval:code})}),Ext.isGecko&&GridManager.ExpressPanel.el.unmask())},function(response,opts){GlobalFun.errorProcess(response.code)||Ext.Msg.alert("失败",response.msg)},!0,!1,GridManager.ExpressPanel.el)}"004"==childSelArr[0]&&"1"==childSelArr[1]&&GlobalFun.TreeSelChangeGrid("Express_pointGrid",GridManager.Express_pointGrid,"圆通网点设置")}}})};
//# sourceMappingURL=MainItemListTree.js.map
Ext.create("Ext.data.ArrayStore",{storeId:"ManageDfGridStoreId",fields:[{name:"gridId",type:"string"},{name:"gridName",type:"string"}],autoLoad:!1,pageSize:10,data:[["001","客户管理"],["002","yy管理"]]}),Ext.define("chl.dfgrid.ManageDfGrid",{alternateClassName:["ManageDfGrid"],alias:"widget.ManageDfGrid",extend:"Ext.grid.Panel",store:"ManageDfGridStoreId",actionBaseName:"ManageDfGrid",itemId:"ManageDfGrid",FirstLoad:!0,hideHeaders:!0,viewConfig:{loadMask:!1},columns:[{groupable:!1,sortable:!1,dataIndex:"gridName",renderer:GlobalFun.UpdateRecord,flex:1}],listeners:{itemclick:function(view,record){var node=TreeManager.MainItemListTree.getStore().getNodeById(record.data.gridId);TreeManager.MainItemListTree.getSelectionModel().select(node,!0)},itemmouseenter:function(view,record,item,index,e,eOpts){item.style.cursor="pointer"},itemmouseleave:function(view,record,item,index,e,eOpts){item.style.cursor="auto"}}});
//# sourceMappingURL=ManageDfGrid.js.map
StoreManager.ComboStore.ProvinceStore=Ext.create("Ext.data.Store",{storeId:"ProvinceStoreId",fields:["Id","Name"],data:GlobalFun.JsonToArray(GlobalConfig.Province)}),StoreManager.ComboStore.Tracking_numberGridTypeStore=Ext.create("Ext.data.Store",{storeId:"Tracking_numberGridTypeStoreId",fields:["Id","Name"],data:[{Id:0,Name:"未结算"},{Id:1,Name:"已结算"}]}),StoreManager.ComboStore.Customer_numberGridStatusStore=Ext.create("Ext.data.Store",{storeId:"Tracking_numberGridTypeStoreId",fields:["Id","Name"],data:[{Id:0,Name:"未使用"},{Id:1,Name:"已使用"}]});
//# sourceMappingURL=ComboStore.js.map
Ext.define("chl.Model.Customer_numberGridModel",{extend:"Ext.data.Model",idProperty:"number_id",alternateClassName:["Customer_numberGridModel"],fields:[{name:"number_id"},{name:"customer_id"},{name:"customer_name"},{name:"tracking_number"},{name:"use_status"},{name:"use_status_name"},{name:"use_time"}]}),Ext.create("Ext.data.Store",{model:"chl.Model.Customer_numberGridModel",storeId:"Customer_numberStoreId",filterMap:Ext.create("Ext.util.HashMap"),pageSize:GlobalConfig.GridPageSize+150,autoSync:!1,autoLoad:!1,remoteSort:!0,sorters:[{property:"number_id",direction:"DESC"}],proxy:{type:"ajax",api:GlobalConfig.Controllers.Customer_numberGrid,filterParam:"filter",sortParam:"sort",directionParam:"dir",limitParam:"limit",startParam:"start",simpleSortMode:!0,extraParams:{req:"data",dataname:"Customer_number",restype:"json",sessiontoken:GlobalFun.getSeesionToken(),folderid:-1,refresh:null,template:""},reader:{type:"json",root:"data",seccessProperty:"success",messageProperty:"msg",totalProperty:"total"},writer:{type:"json"},actionMethods:{create:"POST",read:"POST",update:"POST",destroy:"POST"},listeners:{exception:function(proxy,response,operation){var json=Ext.JSON.decode(response.responseText),code=json.code;GlobalFun.errorProcess(code),"read"!=operation.action}}},listeners:{load:function(store,records,suc,operation,opts){store.getTotalCount();suc||store.loadData([])}}}),Ext.define("chl.gird.Customer_numberGrid",{extend:"chl.grid.BaseGrid",alternateClassName:["Customer_numberGrid"],alias:"widget.Customer_numberGrid",store:"Customer_numberStoreId",columnLines:!0,multiSelect:!0,actionBaseName:"Customer_numberGridAction",dockedItems:[{xtype:"Pagingtoolbar",itemId:"pagingtoolbarID",store:"Customer_numberStoreId",dock:"bottom",items:[{xtype:"tbtext",text:"过滤:"},{xtype:"GridFilterMenuButton",itemId:"menuID",text:"全部状态",filterParam:{group:"customer_nubmer_statusGroup",text:"全部类别",filterKey:"use_status",GridTypeName:"Customer_numberGrid",store:StoreManager.ComboStore.Customer_numberGridStatusStore}},{xtype:"GridFilterMenuButton",text:"全部时间",filterParam:{menuType:"date",group:"customer_nubmer_use_timeGroup",text:"全部时间",filterKey:"use_time",GridTypeName:"Customer_numberGrid"}},"-",{xtype:"GridSelectCancelMenuButton",itemId:"selectRecId",text:"选择",targetName:"Customer_numberGrid"}]}],listeners:{itemclick:function(grid,record,hitem,index,e,opts){},itemdblclick:function(grid,record,hitem,index,e,opts){},itemcontextmenu:function(view,rec,item,index,e,opts){e.stopEvent(),CustomerRentGrid_RightMenu.showAt(e.getXY())},beforeitemmousedown:function(view,record,item,index,e,options){},selectionchange:function(view,seles,op){if(seles[0]){var me=this;me.down("#removeCustomer_number").setDisabled(!seles.length)}}},tbar:[{text:"刷新",tooltip:"刷新",iconCls:"refresh",handler:function(){var me=this,grid=me.up("Customer_numberGrid");Ext.StoreMgr.lookup("Customer_numberStoreId").load(),grid.down("#removeCustomer_number").setDisabled(!0)}},{text:"添加",tooltip:"添加客户面单号范围",iconCls:"add",handler:function(){var me=this,target=me.up("Customer_numberGrid");ActionManager.addCustomer_number(target)}},{itemId:"removeCustomer_number",text:"删除",tooltip:"删除",iconCls:"remove",handler:function(){var me=this,grid=me.up("Customer_numberGrid");ActionManager.delCustomer_number(grid)},disabled:!0}],columns:[{header:"编号",dataIndex:"number_id",flex:1,renderer:function(value){return value}},{header:"面单号截止编号",dataIndex:"tracking_number",flex:1},{header:"状态",dataIndex:"use_status",flex:1,renderer:function(value){return 0==value?"未用":"已用"}},{header:"使用时间",dataIndex:"use_time",flex:1}],initComponent:function(){var me=this;me.callParent(arguments),ActionBase.setTargetView(me.actionBaseName,me),ActionBase.updateActions(me.actionBaseName,me.getSelectionModel().getSelection())},loadGrid:function(isSearch){var me=this,store=me.getStore(),sessiontoken=store.getProxy().extraParams.sessiontoken;!sessiontoken||0==sessiontoken.length;var filter={};store.filterMap.each(function(key,value,length){filter[key]=value}),store.getProxy().extraParams.filter=Ext.JSON.encode(filter),store.getProxy().extraParams.refresh=1,store.loadPage(1),store.getProxy().extraParams.refresh=null,ActionBase.updateActions(me.actionBaseName,me.getSelectionModel().getSelection())}}),Ext.define("chl.Grid.AddUpdateCustomer_numberWin",{extend:"Ext.window.Window",title:"添加",iconCls:"",record:!1,height:600,width:830,bodyPadding:10,layout:"fit",modal:!0,resizable:!1,items:[],buttons:[{text:"关闭",handler:function(){var me=this;me.up("window").close()}}],listeners:{boxready:function(win){win.add({xtype:"Customer_numberGrid",itemId:"Customer_numberGrid"});var grid=win.down("Customer_numberGrid"),store=grid.getStore();store.getProxy().extraParams.customer_id=win.record.data.customer_id,win.down("Customer_numberGrid").loadGrid()}}}),Ext.define("chl.Grid.Customer_numberActionWin",{extend:"Ext.window.Window",title:"添加",defaultFocus:"tracking_number_start",iconCls:"",record:!1,height:140,width:530,layout:"fit",modal:!0,resizable:!1,items:[{xtype:"form",itemId:"formId",border:!1,bodyPadding:5,defaultType:"textfield",layout:{type:"table",columns:1},defaults:{labelAlign:"right",labelPad:15,width:340,labelWidth:125,maxLength:36,enableKeyEvents:!0,listeners:{keydown:function(field,e,opts){var me=this;if(e.getKey()==e.ENTER){var win=me.up("window");win.down("#submit").fireHandler(e)}}}},items:[{name:"tracking_number_start",itemId:"tracking_number_start",fieldLabel:"面单号起始编号",allowBlank:!1,blankText:"不能为空",maxLength:18},{name:"tracking_number_end",itemId:"tracking_number_end",fieldLabel:"面单号截止编号",allowBlank:!1,blankText:"不能为空",maxLength:18}]}],buttons:[{text:"重置",handler:function(){var me=this,w=me.up("window"),f=w.down("#formId");if(f.getForm().reset(),"update"==w.action){var sm=w.grid.getSelectionModel();sm.hasSelection()&&f.getForm().loadRecord(sm.getSelection()[0])}}},{text:"确定",itemId:"submit",handler:function(){var me=this,w=me.up("window"),form=w.down("#formId").getForm();if(form.isValid()){var regex=/^([A-Za-z]*)(\d+)$/,tracking_number_start=w.down("#tracking_number_start").getValue(),tracking_number_end=w.down("#tracking_number_end").getValue();if(tracking_number_start.length!=tracking_number_end.length)return void Ext.Msg.alert("提示","请输入位数一致的面单范围.");var number_start_fix=tracking_number_start.replace(regex,function($0,$1,$2,$3){return $1}),number_end_fix=tracking_number_end.replace(regex,function($0,$1,$2,$3){return $1});if(number_start_fix.toUpperCase()!=number_end_fix.toUpperCase())return void Ext.Msg.alert("提示","请输入相同的面单前缀.");var number_start_number=tracking_number_start.replace(regex,function($0,$1,$2,$3){return $2}),number_end_number=tracking_number_end.replace(regex,function($0,$1,$2,$3){return $2}),tempCount=Math.abs(number_start_number-number_end_number)+1;GlobalConfig.newMessageBox.show({title:"提示",msg:"该面单范围即将产生"+tempCount+"条面单数据，是否继续?",buttons:Ext.MessageBox.YESNO,closable:!1,fn:function(btn){if("yes"==btn){var url="create"==w.action?GlobalConfig.Controllers.Customer_numberGrid.create:GlobalConfig.Controllers.Customer_numberGrid.update;form.submit({url:url,params:{req:"dataset",dataname:"Customer_numberGridAction",restype:"json",customer_id:WindowManager.AddUpdateCustomer_numberWin.record.data.customer_id,action:w.action,sessiontoken:GlobalFun.getSeesionToken()},success:function(form,action){w.grid.loadGrid(),w.close()},failure:function(form,action){GlobalFun.errorProcess(action.result.code)||Ext.Msg.alert("失败",action.result.msg)}})}},icon:Ext.MessageBox.QUESTION})}}},{text:"取消",handler:function(){var me=this;me.up("window").close()}}]}),ActionManager.addCustomer_number=function(target){WindowManager.Customer_numberActionWin=Ext.create("chl.Grid.Customer_numberActionWin",{grid:target,iconCls:"add",action:"create",record:null,title:"新增"}),WindowManager.Customer_numberActionWin.show(null,function(){})},ActionManager.delCustomer_number=function(traget){var sm=traget.getSelectionModel(),records=sm.getSelection();if(records[0]){var ids=[];Ext.Array.each(records,function(rec){ids.push(rec.data.number_id)});var store=traget.getStore();GlobalConfig.newMessageBox.show({title:"提示",msg:"您确定要删除选定的项目吗？",buttons:Ext.MessageBox.YESNO,closable:!1,fn:function(btn){if("yes"==btn){var param={sessiontoken:GlobalFun.getSeesionToken(),number_ids:ids.join()};WsCall.pcall(GlobalConfig.Controllers.Customer_numberGrid.destroy,"Customer_numberGrid",param,function(response,opts){new Ext.util.DelayedTask(function(){store.load()}).delay(500)},function(response,opts){GlobalFun.errorProcess(response.code)||Ext.Msg.alert("登录失败",response.msg)},!0)}},icon:Ext.MessageBox.QUESTION})}};
//# sourceMappingURL=Customer_numberGrid.js.map
Ext.define("chl.Model.CustomerRentGridModel",{extend:"Ext.data.Model",idProperty:"Id",alternateClassName:["CustomerRentGridModel"],fields:[{name:"customer_rent_id",type:"string"},{name:"customer_id",type:"string"},{name:"title",type:"string"},{name:"rent_area",type:"string"},{name:"area_to_order_number",type:"string"},{name:"rent_pre_price",type:"string"},{name:"date_start",type:"string"},{name:"date_end",type:"string"},{name:"status",type:"string"}]});
//# sourceMappingURL=CustomerRentGridModel.js.map
Ext.create("Ext.data.Store",{model:"chl.Model.CustomerRentGridModel",storeId:"CustomerRentGridStoreId",filterMap:Ext.create("Ext.util.HashMap"),pageSize:GlobalConfig.GridPageSize,autoLoad:!1,remoteSort:!0,sorters:[{property:"customer_rent_id",direction:"DESC"}],autoSync:!1,proxy:{type:"ajax",api:GlobalConfig.Controllers.CustomerRentGrid,filterParam:"filter",sortParam:"sort",directionParam:"dir",limitParam:"limit",startParam:"start",simpleSortMode:!0,extraParams:{req:"data",dataname:"User",restype:"json",sessiontoken:GlobalFun.getSeesionToken(),folderid:-1,refresh:null,template:""},reader:{type:"json",root:"data",seccessProperty:"success",messageProperty:"msg",totalProperty:"total"},writer:{type:"json",writeAllFields:!1,allowSingle:!1},actionMethods:{create:"POST",read:"POST",update:"POST",destroy:"POST"},listeners:{exception:function(proxy,response,operation){var json=Ext.JSON.decode(response.responseText),code=json.code;GlobalFun.errorProcess(code),"read"!=operation.action}}},listeners:{load:function(store,records,suc,operation,opts){store.getTotalCount();suc||store.loadData([])}}});
//# sourceMappingURL=CustomerRentGridStore.js.map
Ext.define("chl.Action.CustomerRentGridAction",{extend:"WS.action.Base",category:"CustomerRentGridAction"}),Ext.create("chl.Action.CustomerRentGridAction",{itemId:"editCustomerRule",iconCls:"editCustomerRule",tooltip:"添加规则",text:"添加规则",handler:function(){var me=this,target=me.getTargetView(),record=target.getSelectionModel().getSelection()[0];ActionManager.editCustomerRule(target,record)},updateStatus:function(selection){this.setDisabled(1!=selection.length)}}),Ext.create("chl.Action.CustomerRentGridAction",{itemId:"refreshCustomerRent",iconCls:"refresh",tooltip:"刷新",text:"刷新",handler:function(){var target=this.getTargetView();ActionManager.refreshCustomerRent(target)},updateStatus:function(selection){}}),ActionManager.refreshCustomerRent=function(target){target.loadGrid()};var CustomerRentGrid_RightMenu=Ext.create("Ext.menu.Menu",{items:[ActionBase.getAction("refreshCustomerRent"),"-",ActionBase.getAction("editCustomerRule")]});Ext.define("chl.gird.CustomerRentGrid",{alternateClassName:["CustomerRentGrid"],alias:"widget.CustomerRentGrid",extend:"chl.grid.BaseGrid",store:"CustomerRentGridStoreId",actionBaseName:"CustomerRentGridAction",listeners:{itemclick:function(grid,record,hitem,index,e,opts){},itemdblclick:function(grid,record,hitem,index,e,opts){ActionBase.getAction("editCustomerRule").execute()},itemcontextmenu:function(view,rec,item,index,e,opts){e.stopEvent(),CustomerRentGrid_RightMenu.showAt(e.getXY())},beforeitemmousedown:function(view,record,item,index,e,options){},selectionchange:function(view,seles,op){seles[0]&&ActionBase.updateActions("CustomerRentGridAction",seles)}},columns:[{text:"编号",dataIndex:"customer_rent_id",renderer:GlobalFun.UpdateRecord,width:100},{text:"租贷面积(平米)",dataIndex:"rent_area",renderer:GlobalFun.UpdateRecord,width:100},{text:"面积单量比",dataIndex:"area_to_order_number",renderer:GlobalFun.UpdateRecord,width:100},{text:"房租单价",dataIndex:"rent_pre_price",renderer:GlobalFun.UpdateRecord,width:100},{text:"开始日期",dataIndex:"date_start",renderer:GlobalFun.UpdateRecord,width:100},{text:"结束日期",dataIndex:"date_end",renderer:GlobalFun.UpdateRecord,width:100},{text:"状态",dataIndex:"status",renderer:GlobalFun.UpdateRecord,width:100}],dockedItems:[{xtype:"toolbar",itemId:"toolbarID",dock:"top",layout:{overflowHandler:"Menu"},items:[ActionBase.getAction("refreshCustomerRent"),"-",ActionBase.getAction("editCustomerRule")]},{xtype:"Pagingtoolbar",itemId:"pagingtoolbarID",store:"CustomerRentGridStoreId",dock:"bottom",items:[]}],initComponent:function(){var me=this;me.callParent(arguments),ActionBase.setTargetView(me.actionBaseName,me),ActionBase.updateActions(me.actionBaseName,me.getSelectionModel().getSelection())},loadGrid:function(isSearch){var me=this,store=me.getStore(),sessiontoken=store.getProxy().extraParams.sessiontoken;!sessiontoken||0==sessiontoken.length;var filter={};store.filterMap.each(function(key,value,length){filter[key]=value}),store.getProxy().extraParams.filter=Ext.JSON.encode(filter),store.getProxy().extraParams.refresh=1,store.loadPage(1),store.getProxy().extraParams.refresh=null,ActionBase.updateActions(me.actionBaseName,me.getSelectionModel().getSelection())}}),GridManager.CreateCustomerRentGrid=function(param){var tmpArr=[{text:"编号",dataIndex:"customer_rent_id",renderer:GlobalFun.UpdateRecord,width:100},{text:"合同名",dataIndex:"title",renderer:GlobalFun.UpdateRecord,width:100},{text:"租贷面积(平米)",dataIndex:"rent_area",renderer:GlobalFun.UpdateRecord,width:100},{text:"面积单量比",dataIndex:"area_to_order_number",renderer:GlobalFun.UpdateRecord,width:100},{text:"房租单价",dataIndex:"rent_pre_price",renderer:GlobalFun.UpdateRecord,width:100},{text:"开始日期",dataIndex:"date_start",renderer:GlobalFun.UpdateRecord,width:100},{text:"结束日期",dataIndex:"date_end",renderer:GlobalFun.UpdateRecord,width:100}];return GridManager.CustomerRentGrid=Ext.create("chl.gird.CustomerRentGrid",GridManager.BaseGridCfg("CustomerRentGrid","CustomerRentGridState",tmpArr)),param&&param.needLoad&&GridManager.CustomerRentGrid.loadGrid(),GridManager.CustomerRentGrid},GridManager.SetCustomerRentGridSelectionChangeEvent=function(param){GridManager.CustomerRentGrid.on("selectionchange",function(view,seles,op){!seles[0]})},ActionManager.editCustomerRule=function(target,record){var param={customer_rent_id:record.data.customer_rent_id,sessiontoken:GlobalFun.getSeesionToken()};WsCall.call(GlobalConfig.Controllers.CustomerGrid.GetCustomerRuleByRentId,"GetCustomerRuleByRentId",param,function(response,opts){var data=response.data;WindowManager.AddUpdateCustomerRuleWin=Ext.create("chl.Grid.AddUpdateCustomerRuleWin",{grid:target,iconCls:"editCustomerRule",record:record,action:"update",loaded:!1,title:"添加规则"}),WindowManager.AddUpdateCustomerRuleWin.show(null,function(){Ext.isGecko&&WindowManager.AddUpdateCustomerRuleWin.el.mask("正在加载图形"),WindowManager.AddUpdateCustomerRuleWin.loaded||GlobalFun.CreatChinaSvg(WindowManager.AddUpdateCustomerRuleWin.down("#fs_rule")),WindowManager.AddUpdateCustomerRuleWin.loaded=!0,GlobalFun.InitChinaSvgDataEvent(data,function(code){GlobalFun.CustomerRent_CreateRuleFun({myval:code})}),Ext.isGecko&&WindowManager.AddUpdateCustomerRuleWin.el.unmask(),WindowManager.AddUpdateCustomerRuleWin.down("#formId").loadRecord(record)})},function(response,opts){GlobalFun.errorProcess(response.code)||Ext.Msg.alert("失败",response.msg)},!0)},Ext.define("chl.Grid.AddUpdateCustomerRuleWin",{extend:"Ext.window.Window",title:"添加",defaultFocus:"customer_rent_idItemId",iconCls:"",record:!1,closeAction:"hide",height:600,width:830,layout:"vbox",modal:!0,resizable:!1,items:[{xtype:"form",itemId:"formId",autoScroll:!0,height:580,width:810,border:!1,bodyPadding:5,defaultType:"displayfield",layout:{type:"table",columns:2},defaults:{labelAlign:"right",labelPad:15,width:340,labelWidth:125,maxLength:100,maxLengthText:"最大长度为100"},items:[{name:"customer_rent_id",fieldLabel:"合同编号",itemId:"customer_rent_idItemId",validateOnBlur:!1,allowBlank:!1,blankText:"不能为空"},{name:"rent_area",fieldLabel:"租贷面积（平米）",itemId:"rent_areaItemId",validateOnBlur:!1,allowBlank:!1,blankText:"不能为空",regex:GlobalConfig.RegexController.regexNumber,regexText:"请输入数字"},{name:"area_to_order_number",fieldLabel:"面积单量比",itemId:"area_to_order_numberItemId",validateOnBlur:!1,allowBlank:!1,blankText:"不能为空",regex:GlobalConfig.RegexController.regexMoney2Fixed,regexText:"请输入数字"},{name:"rent_pre_price",fieldLabel:"房租单价",validateOnBlur:!1,allowBlank:!1,blankText:"不能为空",regex:GlobalConfig.RegexController.regexMoney2Fixed,regexText:"请输入数字"},{minValue:new Date,name:"date_start",format:"Y-m-d",fieldLabel:"开始时间",allowBlank:!1,blankText:"不能为空",itemId:"date_start",vtype:"daterange",endDateField:"date_end"},{minValue:new Date,name:"date_end",format:"Y-m-d",fieldLabel:"结束时间",allowBlank:!1,blankText:"不能为空",itemId:"date_end",vtype:"daterange",startDateField:"date_start"},{xtype:"container",colspan:2,title:"规则",itemId:"fs_rule",collapsible:!0,padding:"2 2 2 5",width:780,items:[],listeners:{boxready:function(com){}}}]}],buttons:[{text:"关闭",handler:function(){var me=this;me.up("window").close()}}]}),GlobalFun.CustomerRent_CreateRuleFun=function(com){var param={customer_rent_id:WindowManager.AddUpdateCustomerRuleWin.record.data.customer_rent_id,province_code:com.myval,sessiontoken:GlobalFun.getSeesionToken()};WsCall.call(GlobalConfig.Controllers.CustomerGrid.getCustomerRule,"GetCustomerRule",param,function(response,opts){function createRuleRow(rowData){var tempRuleItems=[];return Ext.Array.each(rowData,function(item,index,alls){var obj={};obj="0"==item.price_type?{xtype:"fieldset",collapsible:!0,title:'<font style="font-size:14px;">固定价格</font>',width:770,layout:{type:"table",columns:2},defaults:{xtype:"displayfield",labelAlign:"right",labelPad:15,width:340,labelWidth:125,maxLength:100,maxLengthText:"最大长度为100"},items:[{fieldLabel:"起价",value:item.price_start},{fieldLabel:"后续单价",value:item.price_pre},{xtype:"button",rule_id:item.rule_id,colspan:2,width:100,margin:"0 0 0 630",text:"删除",handler:function(com){var rule_id=com.rule_id,param={rule_id:rule_id,sessiontoken:GlobalFun.getSeesionToken()};WsCall.call(GlobalConfig.Controllers.CustomerGrid.delCustomerRule,"delCustomerRule",param,function(response,opts){com.up("fieldset").destroy()},function(response,opts){GlobalFun.errorProcess(response.code)||Ext.Msg.alert("失败",response.msg)},!0,!1,com.up("window").getEl())}}]}:{xtype:"fieldset",legend:{xtype:"component",style:{height:40,"background-color":"red"}},title:'<font style="font-size:14px;">步进价格  [ 首重区间(kg): <font style="color:red;">'+item.weight_min+"-"+item.weight_max+"</font> ]</font>",width:770,collapsible:!0,layout:{type:"table",columns:2},defaults:{xtype:"displayfield",labelAlign:"right",labelPad:15,width:340,labelWidth:125,maxLength:100,maxLengthText:"最大长度为100"},items:[{fieldLabel:"首重价格",value:item.weight_start_price,colspan:2},{fieldLabel:"续重重量(kg)",value:item.weight_pre},{fieldLabel:"续重价格",value:item.weight_pre_price},{fieldLabel:"记重方式",value:item.weight_price_type_name},{fieldLabel:"排序",value:item.sort_order},{xtype:"button",colspan:2,rule_id:item.item_id,width:100,margin:"0 0 0 630",text:"删除",handler:function(com){var rule_id=com.rule_id,param={item_id:rule_id,sessiontoken:GlobalFun.getSeesionToken()};WsCall.call(GlobalConfig.Controllers.CustomerGrid.delCustomerRule,"delCustomerRule",param,function(response,opts){com.up("fieldset").destroy()},function(response,opts){GlobalFun.errorProcess(response.code)||Ext.Msg.alert("失败",response.msg)},!0,!1,com.up("window").getEl())}}]},tempRuleItems.push(obj)}),tempRuleItems}var data=response.data;Ext.create("Ext.window.Window",{title:"添加规则("+GlobalConfig.Province[com.myval]+")",pid:com.myval,width:820,height:700,iconCls:"editCustomerRule",resizable:!1,action:"create",modal:!0,autoScroll:!0,layout:"vbox",bodyPadding:10,dockedItems:[{xtype:"container",dock:"top",border:!1,bodyPadding:15,layout:{type:"table",columns:2},defaultType:"textfield",defaults:{labelAlign:"right",labelPad:15,width:340,labelWidth:125,maxLength:100,maxLengthText:"最大长度为100"},items:[{xtype:"fieldcontainer",colspan:2,fieldLabel:"计价方式",defaultType:"radiofield",layout:"hbox",defaults:{flex:1},items:[{boxLabel:"固定价格",checked:!0,itemId:"rd_price0",name:"price_type",inputValue:"0",listeners:{change:function(com,nval,oval,opts){var me=this,win=me.up("window");nval?(win.down("#price_type0").show(),win.down("#price_type1").hide()):(win.down("#price_type1").show(),win.down("#price_type0").hide())}}},{boxLabel:"步进价格",itemId:"rd_price1",name:"price_type",inputValue:"1"}]},{xtype:"form",itemId:"price_type0",height:100,width:810,bodyPadding:15,layout:{type:"table",columns:2},defaults:{labelAlign:"right",labelPad:15,width:340,labelWidth:125,maxLength:100,maxLengthText:"最大长度为100"},items:[{xtype:"numberfield",fieldLabel:"起价",name:"price_start",minValue:0,decimalPrecision:2,maxValue:GlobalConfig.MaxLimit,allowBlank:!1,blankText:"不能为空"},{xtype:"numberfield",fieldLabel:"后续单价",name:"price_pre",minValue:0,decimalPrecision:2,maxValue:GlobalConfig.MaxLimit,allowBlank:!1,blankText:"不能为空"},{xtype:"button",itemId:"btn_add",colspan:2,margin:"0 0 0 580",width:100,text:"添加",handler:function(com){var me=this,w=me.up("window"),form=w.down("#price_type0").getForm();form.isValid()&&GlobalConfig.newMessageBox.show({title:"提示",msg:"添加固定价格将覆盖已有的所有价格设置，是否继续?",buttons:Ext.MessageBox.YESNO,closable:!1,fn:function(btn){if("yes"==btn){var url=GlobalConfig.Controllers.CustomerGrid.addCustomerRule;form.submit({url:url,params:{req:"dataset",dataname:"addCustomerRule",restype:"json",price_type:0,province_code:w.pid,action:w.action,customer_rent_id:WindowManager.AddUpdateCustomerRuleWin.record.data.customer_rent_id,sessiontoken:GlobalFun.getSeesionToken()},success:function(form,action){var data=action.result.data,arr=createRuleRow(data);w.removeAll(),w.add(arr)},failure:function(form,action){GlobalFun.errorProcess(action.result.code)||Ext.Msg.alert("失败",action.result.msg)}})}},icon:Ext.MessageBox.QUESTION})}}]},{xtype:"form",colspan:2,bodyPadding:15,itemId:"price_type1",height:280,width:810,layout:{type:"table",columns:2},hidden:!0,items:[{xtype:"fieldset",title:"首重",width:780,colspan:2,layout:{type:"table",columns:2},defaults:{labelAlign:"right",labelPad:15,width:340,labelWidth:125},items:[{xtype:"numberfield",name:"weight_min",fieldLabel:"起始重量(kg)",minValue:0,value:0,decimalPrecision:2,maxValue:GlobalConfig.MaxLimit,allowBlank:!1,blankText:"不能为空"},{xtype:"numberfield",name:"weight_max",fieldLabel:"结束重量(kg)",minValue:0,value:1,maxValue:GlobalConfig.MaxLimit,decimalPrecision:2,allowBlank:!1,blankText:"不能为空"},{xtype:"numberfield",span:2,name:"weight_start_price",fieldLabel:"价格",decimalPrecision:2,minValue:0,maxValue:GlobalConfig.MaxLimit,regex:GlobalConfig.RegexController.regexMoney2Fixed,regexText:"请填写两位小数的数字",allowBlank:!1,blankText:"不能为空"}]},{xtype:"fieldset",title:"续重",width:780,layout:{type:"table",columns:2},defaults:{labelAlign:"right",labelPad:15,width:340,labelWidth:125},colspan:2,items:[{xtype:"numberfield",name:"weight_pre",fieldLabel:"重量(kg)",minValue:0,maxValue:GlobalConfig.MaxLimit,decimalPrecision:2,allowBlank:!1,blankText:"不能为空"},{xtype:"numberfield",name:"weight_pre_price",fieldLabel:"价格",decimalPrecision:2,minValue:0,maxValue:GlobalConfig.MaxLimit,allowBlank:!1,blankText:"不能为空"},{xtype:"fieldcontainer",colspan:2,fieldLabel:"记重方式",defaultType:"radiofield",layout:"hbox",defaults:{flex:1},items:[{boxLabel:"进位",checked:!0,name:"weight_price_type",inputValue:"0"},{boxLabel:"实重",name:"weight_price_type",inputValue:"1"}]}]},{fieldLabel:"排序",xtype:"numberfield",name:"sort_order",decimalPrecision:0,minValue:1,value:1},{xtype:"button",width:100,text:"添加",handler:function(com){var me=this,w=me.up("window"),form=w.down("#price_type1").getForm();if(form.isValid()){var url=GlobalConfig.Controllers.CustomerGrid.addCustomerRule;form.submit({url:url,params:{req:"dataset",dataname:"addCustomerRule",restype:"json",price_type:1,province_code:w.pid,action:w.action,customer_rent_id:WindowManager.AddUpdateCustomerRuleWin.record.data.customer_rent_id,sessiontoken:GlobalFun.getSeesionToken()},success:function(form,action){var data=action.result.data,arr=createRuleRow(data);w.removeAll(),w.add(arr)},failure:function(form,action){GlobalFun.errorProcess(action.result.code)||Ext.Msg.alert("失败",action.result.msg)}})}}}]}]}],items:[],listeners:{boxready:function(com){var tempRuleItems=createRuleRow(data);com.add(tempRuleItems)},beforehide:function(com){var param={customer_rent_id:WindowManager.AddUpdateCustomerRuleWin.record.data.customer_rent_id,sessiontoken:GlobalFun.getSeesionToken()};WsCall.call(GlobalConfig.Controllers.CustomerGrid.GetCustomerRuleByRentId,"GetCustomerRuleByRentId",param,function(response,opts){var data=response.data;Ext.isGecko&&WindowManager.AddUpdateCustomerRuleWin.el.mask("正在加载图形"),GlobalFun.InitChinaSvgDataEvent(data,function(code){GlobalFun.CustomerRent_CreateRuleFun({myval:code})}),Ext.isGecko&&WindowManager.AddUpdateCustomerRuleWin.el.unmask()},function(response,opts){GlobalFun.errorProcess(response.code)||Ext.Msg.alert("失败",response.msg)},!1)}},buttons:[{text:"退出",handler:function(){var me=this;me.up("window").close()}}]}).show()},function(response,opts){GlobalFun.errorProcess(response.code)||Ext.Msg.alert("失败",response.msg)},!1)};
//# sourceMappingURL=CustomerRentGrid.js.map
Ext.define("chl.Action.CustomerGridAction",{extend:"WS.action.Base",category:"CustomerGridAction"}),Ext.create("chl.Action.CustomerGridAction",{itemId:"addCustomer",iconCls:"add",tooltip:"添加客户",text:"添加客户",handler:function(){var me=this,target=me.getTargetView();ActionManager.addCustomer(target)},updateStatus:function(selection){}}),Ext.create("chl.Action.CustomerGridAction",{itemId:"editCustomer",iconCls:"edit",tooltip:"编辑客户",text:"编辑客户",handler:function(){var me=this,target=me.getTargetView(),record=target.getSelectionModel().getSelection()[0];ActionManager.editCustomer(target,record)},updateStatus:function(selection){this.setDisabled(1!=selection.length)}}),Ext.create("chl.Action.CustomerGridAction",{itemId:"searchCustomer",iconCls:"search",tooltip:"查询",text:"查询",handler:function(){var target=this.getTargetView();ActionManager.searchCustomer(target)},updateStatus:function(selection){}}),Ext.create("chl.Action.CustomerGridAction",{itemId:"editCustomer_number",iconCls:"eidtCustomer_number",tooltip:"管理客户面单号范围",text:"管理面单号范围",handler:function(){var me=this,target=me.getTargetView(),record=target.getSelectionModel().getSelection()[0];ActionManager.editCustomer_number(target,record)},updateStatus:function(selection){this.setDisabled(1!=selection.length)}}),Ext.create("chl.Action.CustomerGridAction",{itemId:"addCustomerRent",iconCls:"addCustomerRent",tooltip:"添加合同/规则",text:"添加合同/规则",handler:function(){var me=this,target=me.getTargetView(),record=target.getSelectionModel().getSelection()[0];ActionManager.addCustomerRent(target,record)},updateStatus:function(selection){this.setDisabled(1!=selection.length)}}),Ext.create("chl.Action.CustomerGridAction",{itemId:"refreshCustomer",iconCls:"refresh",tooltip:"刷新",text:"刷新",handler:function(){var target=this.getTargetView();ActionManager.refreshCustomer(target)},updateStatus:function(selection){}}),ActionManager.refreshCustomer=function(target){target.loadGrid()},ActionManager.addCustomer=function(target){WindowManager.AddUpdateCustomerWin=Ext.create("chl.Grid.AddUpdateCustomerWin",{grid:target,iconCls:"add",action:"create",record:null,title:"新增"}),WindowManager.AddUpdateCustomerWin.show(null,function(){})},ActionManager.editCustomer=function(target,record){WindowManager.AddUpdateCustomerWin=Ext.create("chl.Grid.AddUpdateCustomerWin",{grid:target,iconCls:"edit",action:"update",record:record,title:"编辑"}),WindowManager.AddUpdateCustomerWin.show(null,function(){WindowManager.AddUpdateCustomerWin.down("#formId").loadRecord(record)})},ActionManager.editCustomer_number=function(target,record){WindowManager.AddUpdateCustomer_numberWin=Ext.create("chl.Grid.AddUpdateCustomer_numberWin",{grid:target,iconCls:"eidtCustomer_number",action:"create",record:record,title:"面单号范围(当前客户:"+record.data.customer_name+")"}),WindowManager.AddUpdateCustomer_numberWin.show(null,function(){})},ActionManager.addCustomerRent=function(target,record){WindowManager.AddUpdateCustomerRentWin=Ext.create("chl.Grid.AddUpdateCustomerRentWin",{grid:target,iconCls:"addCustomerRent",action:"create",record:record,title:"添加合同/规则"}),WindowManager.AddUpdateCustomerRentWin.show(null,function(){var grid=WindowManager.AddUpdateCustomerRentWin.down("CustomerRentGrid");grid.store.getProxy().extraParams.customer_id=record.data.customer_id,grid.loadGrid(),WindowManager.AddUpdateCustomerRentWin.down("#formId").loadRecord(record)})},ActionManager.searchCustomer=function(traget){WindowManager.searchCustomerWin&&""!=WindowManager.searchCustomerWin?WindowManager.searchCustomerWin.show():WindowManager.searchCustomerWin=Ext.create("Ext.window.Window",{modal:!0,resizable:!1,closeAction:"hide",title:"查询",defaultFocus:"customer_nameItemId",iconCls:"search",record:!1,formVals:"",height:200,width:500,layout:"vbox",listeners:{show:function(win){var form=win.down("#formId").getForm();""!=win.formVals&&form.setValues(win.formVals);var searchfield=traget.down("#CustomerGridSearchfieldId");if(searchfield&&searchfield.paramName){var item=win.down("textfield[name="+searchfield.paramName+"]");if(item){var store=traget.getStore(),filter=Ext.JSON.decode(store.getProxy().extraParams.filter);item.setValue(filter[searchfield.paramName])}}}},items:[{xtype:"form",itemId:"formId",autoScroll:!0,height:190,width:500,border:!1,bodyPadding:15,defaultType:"textfield",layout:{type:"table",columns:1},defaults:{labelAlign:"right",labelPad:15,width:340,labelWidth:125,maxLength:36,enableKeyEvents:!0,listeners:{keydown:function(field,e,opts){var me=this;if(e.getKey()==e.ENTER){var win=me.up("window");win.down("#submit").fireHandler(e)}}}},items:[{name:"customer_name",fieldLabel:"客户名",itemId:"customer_nameItemId"},{name:"mobile",fieldLabel:"手机号",itemId:"mobileItemId"}]}],buttons:[{text:"重置",handler:function(){var me=this,w=me.up("window"),f=w.down("#formId");f.getForm().reset()}},{text:"确定",itemId:"submit",handler:function(){var me=this,win=me.up("window"),searchFlag=!1,store=traget.getStore(),form=(store.getProxy().extraParams,win.down("#formId").getForm());if(form.isValid()){win.formVals=form.getValues();var customer_name=win.down("#customer_nameItemId").getValue();""!=customer_name?(GlobalFun.GridSearchInitFun("customer_name",!1,store,customer_name),searchFlag=!0):GlobalFun.GridSearchInitFun("customer_name",!0,store,!1);var Searchfield=traget.down("#CustomerGridSearchfieldId");Searchfield&&(Searchfield.setValue(customer_name),Searchfield.setSearchStatus(""!=customer_name?!0:!1));var mobile=win.down("#mobileItemId").getValue();""!=mobile?(GlobalFun.GridSearchInitFun("mobile",!1,store,mobile),searchFlag=!0):GlobalFun.GridSearchInitFun("mobile",!0,store,!1),searchFlag?(win.close(),traget.loadGrid(!0)):(win.close(),traget.loadGrid())}}},{text:"取消",handler:function(){var me=this;me.up("window").close()}}]}).show()};
//# sourceMappingURL=CustomerGridAction.js.map
Ext.define("chl.Model.CustomerGridModel",{extend:"Ext.data.Model",idProperty:"Id",alternateClassName:["CustomerGridModel"],fields:[{name:"customer_id",type:"string"},{name:"customer_name",type:"string"},{name:"customer_no",type:"string"},{name:"real_name",type:"string"},{name:"mobile",type:"string"},{name:"customize_number_from",type:"string"},{name:"customize_number_to",type:"string"},{name:"customer_rent_id",type:"string"},{name:"rent_area",type:"string"},{name:"area_to_order_number",type:"string"},{name:"rent_pre_price",type:"string"},{name:"date_start",type:"string"},{name:"date_end",type:"string"},{name:"updated_at",type:"string"}]});
//# sourceMappingURL=CustomerGridModel.js.map
Ext.create("Ext.data.Store",{model:"chl.Model.CustomerGridModel",storeId:"CustomerGridStoreId",filterMap:Ext.create("Ext.util.HashMap"),pageSize:GlobalConfig.GridPageSize,autoLoad:!1,remoteSort:!0,sorters:[{property:"customer_id",direction:"DESC"}],autoSync:!1,proxy:{type:"ajax",api:GlobalConfig.Controllers.CustomerGrid,filterParam:"filter",sortParam:"sort",directionParam:"dir",limitParam:"limit",startParam:"start",simpleSortMode:!0,extraParams:{req:"data",dataname:"Customer",restype:"json",sessiontoken:GlobalFun.getSeesionToken(),folderid:-1,refresh:null,template:""},reader:{type:"json",root:"data",seccessProperty:"success",messageProperty:"msg",totalProperty:"total"},writer:{type:"json",writeAllFields:!1,allowSingle:!1},actionMethods:{create:"POST",read:"POST",update:"POST",destroy:"POST"},listeners:{exception:function(proxy,response,operation){var json=Ext.JSON.decode(response.responseText),code=json.code;GlobalFun.errorProcess(code),"read"!=operation.action}}},listeners:{load:function(store,records,suc,operation,opts){store.getTotalCount();suc||store.loadData([])}}});
//# sourceMappingURL=CustomerGridStore.js.map
var CustomerGrid_RightMenu=Ext.create("Ext.menu.Menu",{items:[ActionBase.getAction("refreshCustomer"),"-",ActionBase.getAction("searchCustomer"),ActionBase.getAction("addCustomer"),ActionBase.getAction("editCustomer"),"-",ActionBase.getAction("editCustomer_number"),ActionBase.getAction("addCustomerRent")]});Ext.define("chl.gird.CustomerGrid",{alternateClassName:["CustomerGrid"],alias:"widget.CustomerGrid",extend:"chl.grid.BaseGrid",store:"CustomerGridStoreId",actionBaseName:"CustomerGridAction",listeners:{itemclick:function(grid,record,hitem,index,e,opts){},itemdblclick:function(grid,record,hitem,index,e,opts){ActionBase.getAction("editCustomer").execute()},itemcontextmenu:function(view,rec,item,index,e,opts){e.stopEvent(),CustomerGrid_RightMenu.showAt(e.getXY())},beforeitemmousedown:function(view,record,item,index,e,options){},selectionchange:function(view,seles,op){seles[0]&&ActionBase.updateActions("CustomerGridAction",seles)}},columns:[],dockedItems:[{xtype:"toolbar",itemId:"toolbarID",dock:"top",layout:{overflowHandler:"Menu"},items:[ActionBase.getAction("refreshCustomer"),"-",ActionBase.getAction("searchCustomer"),ActionBase.getAction("addCustomer"),ActionBase.getAction("editCustomer"),"-",ActionBase.getAction("editCustomer_number"),ActionBase.getAction("addCustomerRent"),"->",{fieldLabel:"按客户名查找",text:"按客户名查找",width:300,labelAlign:"right",labelWidth:80,xtype:"searchfield",paramName:"customer_name",itemId:"CustomerGridSearchfieldId",listeners:{render:function(){var me=this;me.store=GridManager.CustomerGrid.getStore()}}}]},{xtype:"Pagingtoolbar",itemId:"pagingtoolbarID",store:"CustomerGridStoreId",dock:"bottom",items:[]}],initComponent:function(){var me=this;me.callParent(arguments),ActionBase.setTargetView(me.actionBaseName,me),ActionBase.updateActions(me.actionBaseName,me.getSelectionModel().getSelection())},loadGrid:function(isSearch){var me=this,store=me.getStore(),sessiontoken=store.getProxy().extraParams.sessiontoken;!sessiontoken||0==sessiontoken.length;var filter={};store.filterMap.each(function(key,value,length){filter[key]=value}),store.getProxy().extraParams.filter=Ext.JSON.encode(filter),store.getProxy().extraParams.refresh=1,store.loadPage(1),store.getProxy().extraParams.refresh=null,GlobalFun.SetGridTitle(me.up("#centerGridDisplayContainer"),store,"客户列表"),ActionBase.updateActions(me.actionBaseName,me.getSelectionModel().getSelection())}}),GridManager.CreateCustomerGrid=function(param){var tmpArr=[{text:"编号",dataIndex:"customer_id",renderer:GlobalFun.UpdateRecord,width:100},{text:"客户名",dataIndex:"customer_name",renderer:GlobalFun.UpdateRecord,width:100},{text:"客户编号",dataIndex:"customer_no",renderer:GlobalFun.UpdateRecord,width:100},{text:"手机号",dataIndex:"mobile",renderer:GlobalFun.UpdateRecord,width:100},{text:"房租单价",dataIndex:"rent_area",renderer:GlobalFun.UpdateRecord,width:100,hidden:!0,groupable:!1,sortable:!1},{text:"面积单量比",dataIndex:"area_to_order_number",renderer:GlobalFun.UpdateRecord,width:100,hidden:!0,groupable:!1,sortable:!1},{text:"房租单价",dataIndex:"rent_pre_price",renderer:GlobalFun.UpdateRecord,width:100,hidden:!0,groupable:!1,sortable:!1},{text:"开始日期",dataIndex:"date_start",renderer:GlobalFun.UpdateRecord,width:100,hidden:!0,groupable:!1,sortable:!1},{text:"结束日期",dataIndex:"date_end",renderer:GlobalFun.UpdateRecord,width:100,hidden:!0,groupable:!1,sortable:!1}];return GridManager.CustomerGrid=Ext.create("chl.gird.CustomerGrid",GridManager.BaseGridCfg("CustomerGrid","CustomerGridState",tmpArr)),param&&param.needLoad&&GridManager.CustomerGrid.loadGrid(),GridManager.CustomerGrid},GridManager.SetCustomerGridSelectionChangeEvent=function(param){GridManager.CustomerGrid.on("selectionchange",function(view,seles,op){!seles[0]})},Ext.define("chl.Grid.AddUpdateCustomerWin",{extend:"Ext.window.Window",title:"添加",defaultFocus:"customer_nameItemId",iconCls:"",record:!1,height:160,width:830,layout:"vbox",modal:!0,resizable:!1,items:[{xtype:"form",itemId:"formId",autoScroll:!0,height:450,width:820,border:!1,bodyPadding:15,defaultType:"textfield",layout:{type:"table",columns:2},defaults:{labelAlign:"right",labelPad:15,width:340,labelWidth:125,maxLength:36,enableKeyEvents:!0,listeners:{keydown:function(field,e,opts){var me=this;if(e.getKey()==e.ENTER){var win=me.up("window");win.down("#submit").fireHandler(e)}}}},items:[{name:"customer_name",fieldLabel:"客户名",itemId:"customer_nameItemId",validateOnBlur:!1,allowBlank:!1,blankText:"不能为空"},{name:"customer_no",fieldLabel:"客户编号",itemId:"customer_noItemId",validateOnBlur:!1,allowBlank:!1,blankText:"不能为空"},{name:"mobile",fieldLabel:"手机号",itemId:"mobileItemId",validateOnBlur:!1,allowBlank:!1,blankText:"不能为空"}]}],buttons:[{text:"重置",handler:function(){var me=this,w=me.up("window"),f=w.down("#formId");if(f.getForm().reset(),"update"==w.action){var sm=w.grid.getSelectionModel();sm.hasSelection()&&f.getForm().loadRecord(sm.getSelection()[0])}}},{text:"确定",itemId:"submit",handler:function(){var me=this,w=me.up("window"),form=w.down("#formId").getForm();if(form.isValid()){var url="create"==w.action?GlobalConfig.Controllers.CustomerGrid.addCustomer:GlobalConfig.Controllers.CustomerGrid.updateCustomer;form.submit({url:url,params:{req:"dataset",dataname:"AddUpdateCustomer",restype:"json",customer_id:w.record?w.record.data.customer_id:0,Id:w.record?w.record.data.ControllTid:0,logId:w.record?w.record.data.Id:0,action:w.action,sessiontoken:GlobalFun.getSeesionToken()},success:function(form,action){w.grid.loadGrid(),w.close()},failure:function(form,action){GlobalFun.errorProcess(action.result.code)||Ext.Msg.alert("失败",action.result.msg)}})}}},{text:"取消",handler:function(){var me=this;me.up("window").close()}}]}),Ext.define("chl.Grid.AddUpdateCustomerRentWin",{extend:"Ext.window.Window",title:"添加",defaultFocus:"customer_nameItemId",iconCls:"",record:!1,height:650,width:830,layout:"vbox",modal:!0,resizable:!1,bodyPadding:5,items:[{xtype:"form",itemId:"formId",autoScroll:!0,height:180,width:810,border:!1,bodyPadding:5,defaultType:"textfield",layout:{type:"table",columns:2},defaults:{labelAlign:"right",labelPad:15,width:340,labelWidth:125,maxLength:100},items:[{name:"customer_name",xtype:"displayfield",fieldLabel:"客户名",itemId:"customer_nameItemId",validateOnBlur:!1,allowBlank:!1,blankText:"不能为空"},{name:"mobile",fieldLabel:"手机号",xtype:"displayfield",itemId:"mobileItemId",validateOnBlur:!1,allowBlank:!1,blankText:"不能为空"},{name:"rent_area",fieldLabel:"租贷面积（平米）",itemId:"rent_areaItemId",validateOnBlur:!1,allowBlank:!1,blankText:"不能为空",regex:GlobalConfig.RegexController.regexNumber,regexText:"请输入数字",maxLength:6},{name:"area_to_order_number",fieldLabel:"面积单量比",itemId:"area_to_order_numberItemId",validateOnBlur:!1,allowBlank:!1,blankText:"不能为空",regex:GlobalConfig.RegexController.regexMoney2Fixed,regexText:"请输入数字"},{name:"rent_pre_price",fieldLabel:"房租单价",validateOnBlur:!1,colspan:2,allowBlank:!1,blankText:"不能为空",regex:GlobalConfig.RegexController.regexMoney2Fixed,regexText:"请输入数字"},{xtype:"datefield",name:"date_start",format:"Y-m-d",fieldLabel:"开始时间",allowBlank:!1,blankText:"不能为空",itemId:"date_start",vtype:"daterange",endDateField:"date_end"},{xtype:"datefield",name:"date_end",format:"Y-m-d",fieldLabel:"结束时间",allowBlank:!1,blankText:"不能为空",itemId:"date_end",vtype:"daterange",startDateField:"date_start"},{xtype:"button",colspan:2,width:100,margin:"0 0 0 600",text:"添加",handler:function(com){var me=this,w=me.up("window"),form=w.down("#formId").getForm();if(form.isValid()){var url=GlobalConfig.Controllers.CustomerGrid.addCustomerRent;form.submit({url:url,params:{req:"dataset",dataname:"addCustomerRent",restype:"json",customerId:w.cid,action:w.action,sessiontoken:GlobalFun.getSeesionToken()},success:function(form,action){w.down("CustomerRentGrid").loadGrid()},failure:function(form,action){GlobalFun.errorProcess(action.result.code)||Ext.Msg.alert("失败",action.result.msg)}})}}},{xtype:"label",colspan:2,style:{color:"red"},text:"注：如客户存在多个租赁房间，添加合同时需要将多个房间面积相加后，再添加合同。多个房间对应的单量比和房租单价必须一致。每个客户只有最新添加的合同处于生效状态。"},{name:"customer_id",xtype:"hidden"}]},{xtype:"CustomerRentGrid",margin:"5 0 0 0",width:810,height:390}],buttons:[{text:"关闭",handler:function(){var me=this;me.up("window").close()}}],listeners:{beforehide:function(com){WindowManager.AddUpdateCustomerRentWin.grid.store.load({scope:this,callback:function(records,operation,success){var record=WindowManager.AddUpdateCustomerRentWin.record;Ext.Array.each(records,function(item,index){return record.data.customer_id==item.data.customer_id?(record=item,!1):void 0});var sm=WindowManager.AddUpdateCustomerRentWin.grid.getSelectionModel();sm.select(record)}})}}});
//# sourceMappingURL=CustomerGrid.js.map
Ext.define("chl.Action.Tracking_numberGridAction",{extend:"WS.action.Base",category:"Tracking_numberGridAction"}),Ext.create("chl.Action.Tracking_numberGridAction",{itemId:"searchTracking_number",iconCls:"search",tooltip:"查询",text:"查询",handler:function(){var target=this.getTargetView();ActionManager.searchTracking_number(target)},updateStatus:function(selection){}}),Ext.create("chl.Action.Tracking_numberGridAction",{itemId:"importTracking_number",iconCls:"import",tooltip:"导入",text:"导入",handler:function(){var target=this.getTargetView(),win=Ext.create("Ext.window.Window",{height:360,width:800,modal:!0,resizable:!1,iconCls:"import",title:"上传文件",bodyPadding:15,defaults:{margin:"0 0 20 0"},items:[{xtype:"form",itemId:"formId",bodyPadding:15,items:[{xtype:"filefield",name:"fileUpload",fieldLabel:"请选择导入的文件",width:600,labelWidth:150,labelAlign:"right",blankText:"请选择导入的文件",msgTarget:"side",itemId:"fileupId",buttonConfig:{iconCls:"import",width:100},buttonText:"添加文件",listeners:{change:function(com){var me=com,supType=new Array("xls","xlsx"),fNmae=me.getValue(),fType=fNmae.substring(fNmae.lastIndexOf(".")+1,fNmae.length).toLowerCase(),returnFlag=!0;if(Ext.Array.each(supType,function(rec){return rec==fType?(returnFlag=!1,!1):void 0}),returnFlag)return void Ext.Msg.alert("添加文件","不支持的文件格式！");var f=me.up("form"),outWin=me.up("window"),form=f.getForm(),urlStr=GlobalConfig.Controllers.Tracking_numberGrid.uploadExcel+"?req=call&callname=uploadExcel&sessiontoken="+GlobalFun.getSeesionToken();form.submit({timeout:600,url:urlStr,waitMsg:"正在上传...",waitTitle:"等待文件上传,请稍候...",success:function(fp,action){action.result.data;target.loadGrid(),outWin.close()},failure:function(fp,action){if(!GlobalFun.errorProcess(action.result.code)){var obj={};obj[fNmae]=action.result.data,ActionManager.showUpLoadExcelError(obj)}}})}}}]},{xtype:"form",itemId:"h5formId",layout:"vbox",bodyPadding:15,items:[{xtype:"label",style:{"font-weight":"bold"},text:"如果您使用的是高级的支持Html5的浏览器，请使用的这里的上传"},{xtype:"label",style:{color:"red","font-weight":"bold"},text:"多文件批量，更快捷，可拖拽文件，可视化的真实上传进度显示,更大的文件"},{xtype:"container",style:{border:"1px dotted  green"},items:[{xtype:"Html5FileUpload",name:"fileUpload",labelAlign:"right",fieldLabel:"请选择导入的文件<br/>(可拖拽文件到此处)",width:600,height:100,buttonOnly:!0,labelWidth:150,msgTarget:"side",itemId:"fileupId",buttonConfig:{iconCls:"import",width:300},uploadUrl:GlobalConfig.Controllers.Tracking_numberGrid.uploadExcel+"?req=call&callname=uploadExcel&sessiontoken="+GlobalFun.getSeesionToken(),accept:".xls*",buttonText:"添加文件",listeners:{change:function(com){var me=com;if(Ext.isIE)return void Ext.Msg.alert("消息","您的浏览器不支持Html5上传,请更换浏览器或升级版本。");var supType=new Array("xls","xlsx"),fNmae=me.getValue(),fType=fNmae.substring(fNmae.lastIndexOf(".")+1,fNmae.length).toLowerCase(),returnFlag=!0;return Ext.Array.each(supType,function(rec){return rec==fType?(returnFlag=!1,!1):void 0}),returnFlag?void Ext.Msg.alert("添加文件","不支持的文件格式！"):void me.sendFiles(me.fileInputEl.dom.files)}}}]}]}],buttons:[{text:"关闭",handler:function(){win.close()}}]});win.show()},updateStatus:function(selection){}}),Ext.create("chl.Action.Tracking_numberGridAction",{itemId:"exportTracking_number",iconCls:"export",tooltip:"导出",text:"导出",handler:function(){var target=this.getTargetView(),store=target.getStore(),extraParams=store.getProxy().extraParams,param={downType:"Tracking_number",arrive_time_start:extraParams.arrive_time_start,arrive_time_end:extraParams.arrive_time_end,dir:"ASC",sort:"tracking_number",filter:extraParams.filter,sessiontoken:GlobalFun.getSeesionToken()};WsCall.downloadFile(GlobalConfig.Controllers.Tracking_numberGrid.outPutExcel,"download",param)},updateStatus:function(selection){}}),Ext.create("chl.Action.Tracking_numberGridAction",{itemId:"refreshTracking_number",iconCls:"refresh",tooltip:"刷新",text:"刷新",handler:function(){var target=this.getTargetView();ActionManager.refreshTracking_number(target)},updateStatus:function(selection){}}),Ext.create("chl.Action.Tracking_numberGridAction",{itemId:"translateExpressTracking_number",iconCls:"translate",tooltip:"计算收入",text:"计算收入",handler:function(){var target=this.getTargetView(),param={sessiontoken:GlobalFun.getSeesionToken(),type:"income"};WsCall.pcall(GlobalConfig.Controllers.Tracking_numberGrid.translateExpress,"translateExpress",param,function(response,opts){target.loadGrid()},function(response,opts){GlobalFun.errorProcess(response.code)||ActionManager.translateError(response)},!0)},updateStatus:function(selection){}}),Ext.create("chl.Action.Tracking_numberGridAction",{itemId:"translateCostTracking_number",iconCls:"translate",tooltip:"计算成本",text:"计算成本",handler:function(){var target=this.getTargetView(),param={sessiontoken:GlobalFun.getSeesionToken(),type:"cost"};WsCall.pcall(GlobalConfig.Controllers.Tracking_numberGrid.translateExpress,"translateExpress",param,function(response,opts){target.loadGrid()},function(response,opts){GlobalFun.errorProcess(response.code)||ActionManager.translateError(response)},!0)},updateStatus:function(selection){}}),ActionManager.refreshTracking_number=function(traget){traget.loadGrid()},ActionManager.showUpLoadExcelError=function(obj){var items=[];for(key in obj){var textItems=[];Ext.Array.each(obj[key],function(item,index){textItems.push({xtype:"label",text:item.msg})}),items.push({xtype:"fieldset",title:key,layout:"vbox",collapsible:!0,items:textItems})}Ext.create("Ext.window.Window",{title:"数据格式错误",modal:!0,width:700,height:600,bodyPadding:15,layout:{type:"table",columns:2},items:[{xtype:"container",cls:"x-message-box-error ",height:34,width:34},{xtype:"label",text:"数据格式错误，请修改下列数据后重新上传"},{xtype:"container",margin:"15 0 0 0",colspan:2,autoScroll:!0,height:470,width:660,items:items}],buttons:[{text:"确定",handler:function(com){com.up("window").close()}}]}).show()},ActionManager.searchTracking_number=function(traget){WindowManager.Tracking_numberWin&&""!=WindowManager.Tracking_numberWin?WindowManager.Tracking_numberWin.show():(WindowManager.Tracking_numberWin=Ext.create("Ext.window.Window",{modal:!0,resizable:!1,closeAction:"hide",title:"查询",defaultFocus:"tracking_number",iconCls:"search",record:!1,formVals:"",height:300,width:500,layout:"vbox",items:[{xtype:"form",itemId:"formId",autoScroll:!0,height:290,width:500,border:!1,bodyPadding:15,defaultType:"textfield",layout:{type:"table",columns:1},defaults:{labelAlign:"right",labelPad:15,width:340,labelWidth:125,maxLength:100,enableKeyEvents:!0,listeners:{keydown:function(field,e,opts){var me=this;if(e.getKey()==e.ENTER){var win=me.up("window");win.down("#submit").fireHandler(e)}}}},items:[{fieldLabel:"票据号",itemId:"tracking_number",maxLength:64},{fieldLabel:"网点",itemId:"arrive_express_point_name",maxLength:64},{fieldLabel:"网点代码",itemId:"arrive_express_point_code",maxLength:16},{xtype:"fieldcontainer",colspan:2,width:490,fieldLabel:"收货时间",defaultType:"datetimefield",layout:{type:"hbox"},defaults:{labelAlign:"right",width:100},items:[{xtype:"datefield",format:"Y-m-d",itemId:"dateStar",vtype:"daterange",endDateField:"dateEnd"},{xtype:"label",margin:"0 0 0 5",width:20,text:"至"},{xtype:"datefield",format:"Y-m-d",itemId:"dateEnd",vtype:"daterange",startDateField:"dateStar"}]}]}],listeners:{show:function(win){var form=win.down("#formId").getForm();""!=win.formVals&&form.setValues(win.formVals)}},buttons:[{text:"重置",handler:function(){var me=this,w=me.up("window"),f=w.down("#formId");f.getForm().reset()}},{text:"确定",itemId:"submit",handler:function(){var me=this,win=me.up("window"),searchFlag=!1,store=traget.getStore(),extraParams=store.getProxy().extraParams,form=win.down("#formId").getForm();if(form.isValid()){win.formVals=form.getValues();var tracking_number=win.down("#tracking_number").getValue();""!=tracking_number?(GlobalFun.GridSearchInitFun("tracking_number",!1,store,tracking_number),searchFlag=!0):GlobalFun.GridSearchInitFun("tracking_number",!0,store,!1);var arrive_express_point_name=win.down("#arrive_express_point_name").getValue();""!=arrive_express_point_name?(GlobalFun.GridSearchInitFun("arrive_express_point_name",!1,store,arrive_express_point_name),searchFlag=!0):GlobalFun.GridSearchInitFun("arrive_express_point_name",!0,store,!1);var arrive_express_point_code=win.down("#arrive_express_point_code").getValue();""!=arrive_express_point_code?(GlobalFun.GridSearchInitFun("arrive_express_point_code",!1,store,arrive_express_point_code),searchFlag=!0):GlobalFun.GridSearchInitFun("arrive_express_point_code",!0,store,!1);var dateStarField=win.down("#dateStar"),dateEndField=win.down("#dateEnd"),dateStar=dateStarField.getValue(),dateEnd=dateEndField.getValue();dateStar||dateEnd?(extraParams.DateFilter=!0,extraParams.arrive_time_start=Ext.Date.format(dateStar,"Y-m-d"),extraParams.arrive_time_end=Ext.Date.format(dateEnd,"Y-m-d"),searchFlag=!0):(extraParams.DateFilter=!1,extraParams.arrive_time_start="",extraParams.arrive_time_end=""),searchFlag?(win.close(),traget.loadGrid(!0)):(win.close(),traget.loadGrid())}}},{text:"取消",handler:function(){var me=this;me.up("window").close()}}]}),WindowManager.Tracking_numberWin.show())},ActionManager.translateError=function(response){var items=[];Ext.Array.each(response.data,function(item,index){items.push({fieldLabel:item.tracking_number,value:item.msg})}),Ext.create("Ext.window.Window",{modal:!0,maxWidth:800,maxHeight:600,title:response.msg,iconCls:"error",bodyPadding:20,autoScroll:!0,bodyBorder:!1,defaults:{xtype:"displayfield",labelAlign:"right",labelWidth:160,width:750,labelClsExtra:"labelCanSelect"},items:items,buttonAlign:"center",buttons:[{text:"关闭",handler:function(com){com.up("window").close()}}]}).show()};
//# sourceMappingURL=Tracking_numberGridAction.js.map
Ext.define("chl.Model.Tracking_numberGridModel",{extend:"Ext.data.Model",idProperty:"Id",alternateClassName:["Tracking_numberGridModel"],fields:[{name:"tracking_number_id",type:"string"},{name:"tracking_number",type:"string"},{name:"weight",type:"string"},{name:"arrive_express_point_name",type:"string"},{name:"arrive_express_point_code",type:"string"},{name:"arrive_time",type:"string"},{name:"income",type:"string"},{name:"cost",type:"string"},{name:"customer_id",type:"string"},{name:"customer_name",type:"string"},{name:"admin_id",type:"string"},{name:"admin_name",type:"string"},{name:"account_status",type:"string"},{name:"account_status_name",type:"string"},{name:"customer_rent_id",type:"string"},{name:"express_id"},{name:"express_name"}]});
//# sourceMappingURL=Tracking_numberGridModel.js.map
Ext.create("Ext.data.Store",{model:"chl.Model.Tracking_numberGridModel",storeId:"Tracking_numberGridStoreId",filterMap:Ext.create("Ext.util.HashMap"),pageSize:GlobalConfig.GridPageSize,autoLoad:!1,remoteSort:!0,sorters:[{property:"tracking_number_id",direction:"DESC"}],autoSync:!1,proxy:{type:"ajax",api:GlobalConfig.Controllers.Tracking_numberGrid,filterParam:"filter",sortParam:"sort",directionParam:"dir",limitParam:"limit",startParam:"start",simpleSortMode:!0,extraParams:{req:"data",dataname:"traking_number",restype:"json",sessiontoken:GlobalFun.getSeesionToken(),folderid:-1,refresh:null,template:""},reader:{type:"json",root:"data",seccessProperty:"success",messageProperty:"msg",totalProperty:"total"},writer:{type:"json",writeAllFields:!1,allowSingle:!1},actionMethods:{create:"POST",read:"POST",update:"POST",destroy:"POST"},listeners:{exception:function(proxy,response,operation){var json=Ext.JSON.decode(response.responseText),code=json.code;GlobalFun.errorProcess(code),"read"!=operation.action}}},listeners:{load:function(store,records,suc,operation,opts){store.getTotalCount();suc||store.loadData([])}}});
//# sourceMappingURL=Tracking_numberGridStore.js.map
var Tracking_numberGrid_RightMenu=Ext.create("Ext.menu.Menu",{items:[ActionBase.getAction("refreshTracking_number"),"-",ActionBase.getAction("searchTracking_number"),"-",ActionBase.getAction("importTracking_number"),ActionBase.getAction("exportTracking_number"),"-",ActionBase.getAction("translateExpressTracking_number"),ActionBase.getAction("translateCostTracking_number")]});Ext.define("chl.gird.Tracking_numberGrid",{alternateClassName:["Tracking_numberGrid"],alias:"widget.Tracking_numberGrid",extend:"chl.grid.BaseGrid",store:"Tracking_numberGridStoreId",actionBaseName:"Tracking_numberGridAction",viewConfig:{loadingText:"<b>正在加载数据...</b>",enableTextSelection:!0},listeners:{itemclick:function(grid,record,hitem,index,e,opts){},itemdblclick:function(grid,record,hitem,index,e,opts){},itemcontextmenu:function(view,rec,item,index,e,opts){e.stopEvent(),Tracking_numberGrid_RightMenu.showAt(e.getXY())},beforeitemmousedown:function(view,record,item,index,e,options){},selectionchange:function(view,seles,op){seles[0]&&ActionBase.updateActions("Tracking_numberGridAction",seles)}},columns:[],dockedItems:[{xtype:"toolbar",itemId:"toolbarID",dock:"top",layout:{overflowHandler:"Menu"},items:[ActionBase.getAction("refreshTracking_number"),"-",ActionBase.getAction("searchTracking_number"),"-",ActionBase.getAction("importTracking_number"),ActionBase.getAction("exportTracking_number"),"-",ActionBase.getAction("translateExpressTracking_number"),ActionBase.getAction("translateCostTracking_number")]},{xtype:"Pagingtoolbar",itemId:"pagingtoolbarID",store:"Tracking_numberGridStoreId",dock:"bottom",items:[{xtype:"tbtext",text:"过滤:"},{xtype:"GridFilterMenuButton",itemId:"menuID",text:"全部状态",filterParam:{group:"account_statusGroup",text:"全部类别",filterKey:"account_status",GridTypeName:"Tracking_numberGrid",store:StoreManager.ComboStore.Tracking_numberGridTypeStore}},"-",{xtype:"GridSelectCancelMenuButton",itemId:"selectRecId",text:"选择",targetName:"Tracking_numberGrid"}]}],initComponent:function(){var me=this;me.callParent(arguments),ActionBase.setTargetView(me.actionBaseName,me),ActionBase.updateActions(me.actionBaseName,me.getSelectionModel().getSelection())},loadGrid:function(isSearch){var me=this,store=me.getStore(),sessiontoken=store.getProxy().extraParams.sessiontoken;!sessiontoken||0==sessiontoken.length;var filter={};store.filterMap.each(function(key,value,length){filter[key]=value}),store.getProxy().extraParams.filter=Ext.JSON.encode(filter),store.getProxy().extraParams.refresh=1,store.loadPage(1),store.getProxy().extraParams.refresh=null,GlobalFun.SetGridTitle(me.up("#centerGridDisplayContainer"),store,"票据列表"),ActionBase.updateActions(me.actionBaseName,me.getSelectionModel().getSelection())}}),GridManager.CreateTracking_numberGrid=function(param){var tmpArr=[{text:"编号",dataIndex:"tracking_number_id",renderer:GlobalFun.UpdateRecord,flex:1},{text:"票据号",dataIndex:"tracking_number",renderer:GlobalFun.UpdateRecord,flex:1},{text:"重量",dataIndex:"weight",renderer:GlobalFun.UpdateRecord,flex:1},{text:"网点",dataIndex:"arrive_express_point_name",renderer:GlobalFun.UpdateRecord,flex:1},{text:"网点代码",dataIndex:"arrive_express_point_code",renderer:GlobalFun.UpdateRecord,flex:1},{text:"收货时间",dataIndex:"arrive_time",renderer:GlobalFun.UpdateRecord,flex:1},{text:"收入",dataIndex:"income",renderer:GlobalFun.UpdateRecord,flex:1},{text:"成本",dataIndex:"cost",renderer:GlobalFun.UpdateRecord,flex:1},{text:"客户名称",dataIndex:"customer_name",renderer:GlobalFun.UpdateRecord,flex:1,groupable:!1,sortable:!1},{text:"操作人",dataIndex:"admin_name",renderer:GlobalFun.UpdateRecord,flex:1,groupable:!1,sortable:!1},{text:"结算状态",dataIndex:"account_status_name",renderer:GlobalFun.UpdateRecord,flex:1,groupable:!1,sortable:!1},{text:"快递公司",dataIndex:"express_name",renderer:GlobalFun.UpdateRecord,flex:1,groupable:!1,sortable:!1}];return GridManager.Tracking_numberGrid=Ext.create("chl.gird.Tracking_numberGrid",GridManager.BaseGridCfg("Tracking_numberGrid","Tracking_numberGridState",tmpArr)),param&&param.needLoad&&GridManager.Tracking_numberGrid.loadGrid(),GridManager.Tracking_numberGrid},GridManager.SetTracking_numberGridSelectionChangeEvent=function(param){GridManager.Tracking_numberGrid.on("selectionchange",function(view,seles,op){!seles[0]})};
//# sourceMappingURL=Tracking_numberGrid.js.map
Ext.define("chl.Action.Express_pointGridAction",{extend:"WS.action.Base",category:"Express_pointGridAction"}),Ext.create("chl.Action.Express_pointGridAction",{itemId:"addExpress_point",iconCls:"base_add",tooltip:"添加网点",text:"添加网点",handler:function(){var me=this,target=me.getTargetView();ActionManager.addExpress_point(target)},updateStatus:function(selection){}}),Ext.create("chl.Action.Express_pointGridAction",{itemId:"editExpress_point",iconCls:"base_edit",tooltip:"编辑网点",text:"编辑网点",handler:function(){var me=this,target=me.getTargetView(),record=target.getSelectionModel().getSelection()[0];ActionManager.editExpress_point(target,record)},updateStatus:function(selection){this.setDisabled(1!=selection.length)}}),Ext.create("chl.Action.Express_pointGridAction",{itemId:"searchExpress_point",iconCls:"search",tooltip:"查询",text:"查询",handler:function(){var target=this.getTargetView();ActionManager.searchExpress_point(target)},updateStatus:function(selection){}}),Ext.create("chl.Action.Express_pointGridAction",{itemId:"delExpress_point",iconCls:"base_delete",tooltip:"删除",text:"删除",handler:function(){var target=this.getTargetView();ActionManager.delExpress_point(target)},updateStatus:function(selection){this.setDisabled(0==selection.length)}}),Ext.create("chl.Action.Express_pointGridAction",{itemId:"refreshExpress_point",iconCls:"refresh",tooltip:"刷新",text:"刷新",handler:function(){var target=this.getTargetView();ActionManager.refreshExpress_point(target)},updateStatus:function(selection){}}),ActionManager.refreshExpress_point=function(target){target.loadGrid()},ActionManager.addExpress_point=function(target){WindowManager.AddUpdateExpress_pointWin=Ext.create("chl.Grid.AddUpdateExpress_pointWin",{grid:target,iconCls:"base_add",action:"create",record:null,title:"新增"}),WindowManager.AddUpdateExpress_pointWin.show(null,function(){})},ActionManager.editExpress_point=function(target,record){WindowManager.AddUpdateExpress_pointWin=Ext.create("chl.Grid.AddUpdateExpress_pointWin",{grid:target,iconCls:"base_edit",action:"update",record:record,title:"编辑"}),WindowManager.AddUpdateExpress_pointWin.show(null,function(){WindowManager.AddUpdateExpress_pointWin.down("#formId").loadRecord(record)})},ActionManager.searchExpress_point=function(traget){WindowManager.searchExpress_pointWin&&""!=WindowManager.searchExpress_pointWin?WindowManager.searchExpress_pointWin.show():WindowManager.searchExpress_pointWin=Ext.create("Ext.window.Window",{modal:!0,resizable:!1,closeAction:"hide",title:"查询",defaultFocus:"Express_point_nameItemId",iconCls:"search",record:!1,formVals:"",height:200,width:500,layout:"vbox",listeners:{show:function(win){var form=win.down("#formId").getForm();""!=win.formVals&&form.setValues(win.formVals);var searchfield=traget.down("#Express_pointGridSearchfieldId");if(searchfield&&searchfield.paramName){var item=win.down("textfield[name="+searchfield.paramName+"]");if(item){var store=traget.getStore(),filter=Ext.JSON.decode(store.getProxy().extraParams.filter);item.setValue(filter[searchfield.paramName])}}}},items:[{xtype:"form",itemId:"formId",autoScroll:!0,height:190,width:500,border:!1,bodyPadding:15,defaultType:"textfield",layout:{type:"table",columns:1},defaults:{labelAlign:"right",labelPad:15,width:340,labelWidth:125,maxLength:40,enableKeyEvents:!0,listeners:{keydown:function(field,e,opts){var me=this;if(e.getKey()==e.ENTER){var win=me.up("window");win.down("#submit").fireHandler(e)}}}},items:[{name:"express_point_name",fieldLabel:"网点名称",itemId:"express_point_nameItemId"},{name:"express_point_code",fieldLabel:"网点代码",maxLength:20,itemId:"express_point_codeItemId"},{xtype:"combobox",name:"province_code",itemId:"province_codeItemId",fieldLabel:"省份",store:"ProvinceStoreId",queryMode:"local",displayField:"Name",valueField:"Id",editable:!1}]}],buttons:[{text:"重置",handler:function(){var me=this,w=me.up("window"),f=w.down("#formId");f.getForm().reset()}},{text:"确定",itemId:"submit",handler:function(){var me=this,win=me.up("window"),searchFlag=!1,store=traget.getStore(),form=(store.getProxy().extraParams,win.down("#formId").getForm());if(form.isValid()){win.formVals=form.getValues();var express_point_name=win.down("#express_point_nameItemId").getValue();""!=express_point_name?(GlobalFun.GridSearchInitFun("express_point_name",!1,store,express_point_name),searchFlag=!0):GlobalFun.GridSearchInitFun("express_point_name",!0,store,!1);var Searchfield=traget.down("#Express_pointGridSearchfieldId");Searchfield&&(Searchfield.setValue(express_point_name),Searchfield.setSearchStatus(""!=express_point_name?!0:!1));var express_point_code=win.down("#express_point_codeItemId").getValue();""!=express_point_code?(GlobalFun.GridSearchInitFun("express_point_code",!1,store,express_point_code),searchFlag=!0):GlobalFun.GridSearchInitFun("express_point_code",!0,store,!1);var province_code=win.down("#province_codeItemId").getValue();""!=province_code?(GlobalFun.GridSearchInitFun("province_code",!1,store,province_code),searchFlag=!0):GlobalFun.GridSearchInitFun("province_code",!0,store,!1),searchFlag?(win.close(),traget.loadGrid(!0)):(win.close(),traget.loadGrid())}}},{text:"取消",handler:function(){var me=this;me.up("window").close()}}]}).show()},ActionManager.delExpress_point=function(traget){var sm=traget.getSelectionModel(),records=sm.getSelection();if(records[0]){var ids=[];Ext.Array.each(records,function(rec){ids.push(rec.data.point_id)});var store=traget.getStore();GlobalConfig.newMessageBox.show({title:"提示",msg:"您确定要删除选定的网点吗？",buttons:Ext.MessageBox.YESNO,closable:!1,fn:function(btn){if("yes"==btn){var param={sessiontoken:GlobalFun.getSeesionToken(),point_ids:ids.join()};WsCall.pcall(GlobalConfig.Controllers.Express_pointGrid.destroy,"Express_pointGridDestroy",param,function(response,opts){new Ext.util.DelayedTask(function(){store.load()}).delay(500)},function(response,opts){GlobalFun.errorProcess(response.code)||Ext.Msg.alert("登录失败",response.msg)},!0)}},icon:Ext.MessageBox.QUESTION})}};
//# sourceMappingURL=Express_pointGridAction.js.map
Ext.define("chl.Model.Express_pointGridModel",{extend:"Ext.data.Model",idProperty:"Id",alternateClassName:["Express_pointGridModel"],fields:[{name:"point_id",type:"string"},{name:"express_id",type:"string"},{name:"express_name",type:"string"},{name:"express_point_name",type:"string"},{name:"express_point_code",type:"string"},{name:"province_code",type:"string"},{name:"province_name",type:"string"}]});
//# sourceMappingURL=Express_pointGridModel.js.map
Ext.create("Ext.data.Store",{model:"chl.Model.Express_pointGridModel",storeId:"Express_pointGridStoreId",filterMap:Ext.create("Ext.util.HashMap"),pageSize:GlobalConfig.GridPageSize,autoLoad:!1,remoteSort:!0,sorters:[{property:"point_id",direction:"DESC"}],autoSync:!1,proxy:{type:"ajax",api:GlobalConfig.Controllers.Express_pointGrid,filterParam:"filter",sortParam:"sort",directionParam:"dir",limitParam:"limit",startParam:"start",simpleSortMode:!0,extraParams:{req:"data",dataname:"Express_point",restype:"json",sessiontoken:GlobalFun.getSeesionToken(),folderid:-1,refresh:null,template:""},reader:{type:"json",root:"data",seccessProperty:"success",messageProperty:"msg",totalProperty:"total"},writer:{type:"json",writeAllFields:!1,allowSingle:!1},actionMethods:{create:"POST",read:"POST",update:"POST",destroy:"POST"},listeners:{exception:function(proxy,response,operation){var json=Ext.JSON.decode(response.responseText),code=json.code;GlobalFun.errorProcess(code),"read"!=operation.action}}},listeners:{load:function(store,records,suc,operation,opts){store.getTotalCount();suc||store.loadData([])}}});
//# sourceMappingURL=Express_pointGridStore.js.map
var Express_pointGrid_RightMenu=Ext.create("Ext.menu.Menu",{items:[ActionBase.getAction("refreshExpress_point"),"-",ActionBase.getAction("searchExpress_point"),ActionBase.getAction("addExpress_point"),ActionBase.getAction("editExpress_point"),ActionBase.getAction("delExpress_point")]});Ext.define("chl.gird.Express_pointGrid",{alternateClassName:["Express_pointGrid"],alias:"widget.Express_pointGrid",extend:"chl.grid.BaseGrid",store:"Express_pointGridStoreId",actionBaseName:"Express_pointGridAction",listeners:{itemclick:function(grid,record,hitem,index,e,opts){},itemdblclick:function(grid,record,hitem,index,e,opts){ActionBase.getAction("editExpress_point").execute()},itemcontextmenu:function(view,rec,item,index,e,opts){e.stopEvent(),Express_pointGrid_RightMenu.showAt(e.getXY())},beforeitemmousedown:function(view,record,item,index,e,options){},selectionchange:function(view,seles,op){seles[0]&&ActionBase.updateActions("Express_pointGridAction",seles)}},columns:[],dockedItems:[{xtype:"toolbar",itemId:"toolbarID",dock:"top",layout:{overflowHandler:"Menu"},items:[ActionBase.getAction("refreshExpress_point"),"-",ActionBase.getAction("searchExpress_point"),ActionBase.getAction("addExpress_point"),ActionBase.getAction("editExpress_point"),ActionBase.getAction("delExpress_point"),"->",{fieldLabel:"按网点名查找",text:"按网点名查找",width:300,labelAlign:"right",labelWidth:80,xtype:"searchfield",paramName:"express_point_name",itemId:"Express_pointGridSearchfieldId",listeners:{render:function(){var me=this;me.store=GridManager.Express_pointGrid.getStore()}}}]},{xtype:"Pagingtoolbar",itemId:"pagingtoolbarID",store:"Express_pointGridStoreId",dock:"bottom",items:[]}],initComponent:function(){var me=this;me.callParent(arguments),ActionBase.setTargetView(me.actionBaseName,me),ActionBase.updateActions(me.actionBaseName,me.getSelectionModel().getSelection())},loadGrid:function(isSearch){var me=this,store=me.getStore(),sessiontoken=store.getProxy().extraParams.sessiontoken;!sessiontoken||0==sessiontoken.length;var filter={};store.filterMap.each(function(key,value,length){filter[key]=value}),store.getProxy().extraParams.filter=Ext.JSON.encode(filter),store.getProxy().extraParams.refresh=1,store.loadPage(1),store.getProxy().extraParams.refresh=null,GlobalFun.SetGridTitle(me.up("#centerGridDisplayContainer"),store,"客户列表"),ActionBase.updateActions(me.actionBaseName,me.getSelectionModel().getSelection())}}),GridManager.CreateExpress_pointGrid=function(param){var tmpArr=[{text:"编号",dataIndex:"point_id",renderer:GlobalFun.UpdateRecord,width:100},{text:"网点名称",dataIndex:"express_point_name",renderer:GlobalFun.UpdateRecord,width:100},{text:"网点代码",dataIndex:"express_point_code",renderer:GlobalFun.UpdateRecord,width:100},{text:"省份代码",dataIndex:"province_code",renderer:GlobalFun.UpdateRecord,width:100},{text:"省份名称",dataIndex:"province_name",renderer:GlobalFun.UpdateRecord,width:100,groupable:!1,sortable:!1}];return GridManager.Express_pointGrid=Ext.create("chl.gird.Express_pointGrid",GridManager.BaseGridCfg("Express_pointGrid","Express_pointGridState",tmpArr)),param&&param.needLoad&&GridManager.Express_pointGrid.loadGrid(),GridManager.Express_pointGrid},GridManager.SetExpress_pointGridSelectionChangeEvent=function(param){GridManager.Express_pointGrid.on("selectionchange",function(view,seles,op){!seles[0]})},Ext.define("chl.Grid.AddUpdateExpress_pointWin",{extend:"Ext.window.Window",title:"添加",defaultFocus:"express_point_nameItemId",iconCls:"",record:!1,height:220,width:430,layout:"vbox",modal:!0,resizable:!1,items:[{xtype:"form",itemId:"formId",autoScroll:!0,height:250,width:420,border:!1,bodyPadding:15,defaultType:"textfield",layout:{type:"table",columns:1},defaults:{labelAlign:"right",labelPad:15,width:340,labelWidth:125,maxLength:100,enableKeyEvents:!0,listeners:{keydown:function(field,e,opts){var me=this;if(e.getKey()==e.ENTER){var win=me.up("window");win.down("#submit").fireHandler(e)}}}},items:[{name:"express_point_name",fieldLabel:"网点名称",validateOnBlur:!1,allowBlank:!1,blankText:"不能为空",maxLength:40},{name:"express_point_code",fieldLabel:"网点代码",validateOnBlur:!1,allowBlank:!1,blankText:"不能为空",maxLength:20},{xtype:"combobox",name:"province_code",fieldLabel:"省份",store:"ProvinceStoreId",queryMode:"local",displayField:"Name",valueField:"Id",editable:!1,allowBlank:!1,blankText:"不能为空",listeners:{boxready:function(com){com.up("window");GlobalFun.comboSelectFirstOrDefaultVal(com)}}}]}],buttons:[{text:"重置",handler:function(){var me=this,w=me.up("window"),f=w.down("#formId");if(f.getForm().reset(),"update"==w.action){var sm=w.grid.getSelectionModel();sm.hasSelection()&&f.getForm().loadRecord(sm.getSelection()[0])}}},{text:"确定",itemId:"submit",handler:function(){var me=this,w=me.up("window"),form=w.down("#formId").getForm();if(form.isValid()){var url="create"==w.action?GlobalConfig.Controllers.Express_pointGrid.create:GlobalConfig.Controllers.Express_pointGrid.update;form.submit({url:url,params:{req:"dataset",dataname:"AddUpdateExpress_point",restype:"json",express_id:1,point_id:w.record?w.record.data.point_id:0,action:w.action,sessiontoken:GlobalFun.getSeesionToken()},success:function(form,action){w.grid.loadGrid(),w.close()},failure:function(form,action){GlobalFun.errorProcess(action.result.code)||Ext.Msg.alert("失败",action.result.msg)}})}}},{text:"取消",handler:function(){var me=this;me.up("window").close()}}]});
//# sourceMappingURL=Express_pointGrid.js.map
Ext.define("chl.panel.ExpressPanel",{alternateClassName:["ExpressPanel"],alias:"widget.ExpressPanel",extend:"Ext.tab.Panel",itemId:"ExpressPanel"}),GlobalFun.ExpressPanel_addRuleFun=function(com){var sel=TreeManager.MainItemListTree.getSelectionModel().getSelection()[0],param={express_id:sel.data.express_id,province_code:com.myval,sessiontoken:GlobalFun.getSeesionToken()};WsCall.call(GlobalConfig.Controllers.ExpressPanel.GetExpressRule,"GetExpressRule",param,function(response,opts){function createRuleRow(rowData){var tempRuleItems=[];return Ext.Array.each(rowData,function(item,index,alls){var obj={},title="";title="1"==item.price_type?"固定价格":"称重价格",obj={xtype:"fieldset",title:title,width:770,collapsible:!0,layout:{type:"table",columns:2},defaults:{xtype:"displayfield",labelAlign:"right",labelPad:15,width:340,labelWidth:125,maxLength:100,maxLengthText:"最大长度为100"},items:[{fieldLabel:"起始重量(kg)",value:item.weight_min},{fieldLabel:"结束重量(kg)",value:item.weight_max},{fieldLabel:"价格",value:item.price},{fieldLabel:"排序",value:item.sort_order},{xtype:"button",colspan:2,rule_id:item.item_id,width:100,margin:"0 0 0 630",text:"删除",handler:function(com){var rule_id=com.rule_id,param={item_id:rule_id,sessiontoken:GlobalFun.getSeesionToken()};WsCall.call(GlobalConfig.Controllers.ExpressPanel.delExpressRule,"delExpressRule",param,function(response,opts){com.up("fieldset").destroy()},function(response,opts){GlobalFun.errorProcess(response.code)||Ext.Msg.alert("失败",response.msg)},!0,!1,com.up("window").getEl())}}]},tempRuleItems.push(obj)}),tempRuleItems}var data=response.data;Ext.create("Ext.window.Window",{title:"添加规则("+GlobalConfig.Province[com.myval]+")",pid:com.myval,width:820,height:700,iconCls:"editCustomerRule",resizable:!1,action:"create",modal:!0,autoScroll:!0,layout:"vbox",bodyPadding:10,dockedItems:[{xtype:"container",dock:"top",border:!1,bodyPadding:15,layout:{type:"table",columns:2},defaultType:"textfield",defaults:{labelAlign:"right",labelPad:15,width:340,labelWidth:125,maxLength:100},items:[{xtype:"form",itemId:"price_type0",height:140,width:810,bodyPadding:15,layout:{type:"table",columns:2},defaults:{labelAlign:"right",labelPad:15,width:340,labelWidth:125,maxLength:100,maxLengthText:"最大长度为100"},items:[{xtype:"fieldcontainer",colspan:2,fieldLabel:"价格类型",defaultType:"radiofield",layout:"hbox",defaults:{flex:1},items:[{boxLabel:"固定价格",checked:!0,name:"price_type",inputValue:"1"},{boxLabel:"称重价格",name:"price_type",inputValue:"2"}]},{xtype:"numberfield",name:"weight_min",fieldLabel:"起始重量(kg)",minValue:0,value:0,decimalPrecision:3,maxValue:GlobalConfig.MaxLimit,allowBlank:!1,blankText:"不能为空"},{xtype:"numberfield",name:"weight_max",fieldLabel:"结束重量(kg)",minValue:0,value:1,maxValue:GlobalConfig.MaxLimit,decimalPrecision:3,allowBlank:!1,blankText:"不能为空"},{xtype:"numberfield",name:"price",fieldLabel:"价格",decimalPrecision:2,minValue:0,maxValue:GlobalConfig.MaxLimit,regex:GlobalConfig.RegexController.regexMoney2Fixed,regexText:"请填写两位小数的数字",allowBlank:!1,blankText:"不能为空"},{fieldLabel:"排序",xtype:"numberfield",name:"sort_order",decimalPrecision:0,minValue:1,value:1},{xtype:"button",itemId:"btn_add",colspan:2,margin:"0 0 0 580",width:100,text:"添加",handler:function(com){var me=this,w=me.up("window"),form=w.down("#price_type0").getForm();if(form.isValid()){var url=GlobalConfig.Controllers.ExpressPanel.addExpressRule;form.submit({url:url,params:{req:"dataset",dataname:"addCustomerRule",restype:"json",price_type:0,express_id:sel.data.express_id,province_code:w.pid,action:w.action,sessiontoken:GlobalFun.getSeesionToken()},success:function(form,action){var data=action.result.data,arr=createRuleRow(data);w.removeAll(),w.add(arr)},failure:function(form,action){GlobalFun.errorProcess(action.result.code)||Ext.Msg.alert("失败",action.result.msg)}})}}}]}]}],items:[],listeners:{boxready:function(com){var tempRuleItems=createRuleRow(data);com.add(tempRuleItems)},beforehide:function(com){var param={express_id:sel.data.express_id,sessiontoken:GlobalFun.getSeesionToken()};WsCall.call(GlobalConfig.Controllers.ExpressPanel.GetCustomer_numberCount,"GetCustomer_numberCount",param,function(response,opts){var data=response.data;GlobalConfig.ExpressPanel_svgData=[],GlobalConfig.ExpressPanel_svgData=data,1==GridManager.ExpressPanel.getActiveTab().tabIndex?(Ext.isGecko&&GridManager.ExpressPanel.el.mask("正在加载图形"),GlobalFun.InitChinaSvgDataEvent(GlobalConfig.ExpressPanel_svgData,function(code){GlobalFun.ExpressPanel_addRuleFun({myval:code})}),Ext.isGecko&&GridManager.ExpressPanel.el.unmask()):Ext.Array.each(data,function(item,index,alls){var temp=GridManager.ExpressPanel.down("#lbl"+item.province_code);temp.setText("现有规则:"+item.count)})},function(response,opts){GlobalFun.errorProcess(response.code)||Ext.Msg.alert("失败",response.msg)},!1)}},buttons:[{text:"退出",handler:function(){var me=this;me.up("window").close()}}]}).show()},function(response,opts){GlobalFun.errorProcess(response.code)||Ext.Msg.alert("失败",response.msg)},!0)},GridManager.CreateExpressPanel=function(){var items=[];for(key in GlobalConfig.Province)items.push({title:GlobalConfig.Province[key],code:key,layout:"hbox",items:[{xtype:"label",text:"现有规则:0",itemId:"lbl"+key},{xtype:"button",text:"添加规则",margin:"0 0 0 20",width:100,iconCls:"btnAdd",myval:key,handler:function(com){GlobalFun.ExpressPanel_addRuleFun(com)}}]});var activeTab=1,cookie=Ext.util.Cookies.get("GlobalConfig.globalStatus");if(cookie){var obj=Ext.JSON.decode(cookie);"undefined"!=typeof obj.expressPanel_cardIndex&&(activeTab=obj.expressPanel_cardIndex)}return GridManager.ExpressPanel=Ext.create("chl.panel.ExpressPanel",{bodyPadding:15,stateful:!0,stateId:"ExpressPanelStateId",activeTab:activeTab,listeners:{tabchange:function(com,newCard){GlobalConfig.globalStatus.expressPanel_cardIndex=newCard.tabIndex,Ext.util.Cookies.set("GlobalConfig.globalStatus",Ext.JSON.encode(GlobalConfig.globalStatus),new Date((new Date).getTime()+31536e6)),1==GridManager.ExpressPanel.getActiveTab().tabIndex&&(Ext.isGecko&&GridManager.ExpressPanel.el.mask("正在加载图形"),GlobalFun.InitChinaSvgDataEvent(GlobalConfig.ExpressPanel_svgData,function(code){GlobalFun.ExpressPanel_addRuleFun({myval:code})}),Ext.isGecko&&GridManager.ExpressPanel.el.unmask())}},items:[{title:"普通视图",tabIndex:0,autoScroll:!0,layout:{type:"table",columns:2},defaults:{xtype:"fieldset",width:400,margin:"10 10 10 10"},items:items},{title:"图形视图",autoScroll:!0,tabIndex:1,items:[{xtype:"container",listeners:{boxready:function(com){Ext.isGecko&&com.el.mask("正在加载图形"),GlobalFun.CreatChinaSvg(com),Ext.isGecko&&com.el.unmask()}},items:[]}]}]}),GridManager.ExpressPanel},GlobalFun.CreatChinaSvg=function(com){GlobalFun.raphelR=Raphael(com.el.dom,800,700),paintMap(GlobalFun.raphelR),GlobalFun.raphelR.setViewBox(0,0,600,500,!1)},GlobalFun.InitChinaSvgDataEvent=function(data,clickFun){var R=GlobalFun.raphelR,textAttr={fill:"#000","font-size":"12px",cursor:"pointer"};for(var state in china)china[state].path.color=Raphael.getColor(.9),function(st,state){st.attr({cursor:"pointer"});var xx=st.getBBox().x+st.getBBox().width/2,yy=st.getBBox().y+st.getBBox().height/2;switch(china[state].name){case"江苏":xx+=5,yy-=10;break;case"河北":xx-=10,yy+=20;break;case"天津":xx+=10,yy+=10;break;case"上海":xx+=10;break;case"广东":yy-=10;break;case"澳门":yy+=10;break;case"香港":xx+=20,yy+=5;break;case"甘肃":xx-=40,yy-=30;break;case"陕西":xx+=5,yy+=10;break;case"内蒙古":xx-=15,yy+=65}var val="0";Ext.Array.each(data,function(item,index,alls){item.province_code==china[state].code&&(val=item.count)}),"undefined"!=typeof china[state].text&&china[state].text.remove(),china[state].text=R.text(xx,yy,china[state].name+"("+val+")").attr(textAttr),st[0].onclick=china[state].text[0].onclick=function(){clickFun&&clickFun(china[state].code)},st[0].onmouseover=china[state].text[0].onmouseover=function(){st.animate({fill:st.color,stroke:"#04937D","stroke-width":2},500),st.toFront(),china[state].text.toFront(),R.safari()},st[0].onmouseout=china[state].text[0].onmouseout=function(){st.animate({fill:"#97d6f5",stroke:"#eee","stroke-width":1},500),st.toBack(),china[state].text.toFront(),R.safari()}}(china[state].path,state)};
//# sourceMappingURL=ExpressPanel.js.map
Ext.define("chl.panel.CompanyPanel",{alternateClassName:["CompanyPanel"],alias:"widget.CompanyPanel",extend:"Ext.panel.Panel",itemId:"CompanyPanel"}),GridManager.CreateCompanyBase=function(prefix){return Ext.create("chl.panel.CompanyPanel",{bodyPadding:15,itemId:prefix+"_CompanyPanel",defaults:{xtype:"button",width:100,margin:"10 10 10 10"},items:[{text:"圆通快递",myval:prefix+"_1",handler:function(com){var node=TreeManager.MainItemListTree.getStore().getNodeById(com.myval),parentNode=node.parentNode;parentNode.isExpanded()?TreeManager.MainItemListTree.getSelectionModel().select(node,!0):parentNode.expand(!1,function(){TreeManager.MainItemListTree.getSelectionModel().select(node,!0)})}}]})},GridManager.CreateCompanyPanel_Cost=function(){return GridManager.CompanyPanel_Cost=GridManager.CreateCompanyBase("003"),GridManager.CompanyPanel_Cost},GridManager.CreateCompanyPanel_Point=function(){return GridManager.CompanyPanel_Point=GridManager.CreateCompanyBase("004"),GridManager.CompanyPanel_Point};
//# sourceMappingURL=CompanyPanel.js.map
Ext.onReady(function(){Ext.getBody().mask("正在加载..."),GlobalFun.fixedBugs(),Ext.state.Manager.setProvider(Ext.create("Ext.state.CookieProvider",{expires:new Date((new Date).getTime()+2592e6)})),Ext.tip.QuickTipManager.init();var LoadCurrUserInfo=function(callBack){var param={sessiontoken:GlobalFun.getSeesionToken()};WsCall.pcall(GlobalConfig.Controllers.User.GetCurrUserInfo,"GetCurrUserInfo",param,function(response,opts){GlobalConfig.CurrUserInfo=response.data,Ext.util.Cookies.set("login_sessiontoken",GlobalConfig.CurrUserInfo.session_token,new Date((new Date).getTime()+2592e6)),callBack()},function(response,opts){GlobalFun.errorProcess(response.code)||Ext.Msg.alert("登录失败",response.msg)},!1)},LoadMainView=function(){if(""==GlobalConfig.CurrUserInfo)return void Ext.Msg.alert("登录失败","登录失败！无效的登录信息",function(){GlobalFun.ReDirectUrl("login.html")});GridManager.ManageDfGrid=Ext.create("chl.dfgrid.ManageDfGrid");var roleArr=[["001","客户管理"],["002","yy管理"]];GridManager.ManageDfGrid.getStore().loadData(roleArr),GridManager.CreateCustomerGrid({needLoad:!1}),GridManager.SetCustomerGridSelectionChangeEvent(),GridManager.CreateTracking_numberGrid({needLoad:!1}),GridManager.SetTracking_numberGridSelectionChangeEvent(),GridManager.CreateExpress_pointGrid({needLoad:!1}),GridManager.SetExpress_pointGridSelectionChangeEvent(),GridManager.CreateExpressPanel(),GridManager.CreateCompanyPanel_Cost(),GridManager.CreateCompanyPanel_Point(),TreeManager.CreateMainItemListTree({needLoad:!1}),TreeManager.SetMainItemListTreeSelectionChangeEvent(),GlobalConfig.ViewPort=Ext.create("Ext.container.Viewport",{layout:{type:"border"},defaults:{split:!0,collapsible:!0},items:[{region:"north",title:"公告栏",stateful:!1,collapsed:!0,height:100,items:[{xtype:"container",html:"暂无公告"}]},{region:"west",stateId:"westStateId",stateful:!0,iconCls:"home",preventHeader:!0,title:"管理菜单",layout:{type:"accordion",animate:!1,activeOnTop:!1,collapseFirst:!1,titleCollapse:!0},width:200,listeners:{boxready:function(com,width,height,opts){var treeArr=[];treeArr.push(TreeManager.MainItemListTree),com.add(treeArr)}},items:[]},{region:"center",stateId:"centerStateId",stateful:!0,collapsible:!1,layout:{type:"border"},defaults:{split:!0,collapsible:!0,border:!1},items:[{region:"center",stateId:"centercenterStateId",stateful:!0,collapsible:!1,itemId:"centerGridDisplayContainer",title:"信息",layout:"card",height:400,listeners:{boxready:function(com,width,height,opts){var gridArr=[];gridArr.push(GridManager.ManageDfGrid),gridArr.push(GridManager.CustomerGrid),gridArr.push(GridManager.Tracking_numberGrid),gridArr.push(GridManager.ExpressPanel),gridArr.push(GridManager.CompanyPanel_Cost),gridArr.push(GridManager.Express_pointGrid),gridArr.push(GridManager.CompanyPanel_Point),com.add(gridArr)}},items:[]},{region:"south",stateId:"centersouthStateId",itemId:"centerGridDetailContainer",stateful:!0,preventHeader:!0,height:200,collapsed:!0,bodyBoder:!1,xtype:"tabpanel",frame:!1,border:!1,defaults:{border:!1},items:[{title:"详细信息",layout:"auto",itemId:"southTab1",autoScroll:!0,items:[{xtype:"container",width:800,html:"留待开发..."}]},{title:"介绍",autoScroll:!0,itemId:"southTab2",padding:"5px 5px 5px 20px",items:[{xtype:"container",width:800,html:"留待开发..."}]}]}]},{region:"south",stateId:"southStateId",stateful:!1,height:30,xtype:"toolbar",split:!1,collapsible:!1,items:["->","-",{xtype:"button",width:80,iconCls:"logout",text:"退出登录",tooltip:"退出登录当前用户",handler:function(){GlobalConfig.newMessageBox.confirm("退出登录","确定要退出登录当前用户吗?",function(btn){if("yes"==btn){var param={};WsCall.call(GlobalConfig.Controllers.User.UserLoginOut,"UserLoginOut",param,function(response,opts){Ext.util.Cookies.clear("login_sessiontoken"),Ext.getBody().mask("请稍候..."),(new Ext.util.DelayedTask).delay(20,function(){GlobalFun.ReDirectUrl("login.html")})},function(response,opts){GlobalFun.errorProcess(response.code)||Ext.Msg.alert("注销失败",response.msg)},!1)}})}}]}]})},ComboSucCount=0,ComboSucTotal=1,combInitCallBack=function(records,operation,success){success&&(ComboSucCount++,ComboSucCount==ComboSucTotal&&LoadCurrUserInfo(function(){LoadMainView(),GlobalFun.Heartbeat(),(new Ext.util.DelayedTask).delay(200,function(){Ext.getBody().unmask()})}))},LoadBaseEnumStore=function(){combInitCallBack(null,null,!0)};LoadBaseEnumStore(),GlobalFun.JsonToArray(GlobalConfig.Province)});
//# sourceMappingURL=index.js.map