Ext.onReady(function(){Ext.getBody().mask("正在加载..."),GlobalFun.fixedBugs(),Ext.state.Manager.setProvider(Ext.create("Ext.state.CookieProvider",{expires:new Date((new Date).getTime()+2592e6)})),Ext.tip.QuickTipManager.init();var LoadCurrUserInfo=function(callBack){var param={sessiontoken:GlobalFun.getSeesionToken()};WsCall.pcall(GlobalConfig.Controllers.User.GetCurrUserInfo,"GetCurrUserInfo",param,function(response,opts){GlobalConfig.CurrUserInfo=response.data,Ext.util.Cookies.set("login_sessiontoken",GlobalConfig.CurrUserInfo.session_token,new Date((new Date).getTime()+2592e6)),callBack()},function(response,opts){GlobalFun.errorProcess(response.code)||Ext.Msg.alert("登录失败",response.msg)},!1)},LoadMainView=function(){if(""==GlobalConfig.CurrUserInfo)return void Ext.Msg.alert("登录失败","登录失败！无效的登录信息",function(){GlobalFun.ReDirectUrl("login.html")});GridManager.ManageDfGrid=Ext.create("chl.dfgrid.ManageDfGrid");var roleArr=[["001","客户管理"],["002","yy管理"]];GridManager.ManageDfGrid.getStore().loadData(roleArr),GridManager.CreateCustomerGrid({needLoad:!1}),GridManager.SetCustomerGridSelectionChangeEvent(),GridManager.CreateTracking_numberGrid({needLoad:!1}),GridManager.SetTracking_numberGridSelectionChangeEvent(),GridManager.CreateExpress_pointGrid({needLoad:!1}),GridManager.SetExpress_pointGridSelectionChangeEvent(),GridManager.CreateExpressPanel(),GridManager.CreateCompanyPanel_Cost(),GridManager.CreateCompanyPanel_Point(),TreeManager.CreateMainItemListTree({needLoad:!1}),TreeManager.SetMainItemListTreeSelectionChangeEvent(),GlobalConfig.ViewPort=Ext.create("Ext.container.Viewport",{layout:{type:"border"},defaults:{split:!0,collapsible:!0},items:[{region:"north",title:"公告栏",stateful:!1,collapsed:!0,height:100,items:[{xtype:"container",html:"暂无公告"}]},{region:"west",stateId:"westStateId",stateful:!0,iconCls:"home",preventHeader:!0,title:"管理菜单",layout:{type:"accordion",animate:!1,activeOnTop:!1,collapseFirst:!1,titleCollapse:!0},width:200,listeners:{boxready:function(com,width,height,opts){var treeArr=[];treeArr.push(TreeManager.MainItemListTree),com.add(treeArr)}},items:[]},{region:"center",stateId:"centerStateId",stateful:!0,collapsible:!1,layout:{type:"border"},defaults:{split:!0,collapsible:!0,border:!1},items:[{region:"center",stateId:"centercenterStateId",stateful:!0,collapsible:!1,itemId:"centerGridDisplayContainer",title:"信息",layout:"card",height:400,listeners:{boxready:function(com,width,height,opts){var gridArr=[];gridArr.push(GridManager.ManageDfGrid),gridArr.push(GridManager.CustomerGrid),gridArr.push(GridManager.Tracking_numberGrid),gridArr.push(GridManager.ExpressPanel),gridArr.push(GridManager.CompanyPanel_Cost),gridArr.push(GridManager.Express_pointGrid),gridArr.push(GridManager.CompanyPanel_Point),com.add(gridArr)}},items:[]},{region:"south",stateId:"centersouthStateId",itemId:"centerGridDetailContainer",stateful:!0,preventHeader:!0,height:200,collapsed:!0,bodyBoder:!1,xtype:"tabpanel",frame:!1,border:!1,defaults:{border:!1},items:[{title:"详细信息",layout:"auto",itemId:"southTab1",autoScroll:!0,items:[{xtype:"container",width:800,html:"留待开发..."}]},{title:"介绍",autoScroll:!0,itemId:"southTab2",padding:"5px 5px 5px 20px",items:[{xtype:"container",width:800,html:"留待开发..."}]}]}]},{region:"south",stateId:"southStateId",stateful:!1,height:30,xtype:"toolbar",split:!1,collapsible:!1,items:["->","-",{xtype:"button",width:80,iconCls:"logout",text:"退出登录",tooltip:"退出登录当前用户",handler:function(){GlobalConfig.newMessageBox.confirm("退出登录","确定要退出登录当前用户吗?",function(btn){if("yes"==btn){var param={};WsCall.call(GlobalConfig.Controllers.User.UserLoginOut,"UserLoginOut",param,function(response,opts){Ext.util.Cookies.clear("login_sessiontoken"),Ext.getBody().mask("请稍候..."),(new Ext.util.DelayedTask).delay(20,function(){GlobalFun.ReDirectUrl("login.html")})},function(response,opts){GlobalFun.errorProcess(response.code)||Ext.Msg.alert("注销失败",response.msg)},!1)}})}}]}]})},ComboSucCount=0,ComboSucTotal=1,combInitCallBack=function(records,operation,success){success&&(ComboSucCount++,ComboSucCount==ComboSucTotal&&LoadCurrUserInfo(function(){LoadMainView(),GlobalFun.Heartbeat(),(new Ext.util.DelayedTask).delay(200,function(){Ext.getBody().unmask()})}))},LoadBaseEnumStore=function(){combInitCallBack(null,null,!0)};LoadBaseEnumStore(),GlobalFun.JsonToArray(GlobalConfig.Province)});
//# sourceMappingURL=index.js.map