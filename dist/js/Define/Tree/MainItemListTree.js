Ext.define("chl.tree.MainItemListTree",{alias:"widget.MainItemListTree",itemId:"MainItemListTree",title:"系统",iconCls:"home",extend:"chl.tree.BaseTree",clearOnLoad:!1,alternateClassName:["MainItemListTree"],store:"MainItemListTreeStoreId",ddGroup:"MainItemListTreeDDGp",animate:!1,rootVisible:!1,frame:!1,frameHeader:!1,border:!1,listeners:{itemcontextmenu:function(view,rec,item,index,e,opts){e.stopEvent()},expand:function(tree,opts){tree.getSelectionModel().hasSelection()?tree.fireEvent("selectionchange",tree,tree.getSelectionModel().getSelection(),opts):tree.getSelectionModel().select(0,!0)},boxready:function(com,width,height,opts){(new Ext.util.DelayedTask).delay(200,function(){if(!TreeManager.MainItemListTree.getSelectionModel().hasSelection()){var cookie=Ext.util.Cookies.get("GlobalConfig.globalStatus");if(cookie){var obj=Ext.JSON.decode(cookie);if(obj.tree_sel_id){var node=TreeManager.MainItemListTree.getStore().getNodeById(obj.tree_sel_id);node?TreeManager.MainItemListTree.getSelectionModel().select(node,!0):TreeManager.MainItemListTree.getSelectionModel().select(0,!0)}else TreeManager.MainItemListTree.getSelectionModel().select(0,!0)}else TreeManager.MainItemListTree.getSelectionModel().select(0,!0)}})}},initComponent:function(){var me=this;me.callParent(arguments)}}),TreeManager.CreateMainItemListTree=function(param){return TreeManager.MainItemListTree=Ext.create("chl.tree.MainItemListTree"),param&&param.needLoad&&TreeManager.MainItemListTree.getStore().load({callback:function(){var rootNode=TreeManager.MainItemListTree.getRootNode();rootNode.expand()}}),TreeManager.MainItemListTree},TreeManager.SetMainItemListTreeSelectionChangeEvent=function(param){TreeManager.MainItemListTree.on("selectionchange",function(view,seles,op){if(seles[0]){if(GlobalConfig.globalStatus.tree_sel_id=seles[0].data.id,Ext.util.Cookies.set("GlobalConfig.globalStatus",Ext.JSON.encode(GlobalConfig.globalStatus),new Date((new Date).getTime()+31536e6)),"root"==seles[0].data.id)return void GlobalFun.TreeSelChangeGrid("ManageDfGrid",GridManager.ManageDfGrid,"系统",!0);if("001"==seles[0].data.id)return void GlobalFun.TreeSelChangeGrid("CustomerGrid",GridManager.CustomerGrid,"客户列表");if("002"==seles[0].data.id)return void GlobalFun.TreeSelChangeGrid("Tracking_numberGrid",GridManager.Tracking_numberGrid,"票据列表");if("003"==seles[0].data.id)return void GlobalFun.TreeSelChangeGrid("003_CompanyPanel",GridManager.CompanyPanel,"快递公司",!0);if("004"==seles[0].data.id)return void GlobalFun.TreeSelChangeGrid("004_CompanyPanel",GridManager.CompanyPanel,"快递公司",!0);if(-1!=seles[0].data.id.indexOf("_")){var childSelArr=seles[0].data.id.split("_");if("003"==childSelArr[0]){GlobalFun.TreeSelChangeGrid("ExpressPanel",GridManager.ExpressPanel,"各省规则",!0);var param={express_id:seles[0].data.express_id,sessiontoken:GlobalFun.getSeesionToken()};return void WsCall.call(GlobalConfig.Controllers.ExpressPanel.GetCustomer_numberCount,"GetCustomer_numberCount",param,function(response,opts){var data=response.data;Ext.Array.each(data,function(item,index,alls){var temp=GridManager.ExpressPanel.down("#lbl"+item.province_code);temp.setText("现有规则:"+item.count)}),GlobalConfig.ExpressPanel_svgData=[],GlobalConfig.ExpressPanel_svgData=data,1==GridManager.ExpressPanel.getActiveTab().tabIndex&&(Ext.isGecko&&GridManager.ExpressPanel.el.mask("正在加载图形"),GlobalFun.InitChinaSvgDataEvent(GlobalConfig.ExpressPanel_svgData,function(code){GlobalFun.ExpressPanel_addRuleFun({myval:code})}),Ext.isGecko&&GridManager.ExpressPanel.el.unmask())},function(response,opts){GlobalFun.errorProcess(response.code)||Ext.Msg.alert("失败",response.msg)},!0,!1,GridManager.ExpressPanel.el)}"004"==childSelArr[0]&&"1"==childSelArr[1]&&GlobalFun.TreeSelChangeGrid("Express_pointGrid",GridManager.Express_pointGrid,"圆通网点设置")}}})};
//# sourceMappingURL=MainItemListTree.js.map