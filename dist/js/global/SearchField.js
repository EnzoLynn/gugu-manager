Ext.define("WS.lib.SearchField",{extend:"Ext.form.field.Trigger",alias:"widget.searchfield",trigger1Cls:Ext.baseCSSPrefix+"form-clear-trigger",trigger2Cls:Ext.baseCSSPrefix+"form-search-trigger",hasSearch:!1,paramName:"FullName",paramObject:!1,paramNameArr:[],initComponent:function(){var me=this;me.callParent(arguments),me.on("specialkey",function(f,e){e.getKey()==e.ENTER&&this.onTrigger2Click()},me)},boxready:function(){var me=this;me.callParent(),me.triggerEl.item(0).up("td").setWidth(0),me.triggerEl.item(0).setDisplayed("none")},setSearchStatus:function(search){var me=this;search?(me.hasSearch=!0,me.triggerEl.item(0).up("td").setWidth(17),me.triggerEl.item(0).setDisplayed("block"),me.doComponentLayout()):(me.hasSearch=!1,me.triggerEl.item(0).up("td").setWidth(0),me.triggerEl.item(0).setDisplayed("none"),me.doComponentLayout())},onTrigger1Click:function(){var me=this,store=me.store,proxy=store.getProxy();me.hasSearch&&(me.setValue(""),proxy.extraParams.filter=Ext.JSON.decode(proxy.extraParams.filter),me.paramObject?Ext.Array.each(me.paramNameArr,function(key){delete proxy.extraParams.filter[key],store.filterMap.removeAtKey(key)}):(delete proxy.extraParams.filter[me.paramName],store.filterMap.removeAtKey(me.paramName)),proxy.extraParams.filter=Ext.JSON.encode(proxy.extraParams.filter),proxy.extraParams.start=0,proxy.extraParams.refresh=1,store.load(),proxy.extraParams.refresh=null,me.hasSearch=!1,me.triggerEl.item(0).up("td").setWidth(0),me.triggerEl.item(0).setDisplayed("none"),me.doComponentLayout())},onTrigger2Click:function(){var me=this,store=me.store,proxy=store.getProxy(),value=me.getValue();return value.length<1?void me.onTrigger1Click():(me.isValid()&&(proxy.extraParams.filter=Ext.JSON.decode(proxy.extraParams.filter),me.paramObject?Ext.Array.each(me.paramNameArr,function(key){var tempObj={};tempObj[me.paramName]=value,proxy.extraParams.filter[key]=tempObj,store.filterMap.containsKey(key)?store.filterMap.replace(key,tempObj):store.filterMap.add(key,tempObj)}):(proxy.extraParams.filter[me.paramName]=value,store.filterMap.containsKey(me.paramName)?store.filterMap.replace(me.paramName,value):store.filterMap.add(me.paramName,value)),proxy.extraParams.filter=Ext.JSON.encode(proxy.extraParams.filter),proxy.extraParams.start=0,proxy.extraParams.refresh=1,store.load(),proxy.extraParams.refresh=null),me.hasSearch=!0,me.triggerEl.item(0).up("td").setWidth(17),me.triggerEl.item(0).setDisplayed("block"),void me.doComponentLayout())}});
//# sourceMappingURL=SearchField.js.map